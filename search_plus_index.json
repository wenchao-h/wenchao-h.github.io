{"./":{"url":"./","title":"首页","summary":"BKCI 是一个免费并开源的 CI 服务，可助你自动化构建-测试-发布工作流，持续、快速、高质量地交付你的产品。","keywords":"","body":"首页 🐤 了解基本概念 👉 使用 BKCI 🚀 部署 BKCI BKCI 是什么？ 创建你的第一条流水线 运行 BKCI 的学习环境 BKCI 组件 关联你的第一个代码库 在蓝鲸社区版中使用 BKCI 快速熟悉流水线 为你的Git工程开启CI BKCI 规格要求 术语解释 示例 📔 产品功能 🏪 研发商店 🤝 一起共建 BKCI 流水线 浏览研发商店 BKCI 架构 控制台 开发一个流水线插件 BKCI 代码结构 凭证管理 在 BKCI 里使用商店插件 设计理念 构建资源 文档共建 CONTRIBUTING "},"overview/what-is-bkci.html":{"url":"overview/what-is-bkci.html","title":"BKCI 是什么？","keywords":"","body":"BKCI 是什么？ 蓝鲸持续集成平台（代号 bk-ci）是一个免费并开源的 CI 服务，可助你自动化构建-测试-发布工作流，持续、快速、高质量地交付你的产品。 使用 bk-ci 屏蔽掉所有研发流程中的繁琐环节，让你聚焦于编码。它通常被用于： 工程编译 静态代码检查 运行测试用例，及时发现 BUG 部署与发布 bk-ci 提供了流水线、代码库、凭证管理、环境管理、研发商店 5 大核心服务，多重组合，满足企业不同场景的需求： 流水线：将团队现有的研发流程以可视化方式呈现出来，编译、测试、部署，一条流水线搞定 代码库：将企业内已有的代码托管服务关联至 bk-ci 凭证管理：为代码库、流水线等服务提供不同类型的凭据、证书管理功能 环境管理：可以将企业内部的开发编译机托管至 bk-ci 研发商店：由流水线插件和流水线模板组成，插件用于对接企业内部的各种第三方服务，模板助力企业内部的研发流程规范化 目前，bk-ci 已在GitHub开源：https://github.com/Tencent/bk-ci ，欢迎共建。 "},"overview/components.html":{"url":"overview/components.html","title":"BKCI 组件","keywords":"","body":"BKCI 组件 蓝鲸持续集成平台(简称bk-ci )是基于 kotlin/java/js/go/lua/shell等多种语言编写实现的，采用完全前后分离，插件式开发，具备高可用可扩展的服务架构设计： 前端&接口网关(WebAPI Gateway & FrontEnd) ： WebAPI Gateway： 由OpenResty负责，包含了对接用户登录及身份鉴权，和后端API的Consul服务发现转发的lua脚本及Nginx配置 FrontEnd： 基于VUE的纯前端工程，包含一序列的js,img和html等静态资源。 后端服务(MicroService BackEnd)： 基于Kotlin/Java编写，采用SpringCloud框架的微服务架构设计，以下按各微服务模块的启动顺序介绍： Project： 项目管理，负责管理流水线的项目，多个模块依赖于此。 Log： 构建日志服务，负责接收构建的日志的转发存储和查询输出。 Ticket： 凭证管理服务，存储用户的凭证信息，比如代码库帐号密码/SSL/Token等信息。 Repository: 代码库管理服务，存储用户的代码库，依赖于Ticket的联动。 Artifactory: 制品构件服务，该服务只实现了简化版的存取构件功能，可扩展对接自己的存储系统。 Environment: 构建机服务，导入构建机以及用环境管理构建机集群用于构建调度的并发。 Store： 研发商店服务，负责管理流水线扩展插件和流水线模板功能，包括插件&模板升级上下架，与process和artifactory联动。 Process： 流水线管理，负责管理流水线以及流水线编排调度功能的核心服务。 Dispatch： 构建（机）调度，负责接收流水线的构建机启动事件，分发给相应构建机处理。 Plugin： 服务的插件扩展服务，目前为空，主要是用于提供给后续扩展一些与前端页面联动的后台服务，比如对接各类CD平台，测试平台，质量检查平台等等，与前端页面配置，想象空间很大。 资源服务层(Resource)： 包括提供存储和必须的基础中间件等。 Storage(存储服务): 存储服务/中间件等一序列依赖的基础环境。 MySQL/MariaDB： bk-ci的主数据库存储，可用mysql 5.7.2 /mariadb 10.x存储以上所有微服务的关系型数据。 Redis： 核心服务缓存，3.x版本，缓存构建机信息和构建时的信息和提供分布式锁操作等等。 ElasticSearch： 日志存储，log模块对接ES来对构建的日志做存取。 RabbitMQ： 核心消息队列服务，bk-ci的流水线事件机制是基于RabbitMQ来流转事件消息的。 FileSystem： 这块主要为artifactory提供服务，用于存储插件，构建产物等二进制文件服务，可对接文件或者云存储类，扩展在artifactory服务模块。 Consul： 作为微服务的服务发现Server，需要搭建Consul Server， 以及在bk-ci微服务部署的所在机器上同时安装Consul并以 Agent方式运行。 组建集群可以直接用bk-ci微服务部署机器(2台)上直接以consul server和agent方式直接启动，以减少对机器数的需求。 Agent(构建机): 构建机是负责运行CI打包编译构建的一台服务器/PC，是由比如go，gcc，java，python，nodejs等等编译环境依赖，再加上运行由bk-ci提供编写实现的两部分服务进程： Agent： 由Golang编写实现，分DevopsDaemon和DevopsAgent两个进程 ： DevopsDaemon： 负责守护和启动DevopsAgent。 DevopsAgent： 负责与Dispatch和Environment微服务通信，负责整个Agent的升级和Worker(任务执行器) 进程的启动和销毁工作。 Worker： 由Kotlin编写实现，是一个命名为agent.jar的文件，，任务真正的执行者。被DevopsAgent通过jre来拉起运行，之后会负责与Process微服务模块通信，领取插件任务并执行和上报结果(Log&Process)。 "},"overview/learn-pipeline-in-5-min.html":{"url":"overview/learn-pipeline-in-5-min.html","title":"5分钟读懂 BKCI 流水线","keywords":"","body":"5分钟读懂 BKCI 流水线 bk-ci 可以帮你快速实现一条持续交付流水线来编译、测试、部署你的应用，下面将通过教程和文档指南告诉你，怎么在 bk-ci 里配置和管理持续集成、持续交付（CI/CD）流水线。 下面为流水线的完整逻辑图： Task（插件） 即一个单独的任务，如拉取 GitHub 仓库代码。 Job（作业） 可以运行在一个构建环境里，比如运行在 macOS；也可以作为不需要构建环境的普通任务调度编排。它有如下特性： 由多个 Tasks(插件)组成 一个 Task 失败，则该 Job 失败，其余 Task 将不会运行 Stage（阶段） 由多个 Job 组成 同个 Stage 下的 Job 并行执行，且 Job 与 Job 之间相互独立 当一个 Job 失败，则该 Stage 失败 Pipeline（流水线） 由多个 Stage 组成 同个 Pipeline 下的 Stage 串行执行，一个 Stage 失败，将不会执行后续 Stage 当一个 Stage 失败，则该 Pipeline 失败 Materials and Triggers(材料和触发) Materials（源材料） 流水线执行就像做饭一样，需要材料（米），有了材料，才能做出可口的饭菜。向流水线中添加了拉取代码库的相关插件后（Git、SVN），这个流水线就有了材料。 Trigger（触发） 即流水线构建的触发方式，目前包括：手动触发、定时触发、代码库事件触发以及远程触发。 其它 产出物 执行一次流水线构建，会有很多产出物出现，我们按照下面的维度进行了分类： 构件（Artifact） 顾名思义，就是编译或打包之后产生的二进制文件，包括镜像、版本压缩包、IPA 包、APK 包等等，利用插件你可以将构件归档到指定的仓库中。 代码检查报告 如果你的流水线中包含了 CodeCC 代码检查任务插件，那么你的流水线就会多出这样一个代码检查报告页面，该页面数据会随着你的流水线构建执行而不断刷新。 测试报告 安装程序 版本日志 文档 如果想在不同 Job 之间共享产出物，需要用到【Upload】和【Download】插件。 WORKSPACE 在构建机上工作目录，所有与构建机相关的插件执行时的相对目录，在如下这些需要路径插件中，需要的也是 WORKSPACE 下的相对路径。 节点 也称之为构建机，为了编译、测试或部署你的代码，你需要将至少 1 台 Agent 节点导入至 bk-ci，而随着团队规模的增长，这个数字将不断扩充。根据节点类型的不同，我们的任务也分为两类： 直接运行在节点上 你可以在添加 Job 时直接选择导入到 bk-ci 的第三方构建机（包含 macOS、Windows、Linux），流水线会在运行到对应 Job 时将任务分配到该构建机上。 运行在节点的 docker 内 当你的节点操作系统是 Linux 时，Job 详情页的构建资源类型会多出一个选项：Linux 构建镜像。选择这个选项，流水线会在运行到该 Job 后，通过以下方式来充分利用你的节点 CPU、MEM 等动态资源： 在分配到该 Job 的节点上运行 docker run 命令，将对应镜像启动后 把 WORKSPACE 挂载至 docker 内来进行编译构建 Job 运行结束后，销毁该容器，WORKSPACE 保留 接下来你可能需要 了解更多基础概念有助于你快速配置适合业务场景的流水线： Task Job Stage Variables Trigger "},"overview/terminology/":{"url":"overview/terminology/","title":"术语解释","keywords":"","body":"术语解释 了解下面的属于有助于帮你快速上手 BKCI。 "},"overview/terminology/pipelines.html":{"url":"overview/terminology/pipelines.html","title":"Pipelines","keywords":"","body":"Pipelines "},"overview/terminology/stage.html":{"url":"overview/terminology/stage.html","title":"Stage","keywords":"","body":"Stage 为了更清晰的描述 CI 流程，我们引入 Stage（阶段）的概念。 由多个 Jobs（作业）组成； 同一个 Stage 下的 Job 执行方式为并行，由于 Job 之间是相互独立的，某个 Job 失败后，其它的 Job 会被运行到完成； 一个 Job 失败，则该 Stage 失败。 Stage 的通用选项 Fastkill 开启 Fastkill 之后，当 Job 失败时立即结束当前 Stage。 流程控制选项 通过高级流程控制，可以定义 Job 的运行逻辑。 接下来你可能需要 Task Job "},"overview/terminology/job.html":{"url":"overview/terminology/job.html","title":"Job","keywords":"","body":"Job Job，可以运行在一个构建环境里，比如运行在 macOS；也可以作为不需要构建环境的普通任务调度编排。它有如下特性： 由多个 Tasks(插件)组成； 一个 Task 失败，则该 Job 失败，其余 Task 将不会运行； WORKSPACE 每个 Job 都有自己的 WORKSPACE，WORKSPACE 就是该 Job 下所有插件的运行根目录。 如果一个 Job 中包含了“子流水线调用”插件，那该子流水线下的 Job 的 WORKSPACE 也会遵循上述原则，完全独立，不会跟父流水线的 WORKSPACE 冲突。 Job 的通用选项 流程控制选项 通过高级流程控制，可以定义 Job 的运行逻辑。 互斥组 互斥组是为了解决并发构建使用同一构建机时的资源冲突问题而设计的，对不同流水线的不同 Job 设置同一个互斥组。 接下来你可能需要 Task Stage "},"overview/terminology/task.html":{"url":"overview/terminology/task.html","title":"Task","keywords":"","body":"Task Task，也被称为流水线插件，通常是一个单独的任务，如拉取 Git 仓库代码等。 Task 必须包含在 Job 内，同一个 Job 内的 Tasks 都是从上往下顺序执行（启用了高级流程控制的 Task 除外）。 自定义插件 通过研发商店，你可以开发自己的插件，目前已支持 Java/Python/NodeJS/Go 4 种主流语言，开始开发你的第一个流水线插件吧。 插件版本 每个插件都有版本控制，在使用插件时，你必须指定一个版本。 插件的版本规范： 每次添加插件时，默认为当前插件的最新版本 已添加的插件，版本号如果包含 N.latest，如果插件开发者发布了包含 N 的新特性版本，就会自动使用新版本 插件的通用选项 高级流程控制 通过高级流程控制，可以定义插件的运行逻辑。 插件输出 每个插件在运行之后，会产生一系列的输出变量，通过变量和高级流程控制的有效组合，可以实现各种应用场景。 输出字段命名空间 用于解决流水线下，相同插件有多个实例时，输出字段使用冲突的问题。 当没有冲突时，无需添加命名空间 当修改了命名空间后，后续使用到对应字段的地方也需要同步修改 接下来你可能需要 Job Stage "},"overview/terminology/trigger/":{"url":"overview/terminology/trigger/","title":"Trigger","keywords":"","body":"Trigger bk-ci 支持多种方式触发流水线： API 触发 代码库事件触发 子流水线调用插件触发 定时触发 手动触发 远程触发 不同的触发方式下，系统内置的 BK_CI_START_TYPE 取值也不同，你可以根据需要在流水线后续插件中使用该值： 触发方式 BK_CI_START_TYPE 值 远程触发 REMOTE 手动触发 MANUAL 定时触发 TIME_TRIGGER 子流水线插件触发 PIPELINE 代码库 HOOK 触发 WEB_HOOK API 触发 SERVICE "},"overview/terminology/trigger/github.html":{"url":"overview/terminology/trigger/github.html","title":"github事件触发","keywords":"","body":"github事件触发 如果您需要GitHub事件触发，您需要在部署BKCI时额外申请一个GitHub APP。 需要将如下相应变量，填充到bkenv.properties 配置文件中， 再重新render_tpl生成配置文件 "},"overview/terminology/variables.html":{"url":"overview/terminology/variables.html","title":"Variables","keywords":"","body":"Variables 在流水线中定义变量 在编排流水线时自定义变量 在编辑流水线页面点击 Job1-1，可以添加流水线变量。 在流水线插件中设置变量 如果你在 bk-ci 中开发了自己的流水线插件，可以在插件的 task.json 中定义 output 字段，这样也可以在运行该插件时声明这些变量。 通过 Bash 插件设置变量 您可以通过 Shell Script 插件中的 setEnv 函数设置插件间传递的参数，用法如下： #!/usr/bin/env bash # setEnv \"FILENAME\" \"package.zip\" # 然后在后续的插件的表单中使用${FILENAME}引用这个变量 在流水线中引用变量 你可以在任意的插件表单中使用通过上面介绍的方式定义的变量，引用方式为${KEY} 在手动触发流水线时设置变量值 在编辑流水线时定义了流水线变量，并开启了“执行时显示”选项时，则会在运行流水线后进入流水线预览页； 进入预览页，你可以再次编辑你的变量 value 并运行流水线。 变量 Key 在执行时不可修改，只能修改 value。 接下来你可能需要 预定义变量列表 "},"tutorials/create-first-pipeline.html":{"url":"tutorials/create-first-pipeline.html","title":"创建你的第一条流水线","keywords":"","body":"创建你的第一条流水线 这个 step-by-step 教程为你的 Go 工程创建一条流水线。 准备事项 一个 git 工程，可参考关联你的第一个代码库 一个 BKCI 项目 熟悉创建/编辑流水线页面相关操作 运行你的第一次构建 打开 bk-ci，切换至流水线服务 切换到你的项目 点击新建流水线 编辑如图1所示流水线： 点击保存并执行 你的#1 构建已经成功运行，请耐心等待结束，如图2所示 接下来你可能需要 接下来你可能需要对流水线有更深一步的了解： 5分钟读懂 BKCI 流水线 "},"tutorials/link-first-repo.html":{"url":"tutorials/link-first-repo.html","title":"关联你的第一个代码库","keywords":"","body":"关联你的第一个代码库 请按照如下步骤将你的代码库关联至 bk-ci（这里以 gitlab 为例）： 切换至代码库服务 选择关联 Gitlab 代码库（如果凭据为空时，可以点击“新增”去增加凭据） 目前支持的代码库类型有： SVN 私有 gitlab github 接下来你可能需要 创建你的第一条流水线 "},"tutorials/enable-git-ci.html":{"url":"tutorials/enable-git-ci.html","title":"为你的Git工程开启CI","keywords":"","body":"为你的Git工程开启CI 准备事项 一个 gitlab 工程 如没有，请参考关联你的第一个代码库 一个 bk-ci 项目 了解流水线的基本概念 通过 BK-CI 监听代码库 push 事件 创建一条空白流水线 在 Job1-1 中添加触发器：GitLab 添加 Job2-1，用来执行具体的编译任务 依次添加如下 3 个插件： Checkout GitLab Shell Script Upload artifacts "},"tutorials/examples/":{"url":"tutorials/examples/","title":"示例","keywords":"","body":"示例 "},"tutorials/examples/java-maven-demo.html":{"url":"tutorials/examples/java-maven-demo.html","title":"Java Maven Demo","keywords":"","body":"Java Maven Demo 本篇文章将指导你如何在 bk-ci 编译Maven工程。 准备材料 一个 maven 工程：https://gitlab.com/bk-ci/gs-maven.git 一个包含 mvn 命令的 CI 镜像：https://hub.docker.com/r/bkci/ci 详细步骤 将准备好的 gitlab 代码库关联至 bk-ci，请参考 创建一条空白流水线 将 Linux 构建环境添加到 Job2-1，镜像地址填写：bkci/ci:latest 依次添加如下 4 个插件： 1. Checkout Gitlab 2. Shell Scripts #!/usr/bin/env bash cd initial mvn install Shell Scripts #!/usr/bin/env bash cd initial mvn test Upload artifacts 运行流水线，观察结果 "},"tutorials/examples/node-demo.html":{"url":"tutorials/examples/node-demo.html","title":"Node Demo","keywords":"","body":"Node Demo 本篇文章将指导你如何在 bk-ci 编译NodeJS工程。 准备材料 一个 NodeJS 工程：https://gitlab.com/bk-ci/gs-maven.git 一个包含 npm 命令的 CI 镜像：https://hub.docker.com/r/bkci/ci 详细步骤 将准备好的 gitlab 代码库关联至 bk-ci，请参考 创建一条空白流水线 将 Linux 构建环境添加到 Job2-1，镜像地址填写：bkci/ci:latest 依次添加如下 3 个插件： 1. Checkout Gitlab 2. Shell Scripts #!/usr/bin/env bash npm run test Upload artifacts 运行流水线，观察结果 "},"setup/system-requirements/":{"url":"setup/system-requirements/","title":"BKCI 系统要求","keywords":"","body":"BKCI 系统要求 我们提供了以最小化硬件成本搭建起 BKCI 的最低要求。如果你正尝试将 BKCI 投入生产环境，请仔细阅读：BKCI 硬件规格指南 BKCI 支持如下主流的浏览器： Google Chrome Microsoft Edge 硬件 CPU：最少2核/2GHz 内存：最少1GB，推荐2GB 磁盘空间：最少1GB 支持的操作系统 CentOS/RedHat：6.0及以上版本 支持的操作系统 Windows：Windows Server 2012/2016; Win10 macOS：10.14及以上（Intel处理器） Linux：CentOS/Ubuntu 硬件 CPU：2GHz 内存：最少128MB，推荐256MB 附加要求 第三方构建机环境准备 "},"setup/system-requirements/hardware-specifications.html":{"url":"setup/system-requirements/hardware-specifications.html","title":"BKCI 硬件规格指南","keywords":"","body":"BKCI 硬件规格指南 BKCI 服务器的硬件规格取决于许多因素，所以我们很难提前给出你所需的硬件规格。 Agent（构建资源）硬件要求 Agent上会运行你在流水线中编排的任务，所以它的硬件要求，往往取决于你要在Agent上运行什么样的流水线，如果是涉及到编译、自动化测试等特别占用 "},"setup/run-bkci-in-one-docker.html":{"url":"setup/run-bkci-in-one-docker.html","title":"使用 One-Docker 运行 BKCI 的学习环境","keywords":"","body":"使用 One-Docker 运行 BKCI 的学习环境 我们提供了BKCI的单容器的部署方案，仅供演示。 创建名为 bkci-demo 的容器, 并传递主机的80端口到容器内的80端口: docker run -p 80:80 --name bkci-demo -dit blueking/bk-ci 观察容器启动日志输出: docker logs -f bkci-demo 当服务全部启动成功, 会输出访问提示: 服务成功启动. 您可以在浏览器输入 http://devops.bktencent.com 访问bkci了. (请提前配置DNS或hosts) "},"setup/run-bkci-in-prod/":{"url":"setup/run-bkci-in-prod/","title":"在生产环境中运行 BKCI","keywords":"","body":"在生产环境中运行 BKCI "},"setup/run-bkci-in-prod/on-tencentcloud.html":{"url":"setup/run-bkci-in-prod/on-tencentcloud.html","title":"将 BKCI 一键部署至腾讯云","keywords":"","body":"将 BKCI 一键部署至腾讯云 "},"setup/run-bkci-in-prod/on-bkce.html":{"url":"setup/run-bkci-in-prod/on-bkce.html","title":"在蓝鲸社区版中部署 BKCI","keywords":"","body":"在蓝鲸社区版中部署 BKCI "},"services/console.html":{"url":"services/console.html","title":"控制台","keywords":"","body":"控制台 该区域将出现在bk-ci的所有页面上，以方便你在需要时及时切换其它服务、项目等。该导航条共有6个功能入口。 功能区介绍 切换项目 切换服务 当前已选中的服务名称 中英文切换入口 官方文档中心入口 个人中心 接下来你可能需要 流水线列表页 代码库 构建资源 凭证管理 "},"services/pipelines/":{"url":"services/pipelines/","title":"流水线","keywords":"","body":"流水线 "},"services/pipelines/pipeline-list.html":{"url":"services/pipelines/pipeline-list.html","title":"流水线列表页","keywords":"","body":"流水线列表页 你切换至流水线服务后的第一个页面就是流水线列表页，在这里你可以找到管理流水线需要的常见入口。 功能区介绍 新建流水线 查看流水线列表 切换视图 增加已有视图到流水线导航条 流水线更多功能入口 接下来你可能需要 控制台 创建/编辑流水线 流水线执行历史 流水线任务详情页 "},"services/pipelines/pipeline-build-history.html":{"url":"services/pipelines/pipeline-build-history.html","title":"流水线执行历史","keywords":"","body":"流水线执行历史 每个流水线都有自己的任务执行历史页，在这里你可以快速查找 CI 任务记录。 过滤：可根据任务状态、代码库、分支等常见字段过滤流水线构建任务 设置显示列：如果执行历史的默认表格字段不满足你，别担心，这里可以自定义 执行历史：每次触发都会产生一条任务记录，点击每行可以进入任务详情页 接下来你可能需要 流水线列表页 流水线任务详情页 "},"services/pipelines/pipeline-edit/":{"url":"services/pipelines/pipeline-edit/","title":"创建/编辑流水线","keywords":"","body":"创建/编辑流水线 流水线的核心页面之一，可通过可视化界面生成 CI 流水线。 流水线面包屑：此处有两个点击事件 点击流水线名称：快速进入流水线执行历史 点击名称右侧的小三角：快速切换至其它流水线 流水线编辑标签，可以在流水线编排页、基础设置之间互相切换： 流水线编排区：参考 3 流水线基础设置： 流水线编排区：遵守流水线核心理念的可视化编排区域 流水线操作区，包含如下常用操作集合： 保存：每点一次保存，会生成一个从 1 开始自增的编排版本号，可用于回滚 执行：基于当前的编排版本号，生成一个快照流水线任务 重命名：对当前流水线名称进行改名 收藏：将当前流水线收藏，可以在“我的收藏”视图中查看 导出：将当前流水线导出为 JSON，可以在新建流水线时导入（可跨不同项目） 复制为：基于当前流水线的当前编排版本号，复制一个新的流水线“旧流水线名称_copy” 另存为模板：将当前流水线的编排保存为流水线模板 删除：软删除，将放入流水线回收站 接下来你可能需要 流水线执行历史 流水线列表页 流水线任务详情页 "},"services/pipelines/pipeline-edit/gui.html":{"url":"services/pipelines/pipeline-edit/gui.html","title":"流水线图形化编排","keywords":"","body":"流水线图形化编排 Stage操作集合 为Stage开启准入 在完整的CI/CD生命周期中，我们难免会有一些期望人工介入审核的步骤，Stage准入特性可以允许你在流水线运行到某个Stage之前暂停流程，人工介入后可以继续。 开启方法 在编辑流水线时，对已有的某个Stage左上角的闪电ICON点击进入Stage准入属性面板 开启后的效果 如果某个构建任务处于Stage准入审核时，那这个构建任务将成为“STAGE_SUCCESS”状态，可参考流水线状态信息汇总 "},"services/pipelines/pipeline-edit/alias-buildno.html":{"url":"services/pipelines/pipeline-edit/alias-buildno.html","title":"为流水线开启自定义构建号","keywords":"","body":"为流水线开启自定义构建号 为什么要自定义构建号？ 默认的流水线构建号是由1自增的数字组成，为了增加可辨识度，我们允许您对流水线的构建号做出别名设置，开启后将在页面展示上优先显示您的自定义构建号格式。 开启方法 进入流水线基础设置页，设置对应的构建号规则即可，比如： ${{DATE:\"yyMMdd\"}}.${{BUILD_NO_OF_DAY}} 规则说明 可用格式 KEY Example YEAR 2020 DAY_OF_MONTH 28 DAY_OF_YEAR 285 HOUR_OF_DAY 23 MINUTE 55 MONTH_OF_YEAR 3 BUILD_NO_OF_DAY 从1自增，每天重置 DATE:\"yyMMdd hh:MM\" 20201028 10:08 SECOND 59 新增的字段对应变量：${BK_CI_BUILD_NUM_ALIAS} 该字符长度最长256字符 该字符所能生成的真实字符串长度最长256字符 配置自定义构建号处需强提醒：超出长度限制的部分会被截断 构建号超长不影响流水线的构建 允许的字符 规则允许的字符改为：^[\\w-{}() +?.:$\"]{1,256}$，自定义内部版本号规则只能由[大写和小写字母，数字，空格，-，_，。，：，{，}，（，），“，+，？，$]字符组成，并且长度为在1-256之间 格式化时间的规则在db请配置成：DATE:\"(.+?)\"，(.+?)指的是通用规则，支持用户配置由大小写字母、空格、:、-等字符组成的规则，如：yyyy-MM-dd HH:mm:ss 3、用户配置规则，通过$引用具体的规则xx 效果展示 "},"services/pipelines/pipeline-edit/disable-pipeline.html":{"url":"services/pipelines/pipeline-edit/disable-pipeline.html","title":"锁定流水线","keywords":"","body":"锁定流水线 什么是锁定流水线 有些场景下，可能需要禁用掉一段时间的流水线触发方式，在未来某个时间再次开启，可以使用本功能。 如何锁定流水线 自由模式与约束模式的流水线都可以设置锁定，锁定方式如下： 进入流水线编辑页->基础设置->运行锁定 锁定后的影响 流水线一旦开启锁定，任何触发方式都无法启动该流水线。 "},"services/pipelines/pipeline-build-detail/":{"url":"services/pipelines/pipeline-build-detail/","title":"流水线任务详情页","keywords":"","body":"流水线任务详情页 "},"services/pipelines/pipeline-build-detail/status.html":{"url":"services/pipelines/pipeline-build-detail/status.html","title":"流水线状态信息汇总","keywords":"","body":"流水线状态信息汇总 Pipeline 状态 KEY Description Display Name QUEUE 初始状态：队列中等待调度，在准备执行前会切换为QUEUE_CACHE 队列中 QUEUE_CACHE 中间状态：进入执行队列，可以启动 待执行 RUNNING 中间状态：运行中 运行中 CANCELED 最终态：取消 取消 STAGE_SUCCESS 最终态： 当Stage人工审核 取消运行时，是一个成功的状态 阶段性完成 （成功） SUCCEED 最终态：成功 成功 FAILED 最终态：失败 失败 TERMINATE 最终态： 处于RUNNING状态的Pipeline因环境异常而被强制终止 终止 （失败） QUEUE_TIMEOUT 最终态：队列中等待调度导致的超时 排队超时 Stage 状态 KEY Description Display Name QUEUE 初始状态：队列中等待调度，在准备执行前会切换为QUEUE_CACHE 队列中 QUEUE_CACHE 中间状态：进入执行队列，可以启动 待执行 RUNNING 中间状态：运行中 运行中 REVIEWING 中间状态：stage处于 人工审核中 审核中 PAUSE 中间状态：当Stage人工审核 等待审核时 暂停执行 CANCELED 最终态：取消 取消 SUCCEED 最终态：成功 成功 FAILED 最终态：失败 失败 TERMINATE 最终态： 处于RUNNING状态的Stage因环境异常而被强制终止 终止 （失败） SKIP 最终态：跳过不执行 跳过 UNEXEC 最终态：从未执行，可能构建失败导致的结束，后面未执行 从未执行（不参与最终成功/失败状态运算） QUEUE_TIMEOUT 最终态：队列中等待调度导致的超时 排队超时 STAGE_SUCCESS 最终态： 当Stage人工审核 取消运行时，是一个成功的状态 阶段性完成 （成功） Job状态 KEY Description Display Name QUEUE 初始状态：队列中等待调度，在准备执行前会切换为QUEUE_CACHE 队列中 QUEUE_CACHE 中间状态：进入执行队列，可以启动 待执行 LOOP_WAITING 中间状态：轮循等待中 互斥组抢锁轮循 互斥锁轮循等待中 DEPENDENT_WAITING 中间状态：等待依赖的job完成才会进入准备环境 依赖等待 PREPARE_ENV 中间状态：准备环境中，构建机正在启动 准备环境中 RUNNING 中间状态：运行中 运行中 PAUSE 中间状态：插件暂停执行时，会将Job的状态也设置为暂停 暂停执行 CANCELED 最终态：取消 取消 SUCCEED 最终态：成功 成功 FAILED 最终态：失败 失败 TERMINATE 最终态： 处于RUNNING状态的JOB因环境异常而被强制终止 终止 （失败） SKIP 最终态：跳过不执行 跳过 UNEXEC 最终态：从未执行，可能构建失败导致的结束，后面未执行 从未执行（不参与最终成功/失败状态运算） QUEUE_TIMEOUT 最终态：队列中等待调度导致的超时 排队超时 HEARTBEAT_TIMEOUT 最终态：构建过程中，Agent与服务端失联超过2分钟 心跳超时（失败） Task状态 KEY Description Display Name QUEUE 初始状态：队列中等待调度，在准备执行前会切换为QUEUE_CACHE 队列中 QUEUE_CACHE 中间状态：进入执行队列，可以启动 待执行 RETRY 中间状态：设置了失败重试，进入执行队列 待重试 RUNNING 中间状态：运行中 运行中 CALL_WAITING 中间状态：用于启动构建环境插件等待构建机回调启动结果 等待构建机回调 （运行中） REVIEWING 中间状态：人工审核插件或质量红线配置了人工审核 并处于待审核 待审核（运行中） PAUSE 中间状态：插件设置了暂停执行 暂停执行 REVIEW_ABORT 最终态：人工审核插件或质量红线配置了人工审核 并点了驳回/终止 人工审核驳回（失败） REVIEW_PROCESSED 最终态：人工审核插件或质量红线配置了人工审核 并点了通过 人工审核通过（成功） CANCELED 最终态：取消 取消 SUCCEED 最终态：成功 成功 FAILED 最终态：失败 失败 TERMINATE 最终态： 处于RUNNING状态的插件因环境异常而被强制终止 终止 （失败） SKIP 最终态：跳过不执行 跳过 EXEC_TIMEOUT 最终态：执行时间超过配置的超时时间 执行超时（失败） UNEXEC 最终态：从未执行，可能构建失败导致的结束，后面未执行 从未执行（不参与最终成功/失败状态运算） QUEUE_TIMEOUT 最终态：队列中等待调度导致的超时 排队超时 QUALITY_CHECK_FAIL 最终态：被质量红线拦截后直接失败（未设置人工审核） 被质量红线拦截（失败） "},"services/pools/":{"url":"services/pools/","title":"构建资源","keywords":"","body":"构建资源 "},"services/pools/self-hosted-agents/":{"url":"services/pools/self-hosted-agents/","title":"将你的构建机托管至 BKCI","keywords":"","body":"将你的构建机托管至 BKCI 本教程将指引你将自己的构建资源以第三方构建机的形式托管至 bk-ci，构建资源同时支持 macOS、Windows、Linux。 托管前，请先准备好执行环境：第三方构建机环境准备 导入方法：服务-环境管理-节点页面，点击右上角的导入第三方构建机： 根据弹窗： 选择机器的系统，不同操作系统安装命令和安装方法不一样； 复制安装 Agent 的命令，在你的构建机的目标工作空间中执行该命令，进行 Agent 的下载和安装 安装完 Agent 以后，点击刷新，刷新出节点，点击导入即可。 接下来你可能需要 构建机详情页 "},"services/pools/self-hosted-agents/prepara-agent.html":{"url":"services/pools/self-hosted-agents/prepara-agent.html","title":"第三方构建机环境准备","keywords":"","body":"第三方构建机环境准备 bk-ci 流水线的插件，是由官方或第三方开发者提供。插件开发语言支持 Java、Python、NodeJs 或 Golang，执行时对环境有所依赖。 私有构建机导入 bk-ci 作为流水线执行机之前，需先准备好环境，以免流水线执行失败。 研发商店支持开发 python 插件，如果想在你的构建机上能正常运行 python 插件，需要进行如下设置： 安装 python 鉴于 python2 即将不提供服务，建议安装 python3.6 插件需能兼容 python2 和 python3，所以执行环境安装的 python 版本影响不大 安装最新版本的 pip 工具 若企业内部有专用的 pip 源，请设置 pip 源 index-url = extra-index-url = timeout = 600 [install] trusted-host = 配置步骤（以 Linux 为例） 以安装 bk-ci Agent 的用户身份登录机器 配置 pip 的用户，和启动 bk-ci Agent 的用户需一致，否则配置不生效。 执行 ps -ef |grep devops 命令确认启动 bk-ci Agent 的用户 vi ~/.pip/pip.conf，将上述配置添加进去，注意换行符不能是\\r\\n 保存配置 重启 bk-ci Agent 研发商店支持开发 NodeJS 插件，如果想在你的构建机上能正常运行 NodeJS 插件，需要进行如下设置： 安装 NodeJS 建议安装node LTS 版本，支持更多 es 特性 若企业内部有专用的 npm 源，配置 npm 仓库为内网版本 npm config set registry "},"services/pools/self-hosted-agents/windows/":{"url":"services/pools/self-hosted-agents/windows/","title":"导入Windows构建机","keywords":"","body":"导入Windows构建机 托管前，请先准备好执行环境：第三方构建机环境准备**** 如果您的windows构建需要在流水线中启动UI程序（比如打开浏览器做自动化测试），请参阅windows agent启动界面程序的解决办法） agent资源是按项目隔离的，如果多个项目导入第三方构建机，需要在不同的项目下各自导入agent，安装在不同的目录下。（每个agent的安装包/安装脚本是不一样的） 在BKCI获取Agent包 根据将你的构建机托管至 BKCI 指引，选择Windows，下载Agent包 在Windows构建机上创建agent安装目录 new-item C:\\data\\landun -itemtype directory 解压安装agent 将下载好的Agent包解压至上一步创建的文件夹下 以管理员身份运行 install.bat 切换agent服务启动用户 上面的操作将agent安装为系统服务，服务的启动用户为windows的内置用户system。为了在流水线过程中可以读取到用户环境变量和用户目录等信息，需要将系统服务的启动用户改为登录用户 执行命令services.msc打开windows服务管理界面，找到服务devops_agent_{agent_id}（每个agent_id都是不同的，agent_id的值可以在配置文件.agent.properties中找到） 右键->属性，在登录页签下选择此账户 如果是入域的构建机，账户名填写域名\\用户名，例如tencent\\xxx；如果没有入域的构建机，账户名填写.\\用户名，例如.\\admin、.\\administrator、.\\bkci 输入密码后，点击确认按钮 右键->重新启动，重启服务 检查状态 打开任务管理器，查看进程 devopsDaemon.exe 和 devopsAgent.exe 是否存在，查看两个进程的启动的用户名是否为当前登录用户 页面导入 在构建导入页面点击刷新按钮，可以看到agent状态变为正常 "},"services/pools/self-hosted-agents/windows/run-ui.html":{"url":"services/pools/self-hosted-agents/windows/run-ui.html","title":"windows agent启动界面程序的解决办法","keywords":"","body":"windows agent启动界面程序的解决办法 BKCI第三方构建机 windows agent 默认以系统服务的方式启动，通过agent启动带界面UI的程序时会报错或者碰到界面被不可见的问题 原因：Windows Service启动的进程都运行在Session0内，Session0限制了不能向桌面用户弹出信息窗口、UI 窗口等信息。 碰到这种情况可以换一种方式启动agent，方式如下： 如果agent已经安装成系统服务，执行 uninstall.bat 卸载agent服务 双击 devopsDaemon.exe 启动agent，注意不要关掉弹出窗口 这种方式启动的agent没有开机启动功能。 agent执行完构建任务后，会自动停止所有由agent启动的子进程，如果不需要结束子进程，可以在启动进程前设置环境变量：set DEVOPS_DONT_KILL_PROCESS_TREE=true "},"services/pools/agent-detail.html":{"url":"services/pools/agent-detail.html","title":"构建机详情页","keywords":"","body":"构建机详情页 将你的构建机托管至 bk-ci 后，你可以在这个页面查看到构建机列表和每一台构建机的详情信息。 构建机列表 构建机详情 构建机 CPU 使用率趋势图 构建机内存使用率趋势图 构建机网络 IO 趋势图 构建机磁盘 IO 趋势图 复制安装命令：当构建机重装系统、Agent 目录被删除的场景下重新安装 Agent 时使用 提供了与本构建机有关的 4 个重要信息： 基本信息：包含启动用户、安装目录、Agent 版本、最大构建任务并发数（默认为 4，防止当构建机负载过高时）等基本信息。 环境变量（即将删除） 构建任务：所有分配到本构建机的流水线 Job 都会出现在这里，在遇到任务排队时可以到这里查看具体的任务分配信息。 机器上下线记录：构建机 Agent 离线上线，都会产生一条记录在这里。 "},"services/ticket.html":{"url":"services/ticket.html","title":"凭证管理","keywords":"","body":"凭证管理 在流水线运行期间，你可能需要很多种凭据类型在拉取代码库、调用代码库 API、通过账号密码访问第三方服务时使用。 创建凭证 目前支持以下几种凭据类型： 类型 描述 密码 定义后会作为流水线变量在各种插件中引用 用户名+密码 一般在关联 SVN 代码库时用到 SSH 私钥 关联 GitLab 代码库时（不需要 GitLab 事件触发）使用 SSH 私钥+私有 Token 关联 GitLab 代码库时（需要 GitLab 事件触发）使用 用户名密码+私有 token 关联 GitLab 代码库时（需要 GitLab 事件触发）使用 AccessToken 关联 GitLab 代码库时（需要 GitLab 事件触发）使用 查看凭据 可以在这里查看所有有权限的已关联凭据。 接下来你可能需要 创建你的第一条流水线 "},"services/repo.html":{"url":"services/repo.html","title":"代码库","keywords":"","body":"代码库 在本页面，你可以将企业已有的代码库关联至 bk-ci，也可以查阅已关联的代码库列表。 关联 gitlab 代码库 点击关联代码库后可弹出“关联代码库”的弹窗，会收集代码库的基本信息： 源代码地址：可以通过 bk-ci 服务端正常访问的 gitlab 仓库地址，以 http/https 开头，以.git 结尾； 别名：关联后在 bk-ci 里显示的名字，这个别名会在流水线中关联代码库时显示，整个项目下唯一； 访问凭证：点击右侧新增按钮可跳转到凭证管理中添加凭证。 接下来你可能需要 创建你的第一条流水线 "},"services/turbo/":{"url":"services/turbo/","title":"编译加速","summary":"欢迎使用 Turbo 加速方案","keywords":"","body":"编译加速 Turbo 加速基于分布式编译、缓存、容器技术，旨在为用户提供高效、稳定、便捷的加速服务，提升研发效率，缩短交付周期。 "},"store/store-home.html":{"url":"store/store-home.html","title":"浏览研发商店","keywords":"","body":"浏览研发商店 研发商店里提供了流水线运行需要的公共资源：插件、模板、容器镜像。你可以找到适合自己项目的插件， 功能区介绍 通过关键字搜索当前类型的研发商店资源（当前属于什么资源类型可以在 4 中查看） 工作台入口，可以管理自己贡献的资源 当前资源列表 资源类型，目前有流水线插件、流水线模板、容器镜像 资源过滤器 接下来你可能需要 开发一个流水线插件 "},"store/pipeline-templates.html":{"url":"store/pipeline-templates.html","title":"流水线模板","keywords":"","body":"流水线模板 "},"store/ci-images/":{"url":"store/ci-images/","title":"CI镜像","keywords":"","body":"CI镜像 bk-ci 提供了默认的 Ubuntu 镜像，但不一定能满足所有编译场景，你可以通过这篇文章基于默认镜像制作自定义镜像。 默认镜像： bkci/ci:latest 准备材料 docker build相关 知识 一台 linux 构建机 一个可以在机器上成功构建出镜像的 Dockerfile 工程 自定义 CI 镜像 登录构建机，将 Dockerfile 工程同步到构建机，进入 Dockerfile 工程目录 Dockerfile 示例： FROM bkci/ci:latest RUN yum install -y mysql-devel 执行 docker build 重要提示： 因为流水线里面的容器是通过 CMD，使用/bin/sh 启动的，因此必须保证镜像里面存在/bin/sh 以及 curl 命令（用来下载 Agent） 不要设置 ENTRYPOINT 确保为 64 位镜像 用户用 root，如需普通用户可以在 bash 里面切换，否则流水线任务启动不了 docker build -t XXX.com/XXX/YYY:latest -f Dockerfile . 执行 docker login docker login XXX.com 执行 docker push docker push XXX.com/XXX/YYY:latest 接下来你可能需要 发布一个容器镜像 "},"store/ci-images/image-build.html":{"url":"store/ci-images/image-build.html","title":"构建并托管一个CI镜像","keywords":"","body":"构建并托管一个CI镜像 bk-ci 提供了默认的 Ubuntu 镜像，但不一定能满足所有编译场景，你可以通过这篇文章基于默认镜像制作自定义镜像。 默认镜像： bkci/ci:latest 准备材料 docker build相关 知识 一台 linux 构建机 一个可以在机器上成功构建出镜像的 Dockerfile 工程 自定义 CI 镜像 登录构建机，将 Dockerfile 工程同步到构建机，进入 Dockerfile 工程目录 Dockerfile 示例： FROM bkci/ci:latest RUN yum install -y mysql-devel 执行 docker build 重要提示： 因为流水线里面的容器是通过 CMD，使用/bin/sh 启动的，因此必须保证镜像里面存在/bin/sh 以及 curl 命令（用来下载 Agent） 不要设置 ENTRYPOINT 确保为 64 位镜像 用户用 root，如需普通用户可以在 bash 里面切换，否则流水线任务启动不了 docker build -t XXX.com/XXX/YYY:latest -f Dockerfile . 执行 docker login docker login XXX.com 执行 docker push docker push XXX.com/XXX/YYY:latest 注意 插件可能使用 Java、Python、Golang、Nodejs 其中一种或多种语言开发，镜像环境需支持多种语言执行 Python 插件执行环境 NodeJS 插件执行环境 接下来你可能需要 发布一个容器镜像 "},"store/ci-images/image-release.html":{"url":"store/ci-images/image-release.html","title":"发布一个CI镜像","keywords":"","body":"发布一个CI镜像 准备容器镜像 若没有镜像，请参考构建并托管一个CI镜像 发布容器镜像 入口 工作台->容器镜像->关联镜像 关联镜像 镜像在研发商店中的唯一标识，不重名即可 镜像发布过程中，可以在此调试项目下，验证镜像功能是否正常。建议使用专用的测试项目验证 若为私有镜像，请在凭证管理创建一个凭证，关联到此镜像。执行时，系统使用此凭证去拉取镜像 上架/升级镜像 入口如下 填写基本信息 镜像库 host 若为 docker hub 镜像，可以不填，或者填 docker.io 镜像名称，包括镜像命名空间 镜像 tag 凭证：私有镜像需要指定访问的凭证 Dockerfile：将展示在研发商店中，供用户了解镜像细节 当升级镜像时，有三种升级模式： 非兼容式升级： 镜像功能逻辑发生重大变更，和老版本不兼容时使用 此类型版本发布后，已使用该镜像的流水线不会自动升级版本，需用户手动修改版本号 主版本号 +1 兼容式功能更新： 镜像功能更新或新增(不影响已使用用户)时使用 此类型版本发布后，已使用该镜像且版本号选为[主版本.latest]的流水线自动使用新版本，无需手动编辑流水线 次版本号 +1 兼容式问题修正： 镜像功能兼容旧版本，仅做问题修正 此类型版本发布后，已使用该镜像且版本号选为[主版本.latest]的流水线自动使用新版本，无需手动编辑流水线 修正号 +1 验证镜像 提交发布后，可以在调试项目下验证镜像功能是否满足预期 测试：点击后跳转到调试项目的流水线服务下，可以使用此镜像执行流水线 Job，验证功能是否满足预期 若发现问题，重新推送镜像后，重新验证并测试 验证镜像步骤，仅校验镜像是否能成功拉取，功能是否正常还需要发布者自行测试 测试 OK 后，手动继续发布流程，将镜像发布到研发商店，供其他用户/项目使用 "},"store/plugins/":{"url":"store/plugins/","title":"流水线插件","keywords":"","body":"流水线插件 "},"store/plugins/create-plugin/":{"url":"store/plugins/create-plugin/","title":"开发一个流水线插件","keywords":"","body":"开发一个流水线插件 开发插件前，先进入插件工作台初始化一个插件，确定插件在平台中的唯一标识。 工作台 可以在这里进行新增/发布/下架等管理插件的操作 功能区介绍 切换资源类型 新增插件 单个插件的管理入口 升级、下架、删除插件快捷入口 指引文档和插件 UI 调试工具入口 新增插件 标识 插件在平台中的唯一标识，建议取和插件功能相关的可读性好的英文标识 调试项目 插件发布过程中，可以在调试项目下将插件添加到流水线执行，对插件进行测试，保证插件功能满足预期。 建议新增专用的插件调试项目，避免测试过程中影响到业务。 开发语言 支持四种语言开发插件： Java Python Golang Nodejs 开发插件 初始化好插件之后，可以开始开发插件 根据开发语言参考对应的开发指引 Java 插件开发指引 Python 插件开发指引 Golang 插件开发指引 Nodejs 插件开发指引 插件私有配置 插件级别的敏感信息，如 token、用户名密码、IP、域名等，不建议直接提交到代码库，通过工作台私有配置界面管理 入口如下，创建后，在插件中通过 SDK 提供的方法即可获取使用 接下来你可能需要 在 BKCI 里使用商店插件 "},"store/plugins/create-plugin/plugin-dev-guide/":{"url":"store/plugins/create-plugin/plugin-dev-guide/","title":"插件开发指引","keywords":"","body":"插件开发指引 本文档目的是介绍 bkci 流水线插件的原理，指引插件开发者快速上手插件开发和发布插件供流水线使用。 "},"store/plugins/create-plugin/plugin-dev-guide/java.html":{"url":"store/plugins/create-plugin/plugin-dev-guide/java.html","title":"Java 插件开发指引","keywords":"","body":"Java 插件开发指引 一、工程的整体结构如下 |- pipeline-plugin |- bksdk 插件sdk |- demo 插件样例，你可以把工程项目名和内部逻辑修改成你自定义的 二、如何开发插件 插件代码建议统一管理。通用的开源插件可以放到 ci-plugins 下 请参考 plugin-demo-java 三、如何打成研发商店要求的zip包： 1、进入pipeline-plugin目录下执行\"mvn clean package\"命令进行打包。 2、进入demo（插件逻辑所在的工程目录）目录下的target文件夹下就可以获取我们需要的zip包。 "},"store/plugins/create-plugin/plugin-dev-guide/python.html":{"url":"store/plugins/create-plugin/plugin-dev-guide/python.html","title":"Python 插件开发指引","keywords":"","body":"Python 插件开发指引 插件开发框架说明 开发者可以使用自己喜欢的框架开发，没有硬性要求 示例以源码发布包的方式来组织插件 优点：跨平台，包简单小巧 缺点：执行前需使用 pip 安装，当有其他第三方包依赖时，需能访问镜像源安装依赖包 一、插件代码工程的整体结构示例如下： |- ${你的插件标识} # 插件包名 |- ${你的插件标识} # 插件包名 |- __init__.py py # py包标识 |- command_line.py # 命令入口文件 |- python_atom_sdk # 插件开发SDK包 |- MANIFEST.in # 包文件类型申明 |- requirements.txt # 依赖申明 |- setup.py # 执行包打包配置 二、如何开发插件： 参考 plugin-demo-python 创建插件代码工程 插件代码建议统一管理。通用的开源插件可以放到 ci-plugins 下 修改包名为有辨识度的名称，建议可以和插件标识一致 实现插件功能 规范： 插件开发规范 插件输出规范 三、如何打包发布： 进入插件代码工程根目录下 执行打包命令打包 # 本示例以 setuptools 的 sdist 命令为例 python setup.py sdist 在任意位置新建文件夹，命名示例：release_pkg = ${你的插件标识}_release 将步骤 2 生产的执行包拷贝到 ${release_pkg} 下 添加 task.json 文件到 ${release_pkg} 下 task.json 见示例，按照插件功能配置。 插件配置规范 task.json示例： { \"atomCode\": \"demo\", \"execution\": { \"language\": \"python\", \"packagePath\": \"demo-1.1.0.tar.gz\", # 发布包中插件安装包的相对路径 \"demands\": [ \"pip install demo-1.1.0.tar.gz --upgrade\" # 执行 target 命令前需进行的操作，如安装依赖等 ], \"target\": \"demo\" }, \"input\": { \"inputDemo\":{ \"label\": \"输入示例\", \"type\": \"vuex-input\", \"placeholder\": \"输入示例\", \"desc\": \"输入示例\" } }, \"output\": { \"outputDemo\": { \"description\": \"输出示例\", \"type\": \"string\", \"isSensitive\": false } } } 在 ${release_pkg} 目录下，把所有文件打成 zip 包即可 zip 包结构示例： |- demo_release.zip # 发布包 |- demo-1.1.0.tar.gz # 插件执行包 |- task.json # 插件配置文件 打包完成后，在插件工作台提单发布，即可测试或发布插件 "},"store/plugins/create-plugin/plugin-dev-guide/golang.html":{"url":"store/plugins/create-plugin/plugin-dev-guide/golang.html","title":"Golang 插件开发指引","keywords":"","body":"Golang 插件开发指引 插件开发框架说明 插件最终打包成一个命令行可执行的命令即可，对开发框架无硬性要求 下边以 demo 插件为例示范 一、示例插件代码工程的整体结构如下： |- ${你的插件标识} |- cmd |- application |- main.go |- hello |- hello.go 二、如何开发插件： 参考 plugin-demo-golang 创建插件代码工程 插件代码建议统一管理。通用的开源插件可以放到 ci-plugins 下 实现插件功能 规范： 插件开发规范 插件输出规范 三、如何打包发布： 进入插件代码工程目录下 打包 cd cmd/application go build -o bin/${executable} 在任意位置新建文件夹，命名示例：release_pkg = ${你的插件标识}_release 将步骤 2 生产的执行包拷贝到 ${release_pkg} 下 添加 task.json 文件到 ${release_pkg} 下 task.json 见示例，按照插件功能配置。 插件配置规范 task.json示例： { \"atomCode\": \"demo\", \"execution\": { \"language\": \"golang\", \"packagePath\": \"app\", # 发布包中插件安装包的相对路径 \"demands\": [ \"\" # 插件启动前需要执行的安装命令，顺序执行 ], \"target\": \"./app\" }, \"input\": { \"inputDemo\":{ \"label\": \"输入示例\", \"type\": \"vuex-input\", \"placeholder\": \"输入示例\", \"desc\": \"输入示例\" } }, \"output\": { \"outputDemo\": { \"description\": \"输出示例\", \"type\": \"string\", \"isSensitive\": false } } } 在 ${release_pkg} 目录下，把所有文件打成 zip 包即可 zip 包结构示例： |- demo_release.zip # 发布包 |- app # 插件执行包 |- task.json # 插件配置文件 打包完成后，在插件工作台提单发布，即可测试或发布插件 "},"store/plugins/create-plugin/plugin-dev-guide/nodejs.html":{"url":"store/plugins/create-plugin/plugin-dev-guide/nodejs.html","title":"NodeJS 插件开发指引","keywords":"","body":"NodeJS 插件开发指引 插件开发框架说明 一、插件代码工程的整体结构如下： 二、如何开发插件： 参考 创建插件代码工程 插件代码建议统一管理。通用的开源插件可以放到 ci-plugins 下 修改包名为有辨识度的名称，建议可以和插件标识一致 实现插件功能 规范： 插件开发规范 插件输出规范 三、如何打包发布： 进入插件代码工程根目录下 执行打包命令打包 在任意位置新建文件夹，命名示例：release_pkg = ${你的插件标识}_release 将步骤 2 生产的执行包拷贝到 ${release_pkg} 下 添加 task.json 文件到 ${release_pkg} 下 task.json 见示例，按照插件功能配置。 插件配置规范 task.json示例： { \"atomCode\": \"demo\", \"execution\": { \"language\": \"nodejs\", \"packagePath\": \"\", # 发布包中插件安装包的相对路径 \"demands\": [ \"\" # 插件启动前需要执行的安装命令，顺序执行 ], \"target\": \"demo\" }, \"input\": { \"inputDemo\":{ \"label\": \"输入示例\", \"type\": \"vuex-input\", \"placeholder\": \"输入示例\", \"desc\": \"输入示例\" } }, \"output\": { \"outputDemo\": { \"description\": \"输出示例\", \"type\": \"string\", \"isSensitive\": false } } } 在 ${release_pkg} 目录下，把所有文件打成 zip 包即可 zip 包结构示例： |- demo_release.zip # 发布包 |- # 插件执行包 |- task.json # 插件配置文件 打包完成后，在插件工作台提单发布，即可测试或发布插件 "},"store/plugins/create-plugin/plugin-specification.html":{"url":"store/plugins/create-plugin/plugin-specification.html","title":"插件开发规范","keywords":"","body":"插件开发规范 插件定义规范 插件描述类基本信息通过线上流程定义 插件工作台新增插件时，可指定标识、名称、开发语言 标识、开发语言初始化之后不能再更改 上架/升级插件时，可更新插件基本信息，包括名称、分类、描述等信息 插件执行、输入、输出相关定义，通过插件代码库中名为 task.json 的文件定义 task.json 存储在插件代码库根路径下 详见插件配置规范 插件开发规范 插件封装为命令行可执行命令： 调起命令由task.json的 execution.target 字段指定 execution.target 格式为字符串 调起命令中可以使用 ${var_name} 的方式获取变量 若调起执行前需安装依赖，安装命令由 task.json 的 execution.demands 字段指定 execution.demands 为列表，可配置多个安装命令 安装命令可以使用 ${var_name} 的方式获取变量 插件输入字段值，从指定的输入文件中获取 输入信息文件名，由环境变量 bk_data_input 指定 输入信息文件存放路径，由环境变量 bk_data_dir 指定 输入信息文件内容为json，示例如下： { \"inputVar_1\": \"value1\", \"inputVar_2\": \"value2\" } 使用 SDK 进行开发时，无需关注输入文件位置和命名，使用 SDK 提供的方法获取输入即可 插件输出信息通过写文件的方式通知 bkci agent 输出信息文件名，由环境变量 bk_data_output 指定 输出信息文件存放路径，由环境变量 bk_data_dir 指定 输出信息文件格式，详见插件输出规范 使用 SDK 进行开发时，无需关注输出文件位置和名称，使用 SDK 提供的方法设置输出即可 插件执行结果将由两个策略判定： 若输出信息文件中指定了 status 字段，则以该字段值为准 若未指定输出信息文件，则以插件执行命令返回值为准 返回值为0，标识成功 返回值非0，标识失败 插件日志输出到控制台 bkci agent 将收集控制台日志（标准输出流、标准错误流）展示到流水线前台 插件级别的敏感信息管理 如账号密码等敏感数据，可以在插件设置→私有设置界面管理 平台将加密存储 插件中使用时，通过SDK提供的方法获取即可 插件错误码和错误分类 插件开发者需对导致插件执行失败的各种场景进行细分，使用错误码（errorCode）进行标识，并在插件日志、使用指引中给出详细的描述和解决方法，方便用户快速定位和解决问题 插件开发者需对导致插件执行失败的错误进行归类，指定错误类型 errorType，用于度量统计 插件代码库管理规范 插件代码建议统一管理，便于分享、交接和系统级别的管理。 企业内部按照企业代码管理方式，统一到一个group下管理 开源的通用插件，可以联系bkci客服，提交到bkci开源版插件组 ci-plugins 下 插件帮助文档（详细描述）规范 目的 方便用户了解插件工作原理和适用范围 方便用户遇到问题时自助获取解决方案 提供方式 发布插件时，填写在插件详细描述字段 将展示在研发商店查看插件详情界面，或执行日志查看帮助。 使用文档使用markdown语言撰写，建议包含如下内容： 1、插件介绍 简要说明插件功能 2、插件适用场景 详细描述插件适用场景 3、插件使用限制和受限解决方案 [可选]调用频率限制 [可选]并发限制 [可选]网络限制，说明网络要求，或者需申请的网络策略 [可选]若插件使用有权限控制（IP、用户等），需详细描述申请方式 4、插件常见的失败原因和解决方案 列举可能的失败原因、错误码，针对场景给出解决方案，方便用户快速解决问题 插件新增/发布流程 插件状态流转图 流程描述 开发者在插件工作台新增插件 初始化的目的是拿到系统中唯一的插件标识 开发者本地开发调试插件 开发者调试OK后，在插件工作台新增版本，启动发布流程 提交版本后： 进入测试阶段 开发者可以在新增插件时选择的调试项目下，创建测试流水线，判断插件是否符合预期 测试过程中，若发现问题，可修复代码bug后重新打成包，再重新传包后继续测试 测试OK后，开发者点【继续】确认，则成功发布版本到研发商店 "},"store/plugins/create-plugin/plugin-config.html":{"url":"store/plugins/create-plugin/plugin-config.html","title":"插件配置规范","keywords":"","body":"插件配置规范 一、说明 每个插件都有一个名为 task.json 的描述文件 输入字段、输出字段以及启动命令，均由开发者在 task.json 中描述 描述输入字段，目的是让用户在编排流水线时，可以配置自定义的参数值， 描述输出字段，目的是让用户在编排流水线时，了解插件输出，以便在下游步骤中使用 描述启动命令，目的是让 bkci 知道如何启动插件执行 描述文件（task.json）存放在插件代码库根目录下 描述文件（task.json）内容格式为json 二、task.json数据结构详解 整体结构如下 { \"atomCode\": \"\", # 插件唯一标识，由英文字母组成，与插件初始化时指定的标识一致 \"execution\": { # 执行命令入口相关 }, \"inputGroups\": [ # 输入字段分组，可选，设置后，可按组展示输入字段，支持按组展开收起 ], \"input\": { # 插件输入字段定义 }, \"output\": { # 插件输出字段定义 } } 各配置项详解 atomCode 插件唯一标识，由英文字母组成，与插件初始化时指定的标识一致 值格式为字符串 execution 执行命令入口相关配置 值格式为对象 值对象包括如下属性： 属性名 属性说明 格式 备注 packagePath 发布包中插件执行包的相对路径 字符串 必填，包括执行包包名，执行时，下载发布包解压后，将根据此项配置找到执行包 language 开发语言 字符串 必填，如python、java等，和插件初始化时指定的语言一致 demands 执行依赖 数组 非必填 target 执行入口 字符串 必填，一般为一个命令行可执行的命令 inputGroups 输入字段分组，可选，设置后，可按组展示输入字段，支持按组展开收起 值格式为数组 可设置多个分组，每个分组使用一个对象来描述，包括如下属性： 属性名 属性说明 格式 备注 name 分组名称 字符串 必填，配置在输入字段的groupName中，标识该字段属于哪个分组 label 分组标识 字符串 必填，用户直接看到的分组名称 isExpanded 是否展开 布尔 必填，是否默认展开分组 input 输入字段定义 值格式为对象 可配置一个或多个输入字段 每个输入字段的英文标识为key，value为对象 系统支持如下UI组件 组件type 组件名称 备注 执行时插件后台获取到的值说明 vuex-input 单行文本框 字符串 vuex-textarea 多行文本框 字符串 atom-ace-editor 代码编辑框 字符串 selector 下拉框 只能选择，不能输入 字符串 select-input 可输入下拉框 输入的值可以是下拉列表中没有的值（包括变量），选中后框里看到是的id 字符串 devops-select 可输入下拉框 输入的值只能是变量，选中后框里看到是name 字符串 atom-checkbox-list 复选框列表 字符串，如：[ \"id1\", \"id2\" ] atom-checkbox 复选框（布尔） 字符串 enum-input 单选 字符串 cron-timer 时间选择器 字符串 time-picker 日期选择器 字符串 user-input 人名选择器 字符串 tips 提示信息 支持动态预览用户输入的参数，支持超链接 字符串 parameter 不定参数列表 参数列表支持从接口获取 字符串 dynamic-parameter 不定参数列表 支持从接口获取，支持每行多列，支持动态增删 字符串 若以上组件不满足需求，请联系 bkci 客服。 每个输入字段配置支持如下公共属性 属性名 属性说明 配置格式 备注 label 中文名 字符串 用于展示，允许为空（与其他字段组合的场景） type 组件类型 字符串 必填，平台提供常用的输入组件，根据不同组件有不同展现 default 默认值 根据不同组件默认值格式不一样 非必填 placeholder placeholder 字符串 非必填 groupName 所属组 字符串 非必填，inputGroups 中定义的 name desc 字段说明 字符串 非必填，字段说明，支持\\r\\n换行 required 是否必填 布尔 非必填 disabled 是否可编辑 布尔 非必填 hidden 是否隐藏 布尔 非必填 isSensitive 是否敏感 布尔 非必填，敏感信息在日志中不会展示明文 rely 根据条件显示/隐藏当前字段 对象 非必填 针对不同type的组件，有个性化的属性 1、单行文本框：type=vuex-input 组件属性： inputType：当输入的字符串希望展示成******方式时使用，值为 password 示例： 配置 \"fieldName\": { \"label\": \"密码输入框\", \"type\": \"vuex-input\", \"inputType\": \"password\", \"desc\": \"XXX\" } 2、复选框（布尔）：type = atom-checkbox 组件属性： text：此时label可设置为空，对应值为true/false 示例： 配置 \"fieldName\": { \"label\": \"\", \"default\": true, \"type\": \"atom-checkbox\", \"text\": \"是否需要Rebuild\", \"desc\": \"XXX\" } 3、下拉框/可输入下拉框：type = selector/select-input/devops-select 组件属性： optionsConf：下拉框属性配置 \"optionsConf\": { # type=selector/select-input/devops-select组件配置 \"searchable\": false, # 是否可搜索 \"multiple\": false, # 是否为多选 \"url\": \"\", # bkci 服务链接，或者接入蓝鲸网关的API链接 链接中支持变量，使用{变量名}的方式引用，可以是当前task.json中的字段，也可以是几个内置变量，如projectId、pipelineId、buildId \"dataPath\": \"\", # 选项列表数据所在的、API返回体json中的路径，没有此字段则默认为data， 示例：data.detail.list。配合url使用 \"paramId\": \"\", # url返回规范中，用于下拉列表选项key的字段名，配合url使用 \"paramName\": \"\", # url返回规范中，用于下拉列表选项label的字段名，配合url使用 \"hasAddItem\": true, # 是否有新增按钮（只在type=selector时生效） \"itemText\": \"文案\", # 新增按钮文字描述（只在type=selector时生效） \"itemTargetUrl\": \"跳转url\" # 点击新增按钮的跳转地址（只在type=selector时生效） } bkci服务链接，可以使用浏览器开发者助手抓取，常用的链接如下： 凭证： /ticket/api/user/credentials/{projectId}/hasPermissionList?permission=USE&page=1&pageSize=100&credentialTypes=USERNAME_PASSWORD credentialTypes 取值参见CredentialType 代码库：/repository/api/user/repositories/{projectId}/hasPermissionList?permission=USE&repositoryType=CODE_GIT&page=1&pageSize=5000 repositoryType 取值参见ScmType 节点：/environment/api/user/envnode/{projectId}/listUsableServerNodes?page=1&pageSize=100 options：下拉框列表项定义 \"options\": [ # type=selector/select-input组件选项列表 { \"id\": \"\", # 选项ID \"name\": \"\", # 选项名称 \"desc\": \"\", # 选项说明 \"disabled\": false # 是否可选 } ] 4、单选： type = enum-input 组件属性： list \"list\": [ # type=enum-input组件选项列表 { \"label\": \"\", \"value\": \"\" } ] 5、日期选择器：type=time-picker 组件属性： startDate：时间戳，毫秒，开始日期 endDate：时间戳，毫秒，结束日期 showTime：布尔，是否显示时间 6、提示信息：tips 组件属性： tipStr：提示信息内容模版 支持{}引用当前插件的其他变量 支持插入超链接 示例： 配置示例： \"tipTest\": { \"label\": \"\", \"type\": \"tips\", \"tipStr\": \"这是个XXX系统，欢迎体验。[点击查看](http://www.baidu.com)\" } 7、不定参数列表：parameter 组件属性： paramType：数据从链接动态获取或者从定义列表中获取，可选值为：url、list url：paramType=url时配置链接 urlQuery: 值为对象，url的参数设置 如：{\"param1\": \"\",\"param2\": \"\"} param1、param2可以是当前插件的其他参数，执行时会自动替换值 parameters：参数列表，可定义一个或多个参数 每个参数包含如下属性 | 属性名 | 属性说明 | 格式 | 备注 | | :--- | :--- | :--- | :--- | | id | 该行唯一标识 | 字符串 | 该行唯一标识 | | key | key的值 | 字符串 | 该行参数的key | | keyType | key的类型 | 字符串 | 可选值为input、select | | keyListType | key数据源类型 | 字符串 | keyType=select时有效，可选值为url、list | | keyUrl | | 字符串 | keyListType=url时生效 | | keyList | | 列表 | keyListType=list时生效， 示例： [ { id: 'id', name: 'name' } ]， id为key的具体值 | | keyDisable | 是否可编辑 | 布尔 | true、false | | keyMultiple | 是否可多选 | 布尔 | true、false | | value | value的值 | 字符串 | 该行参数的value | | valueType | value的类型 | 字符串 | 可选值为input、select | | valueListType | value数据源类型 | 字符串 | valueType=select时有效，可选值为url、list | | valueUrl | | 字符串 | valueListType=url时生效 | | valueList | | 列表 | valueListType=list时生效， 示例： [ { id: 'id', name: 'name' } ]， id为value的具体值 | | valueDisable | 是否可编辑 | 布尔 | true、false | | valueMultiple | 是否可多选 | 布尔 | true、false | 8、复选框列表： type=atom-checkbox-list 组件属性： list \"list\":[ { \"id\":\"php\" \"name\":\"php\" \"disabled\":true \"desc\":\"php是世界上最好的语言\" }] 9、代码编辑框：atom-ace-editor 组件属性： bashConf lang \"bashConf\": { \"url\": \"XXX\", # 已接入蓝鲸网关的第三方链接 \"dataPath\": \"\" # 如 data.name }, \"lang\": \"sh\" # 目前支持高亮语法 json|python|sh|text|powershell|batchfile 10、人名选择器：user-input 组件属性： inputType：可输入的数据类型，可选值为email 、rtx 、all \"receiver2\": { \"label\": \"收件人,支持邮件组\", \"type\": \"company-staff-input\", \"inputType\": \"all\", \"desc\": \"可以填写公司任意用户，包括邮件组\" } 11、动态参数组件：dynamic-parameter 组件属性 \"params\":{ \"label\": \"动态参数\", \"type\": \"dynamic-parameter\", \"required\": false, \"desc\": \"动态参数组件\", \"param\": { \"paramType\": \"url\", // parameters是从url获取还是直接取列表的值，可以是url或者list \"url\": \"XXXX\", // paramType是url的时候从接口取值，url中的{test}可被替换为当前插件中的值或浏览器url中的参数 \"dataPath\": \"\", // 接口返回值，取数的路径，默认为 data.records \"parameters\": [ // paramType是list的时候从这里取值 { \"id\": \"parameterId\", //该行的唯一标识，必填 \"paramModels\": [ { \"id\": \"233\", // 该模型的唯一标识，必填 \"label\": \"testLabel\", \"type\": \"input\", // 可以是input或者select \"listType\": \"url\", // 获取列表方式，可以是url或者list \"isMultiple\": false, // select是否多选 \"list\": [ { \"id\": \"id\", \"name\": \"name\" } ], // type是select起作用，需要有id和name字段 \"url\": '', // type是select且listType是url起作用 \"dataPath\": \"\", // 接口返回值，取数的路径，默认为 data.records \"disabled\": false, // 控制是否可编辑 \"value\": \"abc=\" // 值，可做为初始化的默认值 } ] } ] } } 执行时传给插件后台的数据示例： [{\"id\":\"parameterId\",\"values\":[{\"id\":123,\"value\":\"3d029fbe08c011e99792fa163e50f2b5,${abc}\"},{\"id\":1233,\"value\":\"ab\"},{\"id\":1235,\"value\":\"id\"}]}] 支持的特性 根据条件显示/隐藏当前字段 配置示例： \"rely\": { # 根据条件显示/隐藏当前字段配置 \"operation\": \"AND\", # 多条件间与/或，可选项： AND/OR \"expression\": [ # 条件list { \"key\": \"\", # 条件字段名 \"value\": Any # 条件字段值 } ] } output 输出字段定义 值格式为对象 可配置一个或多个输出字段 每个输出字段的英文标识为key，value为对象 每个输出字段定义包含如下属性： 属性名 属性说明 格式 备注 type 输出字段的类型 字符串 必填。支持如下三类： string：字符串 artifact：产出文件，系统将自动归档到仓库 report: 自定义报告html，系统将自动存储，渲染在产出物报告界面 description 描述 字符串 非必填，说明 isSensitive 是否敏感 布尔 非必填，是否为敏感信息 三、 输入组件配置示例 vuex-input \"fieldName\": { \"label\": \"版本号\", \"type\": \"vuex-input\", \"desc\": \"三级版本号，例：1.0.1\", \"required\": true } 人名选择器 \"fieldName\": { \"label\": \"收件人\", \"type\": \"user-input\", \"desc\": \"只能填写当前项目成员\" } atom-checkbox \"fieldName\": { \"label\": \"\", \"type\": \"atom-checkbox\", \"text\": \"是否需要Rebuild\", \"desc\": \"XXX\" } selector/select-input/devops-select 选项列表在task.json中配置 \"fieldName\":{ \"label\": \"输入字段名\", \"type\": \"selector\", \"options\":[ { \"id\":\"video\", \"name\":\"视频\" }, { \"id\":\"website\", \"name\":\"网站\" } ] } 选项列表从接口获取 配置规范： 由optionsConf的url、paramId、paramName、dataPath来指定 \"optionsConf\": { \"url\": \"\", # 获取选项列表数据的API链接 \"dataPath\": \"\", # 选项列表数据所在的、API返回体json中的路径，没有此字段则默认为data， 示例：data.detail.list \"paramId\": \"\", # 每个选项数据的id字段名 \"paramName\": \"\" # 每个选项数据的name字段名 } url支持两类： bkci 内置的服务 接入蓝鲸网关的第三方API url返回规范： 返回json格式数据 status：操作是否成功， 0 成功，非0 失败 data：选项列表数据。支持指定所在路径，如data.detail.list data中的选项ID和选项名称字段命名不强制，和配置中的paramId、paramName对应即可 message：当status非0时，错误信息 { \"status\": 0, \"data\": [ { \"optionId\": \"\", \"optionName\": \"\" } ] } 配置示例 \"fieldName\":{ \"label\": \"输入字段名\", \"type\": \"selector\", \"optionsConf\": { \"url\": \"http://xxx-test.com/prod/testnet\", \"paramId\": \"optionId\", \"paramName\": \"optionName\" } } atom-checkbox-list 复选框列表 \"fieldName\":{ \"label\": \"复选框列表\", \"type\": \"atom-checkbox-list\", \"list\": [ { \"id\": \"php\", \"name\": \"php\", \"disabled\": true, \"desc\": \"php是世界上最好的语言\" }, { \"id\": \"python\", \"name\": \"python\", \"disabled\": false, \"desc\": \"python是世界上最好的语言\" } ] } time-picker 日期选择器 \"fieldName\":{ \"label\": \"日期选择\", \"type\": \"time-picker\", \"startDate\": 1559555765, \"endDate\": 1577894399000, \"showTime\": false } tips 提示信息 \"tipTest\": { \"label\": \"\", \"type\": \"tips\", \"tipStr\": \"这是个XXX系统，欢迎体验。[点击查看](http://www.baidu.com)\" } parameter 不定参数列表 \"params\":{ \"label\": \"子流水线参数\", \"type\": \"parameter\", \"required\": false, \"desc\": \"带入子流水线的运行参数\", \"param\": { \"paramType\": \"url\", // parameters是从url获取还是直接取列表的值，可以是url或者list \"url\": \"XXXX\", // paramType是url的时候从接口取值 \"urlQuery\":{ \"projectId\": \"\",\"subPip\": \"\" }, \"parameters\": [ // paramType是list的时候从这里取值 { \"id\": \"parameterId\", // 该行的唯一标识 \"key\": \"abc\", \"keyDisable\": false, // 控制是否可编辑 \"keyType\": \"input\", // 可以是input或者select \"keyListType\": \"url\", // 获取列表方式，可以是url或者list \"keyUrl\": \"\", // type是select起作用 \"keyList\": [ { \"id\": \"id\", \"name\": \"name\" } ], // type是select起作用，需要有id和name字段 \"keyMultiple\": false, // select是否多选 \"value\": \"ddd\", \"valueDisable\": false, \"valueType\": \"input\", // 可以是input或者select \"valueListType\": \"url\", // 获取列表方式，可以是url或者list \"valueUrl\": \"\", // type是select起作用 \"valueList\": [ { \"id\": \"id\", \"name\": \"name\" } ], // type是select起作用 \"valueMultiple: false // select是否多选 } ] } } enum-input 单选radio \"fieldName_1\":{ \"label\": \"radio\", \"type\": \"enum-input\", \"list\": [ { \"value\": \"php\", \"label\": \"php\" }, { \"value\": \"python\", \"label\": \"python\" } ] } 四、字段根据条件显示/隐藏配置 由输入字段定义中的rely属性来指定，rely有两个属性： operation：多条件之间的关系，与、或、非 expression：条件表达式 operation 字段支持三个值： AND OR NOT 支持完全匹配，此时expression属性为： key：字段英文名 value：字段值 支持正则，此时expression属性为： key：字段英文名 regex： 正则表达式 示例： 当字段inputField_1值为true，且inputField_2值以.apk结尾时显示当前字段，否则隐藏当前字段 \"fieldName\":{ ... \"rely\": { \"operation\": \"AND\", \"expression\": [ { \"key\": \"inputField_1\", \"value\": true }, { \"key\": \"inputField_2\", \"regex\": \".*\\\\.apk$\" } ] } ... } "},"store/plugins/create-plugin/plugin-output.html":{"url":"store/plugins/create-plugin/plugin-output.html","title":"插件输出规范","keywords":"","body":"插件输出规范 插件执行完毕后，支持输出变量传递给流水线下游步骤使用，或者归档文件到仓库、归档报告到产出物报告 输出信息由写文件的方式指定，文件路径和名称由系统定义的环境变量指定 输出信息格式详细说明如下： { \"status\": \"\", # 插件执行结果，值可以为success、failure \"message\": \"\", # 插件执行结果说明，支持markdown格式 \"errorType\": 3, # 插件错误类型，int, 1表示是用户用法（参数不合法等等），2表示依赖的第三方平台问题，3表示是插件逻辑问题 \"errorCode\": 0, # 插件错误码，int，用于后续根据错误码分析插件质量 \"type\": \"default\", # 产出数据模板类型，用于规定产出数据的解析入库方式。目前支持default \"data\": { # default模板的数据格式如下所示，各输出字段应先在task.json中定义 \"outVar_1\": { \"type\": \"string\", \"value\": \"testaaaaa\" }, \"outVar_2\": { \"type\": \"artifact\", \"value\": [\"file_path_1\", \"file_path_2\"] # 文件绝对路径，指定后，agent自动将这些文件归档到仓库 }, \"outVar_3\": { \"type\": \"report\", \"reportType\": \"\", # 报告类型 INTERNAL 内置报告， THIRDPARTY 第三方链接， 默认为INTERNAL \"label\": \"\", # 报告别名，用于产出物报告界面标识当前报告 \"path\": \"\", # reportType=INTERNAL时，报告目录所在绝对路径。注意规划报告路径，目录下的所有内容将视为报告关联文件一起存档 \"target\": \"\", # reportType=INTERNAL时，报告入口文件名称 \"url\": \"\" # reportType=THIRDPARTY时，报告链接，当报告可以通过url访问时使用 } } } 产出data中的数据类型支持三类： string：字符串 长度不能超过4k字符 artifact：构件 支持多个构件 每个构件指定本地绝对路径 report：报告 报告有两种类型：内置报告、第三方链接 报告文件不建议直接放在根目录下，如果根目录下其他文件，如代码库之类的，会把所有文件都当作报告的相关文件上传。 建议创建个目录来存，比如，path=${WORKSPACE}/report， target=result_report.html "},"store/plugins/create-plugin/plugin-error-code.html":{"url":"store/plugins/create-plugin/plugin-error-code.html","title":"插件错误码规范","keywords":"","body":"插件错误码规范 总体要求 插件开发者需对导致插件执行失败的各种场景进行细分，使用错误码（errorCode）进行标识，并在插件日志、使用指引中给出详细的描述和解决方法，方便用户快速定位和解决问题 插件开发者需对导致插件执行失败的错误进行归类，指定错误类型 errorType，用于度量统计 错误类型和错误码规范 1 插件错误类型（errorType） 通过插件结果中的 errorType 字段上报： 错误类型 取值 含义 详细说明 USER 1 用户配置错误 用户在流水线配置的插件参数有误，或是用户业务逻辑出错 THIRD_PARTY 2 第三方系统错误 非 bkci 的其他平台接口调用出错，如：第三方镜像平台接口错误、作业平台接口错误、织云上传接口请求失败等 PLUGIN 3 插件执行错误（默认） 插件执行逻辑出错，需开发者跟进和修复，插件开发者有义务将PLUGIN错误细分为其他类型 注：插件SDK只提供1-3的传值枚举，插件结果内未指定或指定1-3以外的值，则错误类型取值为3（插件执行错误） 2 插件错误码（errorCode） 通过插件结果中的 errorCode 字段上报： 取值 含义 详细说明 2199001 默认错误码 插件开发者未指定错误码时将使用 bkci 平台规范的插件默认错误码 自定义 插件开发者定义的错误码 插件开发者按所处团队/平台使用的规范定义，可用于后期插件/构建的数据度量 注：插件错误码有助于开发者定义完整的、成体系的错误信息，方便问题定位和报表生成 "},"store/plugins/create-plugin/release.html":{"url":"store/plugins/create-plugin/release.html","title":"插件发布规范","keywords":"","body":"插件发布规范 发布包规范 发布包格式为 zip 文件 发布包中包含： [必选] 插件可执行文件 [必选] task.json [可选] frontend 目录 目录下为自定义UI 相关文件 版本管理规范 版本号管理遵循 语义化版本 规范 用户在流水线中可通过 [主版本号.latest] 的模式引用插件，自动使用指定主版本号下的最新版本。请按照规范升级插件。 "},"store/plugins/create-plugin/plugin-custom-ui.html":{"url":"store/plugins/create-plugin/plugin-custom-ui.html","title":"插件自定义UI","keywords":"","body":"插件自定义UI 自定义插件前端框架 随着越来越多的用户使用研发商店开发流水线插件，用户对组件及交互场景的要求越来越高。由于大部分个性用户提的组件和交互场景不具有通用性，平台无法一一封装，因此设计开发了一套由用户自定义开发插件前端部分的框架。框架将插件的前端部分开放给用户自定义开发，适用于实现复杂交互场景的插件前端部分。 原理简介 将流水线编辑插件面板划分出一块区域以iframe的形式加载，iframe的内容由用户自定义实现。 点开插件时，平台上层会把插件的 atomValue 和 atomModel 通过 postMessage 的方式传递给 iframe，iframe 内部拿到 atomModel 和 atomValue 后即可以自定义实现插件部分。 当用户输入相应参数后，把值更新到 atomValue 即可，插件面板在关闭时会自动把 atomValue 的值传回给平台上层保存。 对于vue开发者，我们封装了一个基于 vue、集成了蓝鲸 magixbox 组件库、bkci 业务组件、bkci 插件能力的脚手架，并封装了与平台上层通信的 api，使开发者可以只专注于处理的业务逻辑部分。 框架目录结构介绍 插件代码库根目录下的 bk-frontend 目录为前端代码根目录。其下代码结构如下： 开发步骤 1、研发商店在新增件时，自定义插件前端部分选项选择“是” 2、运行： 代码根目录下创建 bk-frontend 目录 进到 bk-frontend 目录下 将框架代码 bkci-customAtom-frontend 拷贝到当前目录下 执行 npm install 执行 npm run dev 此时打开浏览器打开 http://localhost:8001, 即可看到我们内置的简单demo工程的效果 3、开发： 配置 bk-frontend/data 目录下的task.json 在 Atom.vue 里开发插件业务逻辑（具体开发注意事项见下面插件业务逻辑开发介绍） 4、本地调试ok后： 把 bk-frontend/data 目录下的 task.json 里的内容复制到根目录下的 task.json Atom.vue (用户插件逻辑部分开发注意事项) 用户在 Atom.vue 中开发插件时，需先引用 atomMixin，atomMixin 内置了平台上层通信的能力和交互api import { atomMixin }from 'bkci-atom-components' mixins: [atomMixin], 引用 atomMixin.js 后，data 里已经内置了atomValue 和 atomModel 两个变量（说明如下）： atomModel: 即 task.json 的 input 部分，在自定义插件框架下，可以把 task.json 的 input 部分理解 vue 文件里的 data 变量。 把一些配置放到 task.json 时，可以直接在 atomModel 变量里面取到，可以使 vue 文件更简洁好维护。 atomValue： 需要提交到平台上层，保存到后端插件执行时所用的值，格式如： { \"item1\": \"111\", \"item2\": \"222\" } 当用户修改相应参数后，把值更新到 atomValue 即可，插件面板在关闭时会自动把 atomValue 的值传回给上层保存 本地调试 框架提供了本地调试模块，用户可在本地调试好前端部分再提交 package.json 提供了两个打包命令 npm run dev : 本地运行调试此工程，运行此命令时，程序的执行路径大致是 main.js -> data/LocalAtom.vue -> Atom.vue npm run public：本地开发完成后，准备发布包时执行此命令, main.js -> data/PublicAtom.vue -> Atom.vue 本地开发时，用户把 task.json 的内容放到 data/task.json下，则运行npm run dev后，框架会读取 data/task.json 里的 input 作为 atomModel，提取每个字段的 default 值作为 atomValue 里对应的默认值 线上运行时，atomModel 和 atomValue 的值由平台上层传递到iframe内部 用户在本地运行时调试正常，上线后在平台插件面板点开效果是一样的 发布 插件调试好之后，通过研发商店工作台进行发布，发布包准备过程如下： 执行 npm run public 打包 在发布包根目录下创建名为 frontend 的目录 插件发布规范 将打包结果文件( dist 目录下的所有文件)拷贝到 frontend 目录下 将发布包根目录下的所有文件打成 zip 文件，通过工作台上传到商店 常见问题 1、框架内置的 bkci 组件库和 magixbox 组件库怎么使用？ bkci 组件库： task.json 可以配的组件也都可以直接以组件的形式使用，组件的属性即为 task.json 可配置的属性（点击查看），bkci 组件库的值变更事件统一封装为 :handle-change=\"functionxxx\", 其中 functionxxx 有两个参数，一个是组件的 name，一个是组件的新 value 蓝鲸magixbox组件库种类丰富，基本能覆盖日常开发所需的组件类型，框架内可以直接使用 magixbox 组件库进行开发，具体使用请查看官方文档 2、本地调试时，我需要结合某个具体项目，如使用 selector 组件拉取某某项目的代码库列表、凭证列表，怎么把项目信息带过来？ 在访问的 url 后面通过 query 方式传递 projectId=${projectId} 即可，如 http://local.XX.com:8001?projectId=abc, bkci 内置的 selector/select-input 组件会自动解析 url 里面的 projectId参数作为请求的参数 3、使用自定义插件框架开发后，task.json 还有用吗？两者关系是什么？ 一定程度上来讲，使用自定义框架后，即使 task.json 里面的 input 内容为空，自定义框架也可以正常运行，但我们还是建议用户配置 task.json 的 input 部分，input 部分里的内容都会以通过 atomModel 变量传到iframe 中，可以使代码更简洁，提前定义好插件所需字段，也方便后端做一些检验和拓展，另一方面之前用惯了task.json 直接生成的用户，也可以参照 demo 内的写法，直接以高阶组件遍历的形式完成字段的渲染，task.json 里面配置的 rely 等交互能力也可以在引用了atomMixin 后直接使用 4、代码仓库根目录下有一个 task.json，bk-frontend/data 目录下也有一个 task.json，两者关系是什么, 为什么不统一成一个? 两个 task.json 的规范，配置方式一样，bk-frontend/data 下的 task.json 为本地调试时的数据源，本地调试时 atomModel 的值即为里面的 input 部分，根目录下的 task.json 为线上运行时 atomModel 的数据源，同时若插件里面还有 output 部分，可以在根目录下的 task.json 加上，即开发调试阶段，先在bk-frontend/data 写配置 task.json，上线提交前再把 bk-frontend/data 里 task.json 里的内容复制到根目录下的 task.json 即可（如果output部分，再单独加上） 5、 插件开发过程中，如果存在字段校验的情形，怎么和平台上层交互？ 当引用了 atomMixin 后，框架内置封装好了与上层插件状态通信的 api，当用户填写的参数非法时，调用 this.setAtomIsError(true)，可将该插件框标红，此时流水线无法保存，当用户填写了合法的参数后，调用 this.setAtomIsError(false)，将状态重置回正常 "},"store/plugins/upload-plugin.html":{"url":"store/plugins/upload-plugin.html","title":"在 BKCI 里使用商店插件","keywords":"","body":"在 BKCI 里使用商店插件 开发好插件之后，通过研发商店工作台，将插件发布到研发商店，提供给用户添加到流水线中使用。 入口 在工作台列表，点击如下入口发起发布流程： 首次发布时，入口名为“上架” 升级版本时，入口名为“升级” 或者在插件发布管理->版本管理界面发起发布流程： 当前版本不是结束态时，这里可能的操作是： 上架：首版本进入上架流程 进度：进入发布流程页面 最新版本是结束态时，才可以新增新版本 填写插件相关信息/上传插件发布包 上架/升级插件时，可以修改插件的基本信息，如下所示： 适用 Job 类型： 和流水线 Job 类型对应，请按照插件实际适用情况选择 若选错，需新增版本修改 发布包： task.json 中的 atomCode 需和开发一个流水线插件中新增插件时填写的标识一致，否则上传会失败 当升级插件时，有三种升级模式： 非兼容式升级： 插件输入、输出不同或者相同输入输出但功能逻辑发生重大变更，和老版本不兼容时使用 此类型版本发布后，已使用该插件的流水线不会自动升级版本，需用户手动修改版本号 主版本号 +1 兼容式功能更新： 插件输入输出兼容旧版本，仅功能更新或新增(不影响已使用用户)时使用 此类型版本发布后，已使用该插件且版本号选为[主版本.latest]的流水线自动使用新版本插件，无需手动编辑流水线 次版本号 +1 兼容式问题修正： 插件输入输出兼容旧版本，仅做问题修正 此类型版本发布后，已使用该插件且版本号选为[主版本.latest]的流水线自动使用新版本插件，无需手动编辑流水线 修正号 +1 测试/发布插件 填写好信息，提交后，进入发布流程，可以测试->重新传包->测试，直至插件满足预期后，手动继续流程将插件发布到研发商店 测试：点击后跳转到插件调试项目的流水线服务下，可以将当前插件添加到流水线，验证 UI、功能是否满足预期 重新传包：当测试发现问题，修复后，重新上传发布包，再次进行测试 继续：测试 OK，满足预期后，确认提交发布 取消发布：发布过程中，随时可以终止发布 注意：当插件开发语言为 Python、Nodejs 时，对插件执行环境有一定要求，请参考第三方构建机环境准备 "},"contribute/architecture.html":{"url":"contribute/architecture.html","title":"BKCI 架构","keywords":"","body":"BKCI 架构 "},"contribute/code-framework.html":{"url":"contribute/code-framework.html","title":"BKCI 代码结构","keywords":"","body":"BKCI 代码结构 "},"contribute/design.html":{"url":"contribute/design.html","title":"设计理念","keywords":"","body":"设计理念 "},"contribute/document.html":{"url":"contribute/document.html","title":"文档共建","keywords":"","body":"Contributing to bkci document 我们在编写的过程中，难免会有不完善的地方，希望请大家一起帮助我们持续改进文档的质量，帮助更多的人。 方法 在 GitHub 上提 Issue 或 Pull Request，地址为: https://github.com/ci-plugins/document 文档规范 文档采用markdown语法编写 图片需统一放置在.gitbook/assets下，图片名称不得与已有图片重名 图片名称仅允许大小写字母、数字、-、_ 共建者可以对master分支发起PR，管理员会对PR进行审核 文档共建流程 1. Fork repository 首先得拥有github账号，并登录，访问https://github.com/ci-plugins/document，fork到自己的github账号下 2. Clone 克隆仓库之前，先保证自己fork出来的仓库是否和源仓库保持一致，如果落后于源仓库，可考虑先Fetch Upstream，参考步骤4 git clone https://github.com/xxxx/document 3. Change & Commit cd /path/to/document git config user.name \"${你的github用户名}\" git config user.mail \"${你的邮箱}\" git checkout -b dev origin/dev echo \"add xxx\" > xxx.md git commit -m \"add xxx\" 4. Fetch upstream 在将commit提交到自己的仓库前，查看自己fork出来的代码是否落后于源仓库代码，如果落后，先操作Fetch upstream，将源仓库代码的更新下同步到自己仓库。compare查看代码差异，Fetch and merge将源仓库代码合并到自己仓库 除了在页面上同步最新代码外，还可以在本地仓库里同步最新代码 git remote add upstream-repo https://github.com/ci-plugins/document git pull upstream-repo dev:dev # 如果有冲突无法合并，请自行解决冲突并合并 5. Git pull 更新本地代码 git pull origin dev:dev # 如果有冲突无法合并，请自行解决冲突并合并 6. Git push git push origin dev:dev 7. Pull request 发起PR，请求合并到源仓库dev分支，等待管理员审核通过 "},"reference/rest-api/":{"url":"reference/rest-api/","title":"REST API","keywords":"","body":"REST API "},"reference/rest-api/read-before-use.html":{"url":"reference/rest-api/read-before-use.html","title":"使用前必读","keywords":"","body":"使用前必读 返回值 返回值 涵义 200 OK 操作成功 201 Created 创建成功 400 Bad Request 参数错误，或是参数格式错误 401 Unauthorized 认证失败 403 Forbidden 帐号并没有该操作的权限或者项目设置不允许该操作 404 Not Found 资源不存在，也可能是帐号没有该项目的权限（为防止黑客撞库获取库列表） 405 Method Not Allowed 没有该接口 409 Conflict 与已存在的对象/内容冲突或者操作行为与规则相冲突 422 Unprocessable 操作不能进行 423 Locked 帐号被锁定，或api请求频率超限 429 Too Many Requests 请求被限流 500 Server Error 服务器出错 认证方式 每个API调用都需要认证，请在query参数中携带access_token，access_token通过调用/ms/auth/api/user/token/get接口获取，返回示例如下。 { \"userId\" : \"testUserId\", \"expirationTime\" : 1630565380912, \"accessToken\" : \"PryTxowDezaM6u1QE1KDeZXiDH%2Bayb%2BabHZHOYLR8%2B8Md9QhAXrUrs2z3U4%2FZ3p9CvP4ObZjZJJ2VdNWQqgX3qeQ1TBK7ADhNXRVWn4q2Q0%3D\" } TOKEN请求示例： GET https://{域名/ip}/ms/auth/api/user/token/get 若出现： {\"status\": 401,\"data\": \"\",\"result\":true,\"message\": \"用户权限验证失败。\"} 请先登录bk-ci API请求示例： GET https://{域名/ip}/ms/openapi/api/apigw/v3/projects?access_token=PryTxowDezaM6u1QE1KDeZXiDH%2Bayb%2BabHZHOYLR8%2B8Md9QhAXrUrs2z3U4%2FZ3p9CvP4ObZjZJJ2VdNWQqgX3qeQ1TBK7ADhNXRVWn4q2Q0%3D 1)若出现： Verification failed : token过期错误: Access token expired in: 1630919127633 因access_token已过期，请重新生成。 2)若出现： Request accessToken is empty. 请检查是否在query参数中携带access_token 3)若出现： verification failed : token参数非法错误: Access token illegal 请检查access_token是否输入正确 "},"reference/rest-api/project-template-resources/":{"url":"reference/rest-api/project-template-resources/","title":"OPENAPI-项目模板资源","keywords":"","body":"OPENAPI-项目模板资源 "},"reference/rest-api/project-template-resources/batch-update-pipeline-template-example.html":{"url":"reference/rest-api/project-template-resources/batch-update-pipeline-template-example.html","title":"批量更新流水线模板实例","keywords":"","body":"批量更新流水线模板实例 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId}/templateInstances 资源描述 批量更新流水线模板实例 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 version integer 是 版本名 useTemplateSettings boolean 否 是否应用模板设置 Body参数 参数名称 参数类型 必须 参数说明 默认值 body arrayTemplateInstanceUpdate> 是 模板实例 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation TemplateOperationRet 请求样例 curl -X PUT '[请替换为API地址栏请求地址]?version={version}&amp;useTemplateSettings={useTemplateSettings}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"failurePipelines\" : \"string\", \"failureMessages\" : { \"string\" : \"string\" }, \"successPipelinesId\" : \"string\", \"successPipelines\" : \"string\" }, \"message\" : \"String\", \"status\" : 0 } TemplateInstanceUpdate 参数名称 参数类型 必须 参数说明 pipelineName string 否 pipelineName param List构建模型-表单元素属性> 否 param buildNo BuildNo 否 buildNo pipelineId string 否 pipelineId 构建模型-表单元素属性 参数名称 参数类型 必须 参数说明 defaultValue object 是 默认值 containerType BuildContainerType 否 构建机类型下拉 glob string 否 自定义仓库通配符 replaceKey string 否 替换搜索url中的搜素关键字 readOnly boolean 否 是否只读 label string 否 元素标签 type ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 是 元素类型 required boolean 是 是否必须 repoHashId string 否 repoHashId scmType ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 否 代码库类型下拉 relativePath string 否 relativePath propertyType string 否 元素模块 options List构建模型-下拉框表单元素值> 否 下拉框列表 searchUrl string 否 搜索url, 当是下拉框选项时，列表值从url获取不再从option获取 id string 是 元素ID-标识符 placeholder string 否 元素placeholder properties object 否 文件元数据 desc string 否 描述 BuildContainerType 参数名称 参数类型 必须 参数说明 os ENUM(MACOS, WINDOWS, LINUX, ) 否 os buildType ENUM(ESXi, MACOS, DOCKER, IDC, PUBLIC_DEVCLOUD, TSTACK, THIRD_PARTY_AGENT_ID, THIRD_PARTY_AGENT_ENV, THIRD_PARTY_PCG, THIRD_PARTY_DEVCLOUD, GIT_CI, AGENT_LESS, ) 否 buildType 构建模型-下拉框表单元素值 参数名称 参数类型 必须 参数说明 value string 是 元素值名称-显示用 key string 是 元素值ID-标识符 BuildNo 参数名称 参数类型 必须 参数说明 buildNoType ENUM(CONSISTENT, SUCCESS_BUILD_INCREMENT, EVERY_BUILD_INCREMENT, ) 否 buildNoType buildNo integer 否 buildNo required boolean 否 required TemplateOperationRet 参数名称 参数类型 必须 参数说明 data TemplateOperationMessage 否 data message string 否 message status integer 否 status TemplateOperationMessage 参数名称 参数类型 必须 参数说明 failurePipelines List 否 failurePipelines failureMessages object 否 failureMessages successPipelinesId List 否 successPipelinesId successPipelines List 否 successPipelines "},"reference/rest-api/project-template-resources/update-the-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/update-the-pipeline-template.html","title":"更新流水线模板","keywords":"","body":"更新流水线模板 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId} 资源描述 更新流水线模板 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 versionName string 是 版本名 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线模型-创建信息 是 模板 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]?versionName={versionName}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-template-resources/batch-instantiation-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/batch-instantiation-pipeline-template.html","title":"批量实例化流水线模板","keywords":"","body":"批量实例化流水线模板 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId}/templateInstances 资源描述 批量实例化流水线模板 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 version integer 是 模板版本 useTemplateSettings boolean 否 是否应用模板设置 Body参数 参数名称 参数类型 必须 参数说明 默认值 body arrayTemplateInstanceCreate> 是 创建实例 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation TemplateOperationRet 请求样例 curl -X POST '[请替换为API地址栏请求地址]?version={version}&amp;useTemplateSettings={useTemplateSettings}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"failurePipelines\" : \"string\", \"failureMessages\" : { \"string\" : \"string\" }, \"successPipelinesId\" : \"string\", \"successPipelines\" : \"string\" }, \"message\" : \"String\", \"status\" : 0 } TemplateInstanceCreate 参数名称 参数类型 必须 参数说明 pipelineName string 否 pipelineName param List构建模型-表单元素属性> 否 param buildNo BuildNo 否 buildNo 构建模型-表单元素属性 参数名称 参数类型 必须 参数说明 defaultValue object 是 默认值 containerType BuildContainerType 否 构建机类型下拉 glob string 否 自定义仓库通配符 replaceKey string 否 替换搜索url中的搜素关键字 readOnly boolean 否 是否只读 label string 否 元素标签 type ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 是 元素类型 required boolean 是 是否必须 repoHashId string 否 repoHashId scmType ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 否 代码库类型下拉 relativePath string 否 relativePath propertyType string 否 元素模块 options List构建模型-下拉框表单元素值> 否 下拉框列表 searchUrl string 否 搜索url, 当是下拉框选项时，列表值从url获取不再从option获取 id string 是 元素ID-标识符 placeholder string 否 元素placeholder properties object 否 文件元数据 desc string 否 描述 BuildContainerType 参数名称 参数类型 必须 参数说明 os ENUM(MACOS, WINDOWS, LINUX, ) 否 os buildType ENUM(ESXi, MACOS, DOCKER, IDC, PUBLIC_DEVCLOUD, TSTACK, THIRD_PARTY_AGENT_ID, THIRD_PARTY_AGENT_ENV, THIRD_PARTY_PCG, THIRD_PARTY_DEVCLOUD, GIT_CI, AGENT_LESS, ) 否 buildType 构建模型-下拉框表单元素值 参数名称 参数类型 必须 参数说明 value string 是 元素值名称-显示用 key string 是 元素值ID-标识符 BuildNo 参数名称 参数类型 必须 参数说明 buildNoType ENUM(CONSISTENT, SUCCESS_BUILD_INCREMENT, EVERY_BUILD_INCREMENT, ) 否 buildNoType buildNo integer 否 buildNo required boolean 否 required TemplateOperationRet 参数名称 参数类型 必须 参数说明 data TemplateOperationMessage 否 data message string 否 message status integer 否 status TemplateOperationMessage 参数名称 参数类型 必须 参数说明 failurePipelines List 否 failurePipelines failureMessages object 否 failureMessages successPipelinesId List 否 successPipelinesId successPipelines List 否 successPipelines "},"reference/rest-api/project-template-resources/create-a-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/create-a-pipeline-template.html","title":"创建流水线模板","keywords":"","body":"创建流水线模板 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/templates 资源描述 创建流水线模板 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线模型-创建信息 是 模板 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型TemplateId 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables 数据返回包装模型TemplateId 参数名称 参数类型 必须 参数说明 data TemplateId 否 数据 message string 否 错误信息 status integer 是 状态码 TemplateId 参数名称 参数类型 必须 参数说明 id string 否 id "},"reference/rest-api/project-template-resources/get-a-list-of-all-kinds-of-pipeline-templates.html":{"url":"reference/rest-api/project-template-resources/get-a-list-of-all-kinds-of-pipeline-templates.html","title":"获取所有种类流水线模板列表","keywords":"","body":"获取所有种类流水线模板列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/templates/allTemplates 资源描述 获取所有种类流水线模板列表 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型OptionalTemplateList 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"templates\" : { \"string\" : \"string\" }, \"count\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型OptionalTemplateList 参数名称 参数类型 必须 参数说明 data OptionalTemplateList 否 数据 message string 否 错误信息 status integer 是 状态码 OptionalTemplateList 参数名称 参数类型 必须 参数说明 templates object 否 templates count integer 否 count pageSize integer 否 pageSize page integer 否 page "},"reference/rest-api/project-template-resources/get-the-list-of-instances-of-the-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/get-the-list-of-instances-of-the-pipeline-template.html","title":"获取流水线模板的实例列表","keywords":"","body":"获取流水线模板的实例列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId}/templateInstances 资源描述 获取流水线模板的实例列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 第几页 1 pageSize integer 否 每页多少条 30 searchKey string 否 名字搜索的关键字 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型TemplateInstancePage 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}&amp;searchKey={searchKey}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"instances\" : [ { \"pipelineName\" : \"String\", \"hasPermission\" : true, \"updateTime\" : 0, \"templateId\" : \"String\", \"versionName\" : \"String\", \"version\" : 0, \"pipelineId\" : \"String\", \"status\" : \"ENUM\" } ], \"latestVersion\" : { \"creator\" : \"String\", \"updateTime\" : 0, \"versionName\" : \"String\", \"version\" : 0 }, \"count\" : 0, \"pageSize\" : 0, \"page\" : 0, \"templateId\" : \"String\", \"projectId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型TemplateInstancePage 参数名称 参数类型 必须 参数说明 data TemplateInstancePage 否 数据 message string 否 错误信息 status integer 是 状态码 TemplateInstancePage 参数名称 参数类型 必须 参数说明 instances ListTemplatePipeline> 否 instances latestVersion TemplateVersion 否 latestVersion count integer 否 count pageSize integer 否 pageSize page integer 否 page templateId string 否 templateId projectId string 否 projectId TemplatePipeline 参数名称 参数类型 必须 参数说明 pipelineName string 否 pipelineName hasPermission boolean 否 hasPermission updateTime integer 否 updateTime templateId string 否 templateId versionName string 否 versionName version integer 否 version pipelineId string 否 pipelineId status ENUM(PENDING_UPDATE, UPDATING, UPDATED, ) 否 status TemplateVersion 参数名称 参数类型 必须 参数说明 creator string 否 creator updateTime integer 否 updateTime versionName string 否 versionName version integer 否 version "},"reference/rest-api/project-template-resources/get-the-details-of-the-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/get-the-details-of-the-pipeline-template.html","title":"获取流水线模板详情","keywords":"","body":"获取流水线模板详情 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId} 资源描述 获取流水线模板详情 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 version integer 否 模板版本 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型TemplateModelDetail 请求样例 curl -X GET '[请替换为API地址栏请求地址]?version={version}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"template\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"templateType\" : \"String\", \"creator\" : \"String\", \"versions\" : [ { \"creator\" : \"String\", \"updateTime\" : 0, \"versionName\" : \"String\", \"version\" : 0 } ], \"latestVersion\" : { \"creator\" : \"String\", \"updateTime\" : 0, \"versionName\" : \"String\", \"version\" : 0 }, \"templateName\" : \"String\", \"hasPermission\" : true, \"description\" : \"String\", \"templateParams\" : [ { \"defaultValue\" : { \"string\" : \"string\" }, \"containerType\" : { \"os\" : \"ENUM\", \"buildType\" : \"ENUM\" }, \"glob\" : \"String\", \"replaceKey\" : \"String\", \"readOnly\" : true, \"label\" : \"String\", \"type\" : \"ENUM\", \"required\" : true, \"repoHashId\" : \"String\", \"scmType\" : \"ENUM\", \"relativePath\" : \"String\", \"propertyType\" : \"String\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"searchUrl\" : \"String\", \"id\" : \"String\", \"placeholder\" : \"String\", \"properties\" : { \"string\" : \"string\" }, \"desc\" : \"String\" } ], \"params\" : [ { \"defaultValue\" : { \"string\" : \"string\" }, \"containerType\" : { \"os\" : \"ENUM\", \"buildType\" : \"ENUM\" }, \"glob\" : \"String\", \"replaceKey\" : \"String\", \"readOnly\" : true, \"label\" : \"String\", \"type\" : \"ENUM\", \"required\" : true, \"repoHashId\" : \"String\", \"scmType\" : \"ENUM\", \"relativePath\" : \"String\", \"propertyType\" : \"String\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"searchUrl\" : \"String\", \"id\" : \"String\", \"placeholder\" : \"String\", \"properties\" : { \"string\" : \"string\" }, \"desc\" : \"String\" } ], \"currentVersion\" : { \"creator\" : \"String\", \"updateTime\" : 0, \"versionName\" : \"String\", \"version\" : 0 }, \"logoUrl\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型TemplateModelDetail 参数名称 参数类型 必须 参数说明 data TemplateModelDetail 否 数据 message string 否 错误信息 status integer 是 状态码 TemplateModelDetail 参数名称 参数类型 必须 参数说明 template 流水线模型-创建信息 否 template templateType string 否 templateType creator string 否 creator versions ListTemplateVersion> 否 versions latestVersion TemplateVersion 否 latestVersion templateName string 否 templateName hasPermission boolean 否 hasPermission description string 否 description templateParams List构建模型-表单元素属性> 否 templateParams params List构建模型-表单元素属性> 否 params currentVersion TemplateVersion 否 currentVersion logoUrl string 否 logoUrl 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables TemplateVersion 参数名称 参数类型 必须 参数说明 creator string 否 creator updateTime integer 否 updateTime versionName string 否 versionName version integer 否 version 构建模型-表单元素属性 参数名称 参数类型 必须 参数说明 defaultValue object 是 默认值 containerType BuildContainerType 否 构建机类型下拉 glob string 否 自定义仓库通配符 replaceKey string 否 替换搜索url中的搜素关键字 readOnly boolean 否 是否只读 label string 否 元素标签 type ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 是 元素类型 required boolean 是 是否必须 repoHashId string 否 repoHashId scmType ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 否 代码库类型下拉 relativePath string 否 relativePath propertyType string 否 元素模块 options List构建模型-下拉框表单元素值> 否 下拉框列表 searchUrl string 否 搜索url, 当是下拉框选项时，列表值从url获取不再从option获取 id string 是 元素ID-标识符 placeholder string 否 元素placeholder properties object 否 文件元数据 desc string 否 描述 BuildContainerType 参数名称 参数类型 必须 参数说明 os ENUM(MACOS, WINDOWS, LINUX, ) 否 os buildType ENUM(ESXi, MACOS, DOCKER, IDC, PUBLIC_DEVCLOUD, TSTACK, THIRD_PARTY_AGENT_ID, THIRD_PARTY_AGENT_ENV, THIRD_PARTY_PCG, THIRD_PARTY_DEVCLOUD, GIT_CI, AGENT_LESS, ) 否 buildType 构建模型-下拉框表单元素值 参数名称 参数类型 必须 参数说明 value string 是 元素值名称-显示用 key string 是 元素值ID-标识符 "},"reference/rest-api/project-template-resources/get-a-list-of-templates.html":{"url":"reference/rest-api/project-template-resources/get-a-list-of-templates.html","title":"模版管理-获取模版列表","keywords":"","body":"模版管理-获取模版列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/templates 资源描述 模版管理-获取模版列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 templateType string 否 模版类型 storeFlag boolean 否 是否已关联到store Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型TemplateListModel 请求样例 curl -X GET '[请替换为API地址栏请求地址]?templateType={templateType}&amp;storeFlag={storeFlag}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"models\" : [ { \"templateType\" : \"String\", \"associatePipelines\" : [ { \"id\" : \"String\" } ], \"hasPermission\" : true, \"name\" : \"String\", \"templateTypeDesc\" : \"String\", \"templateId\" : \"String\", \"versionName\" : \"String\", \"version\" : 0, \"hasInstance2Upgrade\" : true, \"logoUrl\" : \"String\", \"storeFlag\" : true, \"associateCodes\" : \"string\" } ], \"hasPermission\" : true, \"count\" : 0, \"projectId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型TemplateListModel 参数名称 参数类型 必须 参数说明 data TemplateListModel 否 数据 message string 否 错误信息 status integer 是 状态码 TemplateListModel 参数名称 参数类型 必须 参数说明 models ListTemplateModel> 否 models hasPermission boolean 否 hasPermission count integer 否 count projectId string 否 projectId TemplateModel 参数名称 参数类型 必须 参数说明 templateType string 是 模板类型 associatePipelines List流水线模型-ID> 是 关联的流水线 hasPermission boolean 是 是否有模版操作权限 name string 是 模版名称 templateTypeDesc string 是 模板类型描述 templateId string 是 模版ID versionName string 是 最新版本号 version integer 是 版本ID hasInstance2Upgrade boolean 是 是否有可更新实例 logoUrl string 是 模版logo storeFlag boolean 是 是否关联到市场 associateCodes List 是 关联的代码库 流水线模型-ID 参数名称 参数类型 必须 参数说明 id string 是 流水线ID "},"reference/rest-api/project-template-resources/delete-the-version-of-the-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/delete-the-version-of-the-pipeline-template.html","title":"删除流水线模板的版本","keywords":"","body":"删除流水线模板的版本 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId}/versions/{version} 资源描述 删除流水线模板的版本 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID version integer 是 版本号 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-template-resources/delete-the-pipeline-template.html":{"url":"reference/rest-api/project-template-resources/delete-the-pipeline-template.html","title":"删除流水线模板","keywords":"","body":"删除流水线模板 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/templates/{templateId} 资源描述 删除流水线模板 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID templateId string 是 模板ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources/":{"url":"reference/rest-api/build-resources/","title":"OPENAPI-构建资源","keywords":"","body":"OPENAPI-构建资源 "},"reference/rest-api/build-resources/get-the-signature-interface-token.html":{"url":"reference/rest-api/build-resources/get-the-signature-interface-token.html","title":"获取签名接口token","keywords":"","body":"获取签名接口token 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/sign/ipa/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/getSignToken 资源描述 获取签名接口token 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型IPA包签名信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"buildId\" : \"String\", \"projectId\" : \"String\", \"pipelineId\" : \"String\", \"token\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型IPA包签名信息 参数名称 参数类型 必须 参数说明 data IPA包签名信息 否 数据 message string 否 错误信息 status integer 是 状态码 IPA包签名信息 参数名称 参数类型 必须 参数说明 buildId string 是 构建ID projectId string 是 项目ID pipelineId string 是 流水线ID token string 是 鉴权token "},"reference/rest-api/build-resources/view-signature-task-status-information.html":{"url":"reference/rest-api/build-resources/view-signature-task-status-information.html","title":"查看签名任务状态信息","keywords":"","body":"查看签名任务状态信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/sign/ipa/{resignId}/status 资源描述 查看签名任务状态信息 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 resignId string 是 签名任务ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型String 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : \"String\", \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型String 参数名称 参数类型 必须 参数说明 data string 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources/get-the-download-path-of-the-signed-ipa-file.html":{"url":"reference/rest-api/build-resources/get-the-download-path-of-the-signed-ipa-file.html","title":"获取签后IPA文件下载路径","keywords":"","body":"获取签后IPA文件下载路径 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/sign/ipa/{resignId}/downloadUrl 资源描述 获取签后IPA文件下载路径 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 resignId string 是 签名任务ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型String 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : \"String\", \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型String 参数名称 参数类型 必须 参数说明 data string 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources/signature-task-details.html":{"url":"reference/rest-api/build-resources/signature-task-details.html","title":"签名任务详情","keywords":"","body":"签名任务详情 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/sign/ipa/{resignId}/detail 资源描述 签名任务详情 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 resignId string 是 签名任务ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型签名状态查询结果 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"resignId\" : \"String\", \"message\" : \"String\", \"status\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型签名状态查询结果 参数名称 参数类型 必须 参数说明 data 签名状态查询结果 否 数据 message string 否 错误信息 status integer 是 状态码 签名状态查询结果 参数名称 参数类型 必须 参数说明 resignId string 是 签名ID message string 是 描述信息 status string 是 是否完成 "},"reference/rest-api/code-submission-resources/":{"url":"reference/rest-api/code-submission-resources/","title":"OPENAPI-代码提交资源","keywords":"","body":"OPENAPI-代码提交资源 "},"reference/rest-api/code-submission-resources/get-the-code-submission-record.html":{"url":"reference/rest-api/code-submission-resources/get-the-code-submission-record.html","title":"获取代码提交记录","keywords":"","body":"获取代码提交记录 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/repositoryCommit 资源描述 获取代码提交记录 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 buildID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型ListCommitResponse 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"elementId\" : \"String\", \"records\" : [ { \"elementId\" : \"String\", \"repoId\" : \"String\", \"committer\" : \"String\", \"commitTime\" : 0, \"repoName\" : \"String\", \"commit\" : \"String\", \"buildId\" : \"String\", \"comment\" : \"String\", \"type\" : 0, \"url\" : \"String\", \"pipelineId\" : \"String\" } ], \"name\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型ListCommitResponse 参数名称 参数类型 必须 参数说明 data ListCommitResponse> 否 数据 message string 否 错误信息 status integer 是 状态码 CommitResponse 参数名称 参数类型 必须 参数说明 elementId string 否 elementId records ListCommitData> 否 records name string 否 name CommitData 参数名称 参数类型 必须 参数说明 elementId string 否 elementId repoId string 否 repoId committer string 否 committer commitTime integer 否 commitTime repoName string 否 repoName commit string 否 commit buildId string 否 buildId comment string 否 comment type integer 否 type url string 否 url pipelineId string 否 pipelineId "},"reference/rest-api/code-warehouse-resources/":{"url":"reference/rest-api/code-warehouse-resources/","title":"OPENAPI-代码仓库资源","keywords":"","body":"OPENAPI-代码仓库资源 "},"reference/rest-api/code-warehouse-resources/edit-the-associated-code-base.html":{"url":"reference/rest-api/code-warehouse-resources/edit-the-associated-code-base.html","title":"编辑关联代码库","keywords":"","body":"编辑关联代码库 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/repositories/{projectId}/{repositoryHashId} 资源描述 编辑关联代码库 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 代码库模型-多态基类 是 代码库模型 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID repositoryHashId string 是 代码库哈希ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 代码库模型-多态基类 参数名称 参数类型 必须 参数说明 startPrefix string 否 startPrefix aliasName string 否 aliasName formatURL string 否 formatURL legal boolean 否 legal credentialId string 否 credentialId userName string 否 userName projectName string 否 projectName projectId string 否 projectId url string 否 url repoHashId string 否 repoHashId 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/code-warehouse-resources/associated-code-base.html":{"url":"reference/rest-api/code-warehouse-resources/associated-code-base.html","title":"关联代码库","keywords":"","body":"关联代码库 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/repositories/{projectId} 资源描述 关联代码库 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 代码库模型-多态基类 是 代码库模型 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型代码库模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"hashId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 代码库模型-多态基类 参数名称 参数类型 必须 参数说明 startPrefix string 否 startPrefix aliasName string 否 aliasName formatURL string 否 formatURL legal boolean 否 legal credentialId string 否 credentialId userName string 否 userName projectName string 否 projectName projectId string 否 projectId url string 否 url repoHashId string 否 repoHashId 数据返回包装模型代码库模型-ID 参数名称 参数类型 必须 参数说明 data 代码库模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 代码库模型-ID 参数名称 参数类型 必须 参数说明 hashId string 是 代码库哈希ID "},"reference/rest-api/code-warehouse-resources/code-library-list.html":{"url":"reference/rest-api/code-warehouse-resources/code-library-list.html","title":"代码库列表","keywords":"","body":"代码库列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/repositories/{projectId}/hasPermissionList 资源描述 代码库列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 repositoryType string 否 仓库类型 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型代码库模型-基本信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?repositoryType={repositoryType}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"aliasName\" : \"String\", \"updatedTime\" : 0, \"repositoryId\" : 0, \"type\" : \"ENUM\", \"repositoryHashId\" : \"String\", \"url\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型代码库模型-基本信息 参数名称 参数类型 必须 参数说明 data 分页数据包装模型代码库模型-基本信息 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型代码库模型-基本信息 参数名称 参数类型 必须 参数说明 records List代码库模型-基本信息> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 代码库模型-基本信息 参数名称 参数类型 必须 参数说明 aliasName string 是 仓库别名 updatedTime integer 是 最后更新时间 repositoryId integer 否 仓库ID type ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 是 类型 repositoryHashId string 否 仓库哈希ID url string 是 URL "},"reference/rest-api/code-warehouse-resources/delete-code-base.html":{"url":"reference/rest-api/code-warehouse-resources/delete-code-base.html","title":"删除代码库","keywords":"","body":"删除代码库 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/repositories/{projectId}/{repositoryHashId} 资源描述 删除代码库 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID repositoryHashId string 是 代码库哈希ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-resources/":{"url":"reference/rest-api/project-resources/","title":"OPENAPI-项目资源","keywords":"","body":"OPENAPI-项目资源 "},"reference/rest-api/project-resources/modify-the-project.html":{"url":"reference/rest-api/project-resources/modify-the-project.html","title":"修改项目","keywords":"","body":"修改项目 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId} 资源描述 修改项目 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 项目-修改模型 是 项目信息 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 项目-修改模型 参数名称 参数类型 必须 参数说明 centerId integer 否 中心ID deptName string 否 部门名称 englishName string 否 英文缩写 ccAppName string 否 cc app name kind integer 否 容器选择， 0 是不选， 1 是k8s, 2 是mesos projectType integer 否 项目类型 deptId integer 否 部门ID description string 否 描述 bgId integer 否 事业群ID secrecy boolean 否 是否保密 bgName string 否 事业群名字 projectName string 否 项目名称 ccAppId integer 否 cc app id centerName string 否 中心名称 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-resources/add-the-specified-user-to-the-specified-project-user-group.html":{"url":"reference/rest-api/project-resources/add-the-specified-user-to-the-specified-project-user-group.html","title":"添加指定用户到指定项目用户组","keywords":"","body":"添加指定用户到指定项目用户组 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/createUser 资源描述 添加指定用户到指定项目用户组 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body ProjectCreateUserInfo 是 添加信息 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } ProjectCreateUserInfo 参数名称 参数类型 必须 参数说明 createUserId string 否 操作用户 roleId integer 否 角色Id userIds List 否 多目标用户id roleName string 否 角色名称 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-resources/create-project.html":{"url":"reference/rest-api/project-resources/create-project.html","title":"创建项目","keywords":"","body":"创建项目 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects 资源描述 创建项目 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 项目-新增模型 是 项目信息 Path参数 参数名称 参数类型 必须 参数说明 默认值 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 项目-新增模型 参数名称 参数类型 必须 参数说明 englishName string 否 英文缩写 deptName string 否 二级部门名称 centerId integer 否 三级部门ID secrecy boolean 否 是否保密 kind integer 否 kind projectType integer 否 项目类型 deptId integer 否 二级部门ID description string 否 描述 bgName string 否 一级部门名字 projectName string 否 项目名称 bgId integer 否 一级部门ID centerName string 否 三级部门名称 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-resources/verify-the-project-name-and-the-english-name-of-the-project.html":{"url":"reference/rest-api/project-resources/verify-the-project-name-and-the-english-name-of-the-project.html","title":"校验项目名称和项目英文名","keywords":"","body":"校验项目名称和项目英文名 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{validateType}/names/validate 资源描述 校验项目名称和项目英文名 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 name string 否 项目名称或者项目英文名 english_name string 否 项目ID Path参数 参数名称 参数类型 必须 参数说明 默认值 validateType string 是 校验的是项目名称或者项目英文名 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X GET '[请替换为API地址栏请求地址]?name={name}&amp;english_name={english_name}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/project-resources/get-project-information.html":{"url":"reference/rest-api/project-resources/get-project-information.html","title":"获取项目信息","keywords":"","body":"获取项目信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId} 资源描述 获取项目信息 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID英文名标识 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型项目-显示模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"result\" : true, \"code\" : 0, \"data\" : { \"deptName\" : \"String\", \"englishName\" : \"String\", \"projectType\" : 0, \"description\" : \"String\", \"remark\" : \"String\", \"project_name\" : \"String\", \"deployType\" : \"String\", \"enabled\" : true, \"createdAt\" : \"String\", \"helmChartEnabled\" : true, \"gray\" : true, \"dataId\" : 0, \"secrecy\" : true, \"projectCode\" : \"String\", \"project_id\" : \"String\", \"useBk\" : true, \"enableExternal\" : true, \"extra\" : \"String\", \"routerTag\" : \"String\", \"id\" : 0, \"ccAppId\" : 0, \"updatedAt\" : \"String\", \"approvalStatus\" : 0, \"approver\" : \"String\", \"pipelineLimit\" : 0, \"centerId\" : \"String\", \"ccAppName\" : \"String\", \"creator\" : \"String\", \"kind\" : 0, \"cc_app_id\" : 0, \"deptId\" : \"String\", \"approvalTime\" : \"String\", \"project_code\" : \"String\", \"relationId\" : \"String\", \"logoAddr\" : \"String\", \"bgId\" : \"String\", \"offlined\" : true, \"hybridCcAppId\" : 0, \"bgName\" : \"String\", \"projectName\" : \"String\", \"enableIdc\" : true, \"projectId\" : \"String\", \"cc_app_name\" : \"String\", \"hybrid_cc_app_id\" : 0, \"centerName\" : \"String\" }, \"requestId\" : \"String\", \"message\" : \"String\" } 数据返回包装模型项目-显示模型 参数名称 参数类型 必须 参数说明 result boolean 否 请求结果 code integer 是 状态码 data 项目-显示模型 否 数据 requestId string 否 请求ID message string 否 错误信息 项目-显示模型 参数名称 参数类型 必须 参数说明 deptName string 否 部门名称 englishName string 否 英文缩写 projectType integer 否 项目类型 description string 否 描述 remark string 否 评论 project_name string 否 旧版项目名称(即将作废，兼容插件中被引用到的旧的字段命名，请用projectName代替) deployType string 否 部署类型 enabled boolean 否 启用 createdAt string 否 创建时间 helmChartEnabled boolean 否 是否启用图表激活 gray boolean 否 是否灰度 dataId integer 否 数据ID secrecy boolean 否 是否保密 projectCode string 否 项目代码 project_id string 否 项目ID(即将作废，兼容插件中被引用到的旧的字段命名，请用projectId代替) useBk boolean 否 useBK enableExternal boolean 否 支持构建机访问外网 extra string 否 extra routerTag string 否 项目路由指向 id integer 否 主键ID ccAppId integer 否 cc业务ID updatedAt string 否 修改时间 approvalStatus integer 否 审批状态 approver string 否 审批人 pipelineLimit integer 否 流水线数量上限 centerId string 否 中心ID ccAppName string 否 cc业务名称 creator string 否 创建人 kind integer 否 kind cc_app_id integer 否 旧版cc业务ID(即将作废，兼容插件中被引用到的旧的字段命名，请用ccAppId代替) deptId string 否 部门ID approvalTime string 否 审批时间 project_code string 否 旧版项目代码(即将作废，兼容插件中被引用到的旧的字段命名，请用projectCode代替) relationId string 否 关联系统Id logoAddr string 否 logo地址 bgId string 否 事业群ID offlined boolean 否 是否离线 hybridCcAppId integer 否 混合云CC业务ID bgName string 否 事业群名字 projectName string 否 项目名称 enableIdc boolean 否 支持IDC构建机 projectId string 否 项目ID cc_app_name string 否 旧版cc业务名称(即将作废，兼容插件中被引用到的旧的字段命名，请用ccAppName代替) hybrid_cc_app_id integer 否 混合云CC业务ID(即将作废，兼容插件中被引用到的旧的字段命名，请用hybridCcAppId代替) centerName string 否 中心名称 "},"reference/rest-api/project-resources/query-all-items.html":{"url":"reference/rest-api/project-resources/query-all-items.html","title":"查询所有项目","keywords":"","body":"查询所有项目 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects 资源描述 查询所有项目 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List项目-显示模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"result\" : true, \"code\" : 0, \"data\" : [ { \"deptName\" : \"String\", \"englishName\" : \"String\", \"projectType\" : 0, \"description\" : \"String\", \"remark\" : \"String\", \"project_name\" : \"String\", \"deployType\" : \"String\", \"enabled\" : true, \"createdAt\" : \"String\", \"helmChartEnabled\" : true, \"gray\" : true, \"dataId\" : 0, \"secrecy\" : true, \"projectCode\" : \"String\", \"project_id\" : \"String\", \"useBk\" : true, \"enableExternal\" : true, \"extra\" : \"String\", \"routerTag\" : \"String\", \"id\" : 0, \"ccAppId\" : 0, \"updatedAt\" : \"String\", \"approvalStatus\" : 0, \"approver\" : \"String\", \"pipelineLimit\" : 0, \"centerId\" : \"String\", \"ccAppName\" : \"String\", \"creator\" : \"String\", \"kind\" : 0, \"cc_app_id\" : 0, \"deptId\" : \"String\", \"approvalTime\" : \"String\", \"project_code\" : \"String\", \"relationId\" : \"String\", \"logoAddr\" : \"String\", \"bgId\" : \"String\", \"offlined\" : true, \"hybridCcAppId\" : 0, \"bgName\" : \"String\", \"projectName\" : \"String\", \"enableIdc\" : true, \"projectId\" : \"String\", \"cc_app_name\" : \"String\", \"hybrid_cc_app_id\" : 0, \"centerName\" : \"String\" } ], \"requestId\" : \"String\", \"message\" : \"String\" } 数据返回包装模型List项目-显示模型 参数名称 参数类型 必须 参数说明 result boolean 否 请求结果 code integer 是 状态码 data List项目-显示模型> 否 数据 requestId string 否 请求ID message string 否 错误信息 项目-显示模型 参数名称 参数类型 必须 参数说明 deptName string 否 部门名称 englishName string 否 英文缩写 projectType integer 否 项目类型 description string 否 描述 remark string 否 评论 project_name string 否 旧版项目名称(即将作废，兼容插件中被引用到的旧的字段命名，请用projectName代替) deployType string 否 部署类型 enabled boolean 否 启用 createdAt string 否 创建时间 helmChartEnabled boolean 否 是否启用图表激活 gray boolean 否 是否灰度 dataId integer 否 数据ID secrecy boolean 否 是否保密 projectCode string 否 项目代码 project_id string 否 项目ID(即将作废，兼容插件中被引用到的旧的字段命名，请用projectId代替) useBk boolean 否 useBK enableExternal boolean 否 支持构建机访问外网 extra string 否 extra routerTag string 否 项目路由指向 id integer 否 主键ID ccAppId integer 否 cc业务ID updatedAt string 否 修改时间 approvalStatus integer 否 审批状态 approver string 否 审批人 pipelineLimit integer 否 流水线数量上限 centerId string 否 中心ID ccAppName string 否 cc业务名称 creator string 否 创建人 kind integer 否 kind cc_app_id integer 否 旧版cc业务ID(即将作废，兼容插件中被引用到的旧的字段命名，请用ccAppId代替) deptId string 否 部门ID approvalTime string 否 审批时间 project_code string 否 旧版项目代码(即将作废，兼容插件中被引用到的旧的字段命名，请用projectCode代替) relationId string 否 关联系统Id logoAddr string 否 logo地址 bgId string 否 事业群ID offlined boolean 否 是否离线 hybridCcAppId integer 否 混合云CC业务ID bgName string 否 事业群名字 projectName string 否 项目名称 enableIdc boolean 否 支持IDC构建机 projectId string 否 项目ID cc_app_name string 否 旧版cc业务名称(即将作废，兼容插件中被引用到的旧的字段命名，请用ccAppName代替) hybrid_cc_app_id integer 否 混合云CC业务ID(即将作废，兼容插件中被引用到的旧的字段命名，请用hybridCcAppId代替) centerName string 否 中心名称 "},"reference/rest-api/pipeline-resources/":{"url":"reference/rest-api/pipeline-resources/","title":"OPENAPI-流水线资源","keywords":"","body":"OPENAPI-流水线资源 "},"reference/rest-api/pipeline-resources/update-pipeline-settings.html":{"url":"reference/rest-api/pipeline-resources/update-pipeline-settings.html","title":"更新流水线设置","keywords":"","body":"更新流水线设置 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/setting_update 资源描述 更新流水线设置 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineSetting 是 流水线设置 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } PipelineSetting 参数名称 参数类型 必须 参数说明 successSubscription 设置-订阅消息 否 successSubscription runLockType ENUM(MULTIPLE, SINGLE, SINGLE_LOCK, LOCK, ) 否 runLockType maxPipelineResNum integer 否 maxPipelineResNum version integer 否 version pipelineId string 否 pipelineId labels List 否 labels pipelineName string 否 pipelineName maxConRunningQueueSize integer 否 maxConRunningQueueSize maxQueueSize integer 否 maxQueueSize hasPermission boolean 否 hasPermission waitQueueTimeMinute integer 否 waitQueueTimeMinute failSubscription 设置-订阅消息 否 failSubscription buildNumRule string 否 buildNumRule projectId string 否 projectId desc string 否 desc 设置-订阅消息 参数名称 参数类型 必须 参数说明 types List 是 通知方式(email, rtx) wechatGroupMarkdownFlag boolean 否 企业微信群通知转为Markdown格式开关 groups List 否 分组 detailFlag boolean 否 通知的流水线详情连接开关 users string 否 通知人员 wechatGroupFlag boolean 否 企业微信群通知开关 content string 否 自定义通知内容 wechatGroup string 否 企业微信群通知群ID 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-resources/reduction-pipeline-orchestration.html":{"url":"reference/rest-api/pipeline-resources/reduction-pipeline-orchestration.html","title":"还原流水线编排","keywords":"","body":"还原流水线编排 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/restore 资源描述 还原流水线编排 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-resources/update-pipeline-layout-and-settings.html":{"url":"reference/rest-api/pipeline-resources/update-pipeline-layout-and-settings.html","title":"更新流水线编排和设置","keywords":"","body":"更新流水线编排和设置 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/pipeline_update 资源描述 更新流水线编排和设置 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineModelAndSetting 是 流水线模型与设置 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型配置流水线结果 请求样例 curl -X PUT '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"version\" : 0, \"pipelineId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } PipelineModelAndSetting 参数名称 参数类型 必须 参数说明 model 流水线模型-创建信息 是 流水线模型 setting PipelineSetting 否 流水线设置 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables PipelineSetting 参数名称 参数类型 必须 参数说明 successSubscription 设置-订阅消息 否 successSubscription runLockType ENUM(MULTIPLE, SINGLE, SINGLE_LOCK, LOCK, ) 否 runLockType maxPipelineResNum integer 否 maxPipelineResNum version integer 否 version pipelineId string 否 pipelineId labels List 否 labels pipelineName string 否 pipelineName maxConRunningQueueSize integer 否 maxConRunningQueueSize maxQueueSize integer 否 maxQueueSize hasPermission boolean 否 hasPermission waitQueueTimeMinute integer 否 waitQueueTimeMinute failSubscription 设置-订阅消息 否 failSubscription buildNumRule string 否 buildNumRule projectId string 否 projectId desc string 否 desc 设置-订阅消息 参数名称 参数类型 必须 参数说明 types List 是 通知方式(email, rtx) wechatGroupMarkdownFlag boolean 否 企业微信群通知转为Markdown格式开关 groups List 否 分组 detailFlag boolean 否 通知的流水线详情连接开关 users string 否 通知人员 wechatGroupFlag boolean 否 企业微信群通知开关 content string 否 自定义通知内容 wechatGroup string 否 企业微信群通知群ID 数据返回包装模型配置流水线结果 参数名称 参数类型 必须 参数说明 data 配置流水线结果 否 数据 message string 否 错误信息 status integer 是 状态码 配置流水线结果 参数名称 参数类型 必须 参数说明 version integer 是 流水线版本号 pipelineId string 是 流水线ID "},"reference/rest-api/pipeline-resources/edit-pipeline-layout.html":{"url":"reference/rest-api/pipeline-resources/edit-pipeline-layout.html","title":"编辑流水线编排","keywords":"","body":"编辑流水线编排 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId} 资源描述 编辑流水线编排 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线模型-创建信息 是 流水线模型 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-resources/import-new-pipeline.html":{"url":"reference/rest-api/pipeline-resources/import-new-pipeline.html","title":"导入新流水线, 包含流水线编排和设置","keywords":"","body":"导入新流水线, 包含流水线编排和设置 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/pipeline_upload 资源描述 导入新流水线, 包含流水线编排和设置 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineModelAndSetting 是 流水线模型与设置 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型流水线模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } PipelineModelAndSetting 参数名称 参数类型 必须 参数说明 model 流水线模型-创建信息 是 流水线模型 setting PipelineSetting 否 流水线设置 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables PipelineSetting 参数名称 参数类型 必须 参数说明 successSubscription 设置-订阅消息 否 successSubscription runLockType ENUM(MULTIPLE, SINGLE, SINGLE_LOCK, LOCK, ) 否 runLockType maxPipelineResNum integer 否 maxPipelineResNum version integer 否 version pipelineId string 否 pipelineId labels List 否 labels pipelineName string 否 pipelineName maxConRunningQueueSize integer 否 maxConRunningQueueSize maxQueueSize integer 否 maxQueueSize hasPermission boolean 否 hasPermission waitQueueTimeMinute integer 否 waitQueueTimeMinute failSubscription 设置-订阅消息 否 failSubscription buildNumRule string 否 buildNumRule projectId string 否 projectId desc string 否 desc 设置-订阅消息 参数名称 参数类型 必须 参数说明 types List 是 通知方式(email, rtx) wechatGroupMarkdownFlag boolean 否 企业微信群通知转为Markdown格式开关 groups List 否 分组 detailFlag boolean 否 通知的流水线详情连接开关 users string 否 通知人员 wechatGroupFlag boolean 否 企业微信群通知开关 content string 否 自定义通知内容 wechatGroup string 否 企业微信群通知群ID 数据返回包装模型流水线模型-ID 参数名称 参数类型 必须 参数说明 data 流水线模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-ID 参数名称 参数类型 必须 参数说明 id string 是 流水线ID "},"reference/rest-api/pipeline-resources/batch-get-pipeline-layout-and-configuration.html":{"url":"reference/rest-api/pipeline-resources/batch-get-pipeline-layout-and-configuration.html","title":"批量获取流水线编排与配置","keywords":"","body":"批量获取流水线编排与配置 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/batchGet 资源描述 批量获取流水线编排与配置 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 channel Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 流水线ID列表 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List流水线模型-列表信息 请求样例 curl -X POST '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"latestBuildUserId\" : \"String\", \"creator\" : \"String\", \"latestBuildEndTime\" : 0, \"buildCount\" : 0, \"latestBuildTaskName\" : \"String\", \"groupLabel\" : [ { \"groupName\" : \"String\", \"labelName\" : \"string\" } ], \"updateTime\" : 0, \"pipelineDesc\" : \"String\", \"pipelineId\" : \"String\", \"latestBuildStartTime\" : 0, \"pipelineName\" : \"String\", \"canManualStartup\" : true, \"pipelineVersion\" : 0, \"taskCount\" : 0, \"latestBuildId\" : \"String\", \"createTime\" : 0, \"runningBuildCount\" : 0, \"latestBuildStatus\" : \"ENUM\", \"lock\" : true, \"model\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"latestBuildNum\" : 0, \"projectId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List流水线模型-列表信息 参数名称 参数类型 必须 参数说明 data List流水线模型-列表信息> 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-列表信息 参数名称 参数类型 必须 参数说明 latestBuildUserId string 否 最后执行人id creator string 否 流水线创建人 latestBuildEndTime integer 否 最后构建结束时间 buildCount integer 是 构建次数 latestBuildTaskName string 否 最后构建任务名称 groupLabel ListPipelineGroupLabels> 否 流水线分组和标签 updateTime integer 是 部署时间 pipelineDesc string 否 流水线描述 pipelineId string 是 流水线ID latestBuildStartTime integer 否 最后构建启动时间 pipelineName string 是 流水线名称 canManualStartup boolean 是 是否可手工启动 pipelineVersion integer 是 编排文件版本号 taskCount integer 是 流水线任务数量 latestBuildId string 否 最后构建实例ID createTime integer 是 流水线创建时间 runningBuildCount integer 是 当前运行的构建的个数 latestBuildStatus ENUM(SUCCEED, FAILED, CANCELED, RUNNING, TERMINATE, REVIEWING, REVIEW_ABORT, REVIEW_PROCESSED, HEARTBEAT_TIMEOUT, PREPARE_ENV, UNEXEC, SKIP, QUALITY_CHECK_FAIL, QUEUE, LOOP_WAITING, CALL_WAITING, TRY_FINALLY, QUEUE_TIMEOUT, EXEC_TIMEOUT, QUEUE_CACHE, RETRY, PAUSE, STAGE_SUCCESS, QUOTA_FAILED, DEPENDENT_WAITING, UNKNOWN, ) 否 最后构建状态 lock boolean 否 运行锁定 model 流水线模型-创建信息 否 编排详情 latestBuildNum integer 否 最后构建版本号 projectId string 是 项目ID PipelineGroupLabels 参数名称 参数类型 必须 参数说明 groupName string 否 groupName labelName List 否 labelName 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables "},"reference/rest-api/pipeline-resources/pipeline-renaming.html":{"url":"reference/rest-api/pipeline-resources/pipeline-renaming.html","title":"流水线重命名","keywords":"","body":"流水线重命名 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/rename 资源描述 流水线重命名 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线模型-NAME 是 流水线名称 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 流水线模型-NAME 参数名称 参数类型 必须 参数说明 name string 是 流水线名称 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-resources/copy-pipeline-orchestration.html":{"url":"reference/rest-api/pipeline-resources/copy-pipeline-orchestration.html","title":"复制流水线编排","keywords":"","body":"复制流水线编排 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/copy 资源描述 复制流水线编排 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线-COPY创建信息 是 流水线COPY Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线模型 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型流水线模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 流水线-COPY创建信息 参数名称 参数类型 必须 参数说明 name string 是 名称 hasCollect boolean 否 是否收藏 desc string 否 描述 group string 否 分组名称 数据返回包装模型流水线模型-ID 参数名称 参数类型 必须 参数说明 data 流水线模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-ID 参数名称 参数类型 必须 参数说明 id string 是 流水线ID "},"reference/rest-api/pipeline-resources/new-pipeline-orchestration.html":{"url":"reference/rest-api/pipeline-resources/new-pipeline-orchestration.html","title":"新建流水线编排","keywords":"","body":"新建流水线编排 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines 资源描述 新建流水线编排 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线模型-创建信息 是 流水线模型 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型流水线模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables 数据返回包装模型流水线模型-ID 参数名称 参数类型 必须 参数说明 data 流水线模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-ID 参数名称 参数类型 必须 参数说明 id string 是 流水线ID "},"reference/rest-api/pipeline-resources/get-the-status-of-the-pipeline.html":{"url":"reference/rest-api/pipeline-resources/get-the-status-of-the-pipeline.html","title":"获取流水线状态","keywords":"","body":"获取流水线状态 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/status 资源描述 获取流水线状态 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型流水线模型-列表信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"latestBuildUserId\" : \"String\", \"creator\" : \"String\", \"latestBuildEndTime\" : 0, \"buildCount\" : 0, \"latestBuildTaskName\" : \"String\", \"groupLabel\" : [ { \"groupName\" : \"String\", \"labelName\" : \"string\" } ], \"updateTime\" : 0, \"pipelineDesc\" : \"String\", \"pipelineId\" : \"String\", \"latestBuildStartTime\" : 0, \"pipelineName\" : \"String\", \"canManualStartup\" : true, \"pipelineVersion\" : 0, \"taskCount\" : 0, \"latestBuildId\" : \"String\", \"createTime\" : 0, \"runningBuildCount\" : 0, \"latestBuildStatus\" : \"ENUM\", \"lock\" : true, \"model\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"latestBuildNum\" : 0, \"projectId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型流水线模型-列表信息 参数名称 参数类型 必须 参数说明 data 流水线模型-列表信息 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-列表信息 参数名称 参数类型 必须 参数说明 latestBuildUserId string 否 最后执行人id creator string 否 流水线创建人 latestBuildEndTime integer 否 最后构建结束时间 buildCount integer 是 构建次数 latestBuildTaskName string 否 最后构建任务名称 groupLabel ListPipelineGroupLabels> 否 流水线分组和标签 updateTime integer 是 部署时间 pipelineDesc string 否 流水线描述 pipelineId string 是 流水线ID latestBuildStartTime integer 否 最后构建启动时间 pipelineName string 是 流水线名称 canManualStartup boolean 是 是否可手工启动 pipelineVersion integer 是 编排文件版本号 taskCount integer 是 流水线任务数量 latestBuildId string 否 最后构建实例ID createTime integer 是 流水线创建时间 runningBuildCount integer 是 当前运行的构建的个数 latestBuildStatus ENUM(SUCCEED, FAILED, CANCELED, RUNNING, TERMINATE, REVIEWING, REVIEW_ABORT, REVIEW_PROCESSED, HEARTBEAT_TIMEOUT, PREPARE_ENV, UNEXEC, SKIP, QUALITY_CHECK_FAIL, QUEUE, LOOP_WAITING, CALL_WAITING, TRY_FINALLY, QUEUE_TIMEOUT, EXEC_TIMEOUT, QUEUE_CACHE, RETRY, PAUSE, STAGE_SUCCESS, QUOTA_FAILED, DEPENDENT_WAITING, UNKNOWN, ) 否 最后构建状态 lock boolean 否 运行锁定 model 流水线模型-创建信息 否 编排详情 latestBuildNum integer 否 最后构建版本号 projectId string 是 项目ID PipelineGroupLabels 参数名称 参数类型 必须 参数说明 groupName string 否 groupName labelName List 否 labelName 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables "},"reference/rest-api/pipeline-resources/get-the-pipeline-orchestration.html":{"url":"reference/rest-api/pipeline-resources/get-the-pipeline-orchestration.html","title":"获取流水线编排","keywords":"","body":"获取流水线编排 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId} 资源描述 获取流水线编排 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 channel Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型流水线模型-创建信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型流水线模型-创建信息 参数名称 参数类型 必须 参数说明 data 流水线模型-创建信息 否 数据 message string 否 错误信息 status integer 是 状态码 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables "},"reference/rest-api/pipeline-resources/get-the-pipeline-list-of-the-project.html":{"url":"reference/rest-api/pipeline-resources/get-the-pipeline-list-of-the-project.html","title":"获取项目的流水线列表","keywords":"","body":"获取项目的流水线列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines 资源描述 获取项目的流水线列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 第几页 1 pageSize integer 否 每页多少条 20 checkPermission boolean 否 是否校验权限 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型流水线模型-列表信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}&amp;checkPermission={checkPermission}&amp;channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"latestBuildUserId\" : \"String\", \"creator\" : \"String\", \"latestBuildEndTime\" : 0, \"buildCount\" : 0, \"latestBuildTaskName\" : \"String\", \"groupLabel\" : [ { \"groupName\" : \"String\", \"labelName\" : \"string\" } ], \"updateTime\" : 0, \"pipelineDesc\" : \"String\", \"pipelineId\" : \"String\", \"latestBuildStartTime\" : 0, \"pipelineName\" : \"String\", \"canManualStartup\" : true, \"pipelineVersion\" : 0, \"taskCount\" : 0, \"latestBuildId\" : \"String\", \"createTime\" : 0, \"runningBuildCount\" : 0, \"latestBuildStatus\" : \"ENUM\", \"lock\" : true, \"model\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"latestBuildNum\" : 0, \"projectId\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型流水线模型-列表信息 参数名称 参数类型 必须 参数说明 data 分页数据包装模型流水线模型-列表信息 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型流水线模型-列表信息 参数名称 参数类型 必须 参数说明 records List流水线模型-列表信息> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 流水线模型-列表信息 参数名称 参数类型 必须 参数说明 latestBuildUserId string 否 最后执行人id creator string 否 流水线创建人 latestBuildEndTime integer 否 最后构建结束时间 buildCount integer 是 构建次数 latestBuildTaskName string 否 最后构建任务名称 groupLabel ListPipelineGroupLabels> 否 流水线分组和标签 updateTime integer 是 部署时间 pipelineDesc string 否 流水线描述 pipelineId string 是 流水线ID latestBuildStartTime integer 否 最后构建启动时间 pipelineName string 是 流水线名称 canManualStartup boolean 是 是否可手工启动 pipelineVersion integer 是 编排文件版本号 taskCount integer 是 流水线任务数量 latestBuildId string 否 最后构建实例ID createTime integer 是 流水线创建时间 runningBuildCount integer 是 当前运行的构建的个数 latestBuildStatus ENUM(SUCCEED, FAILED, CANCELED, RUNNING, TERMINATE, REVIEWING, REVIEW_ABORT, REVIEW_PROCESSED, HEARTBEAT_TIMEOUT, PREPARE_ENV, UNEXEC, SKIP, QUALITY_CHECK_FAIL, QUEUE, LOOP_WAITING, CALL_WAITING, TRY_FINALLY, QUEUE_TIMEOUT, EXEC_TIMEOUT, QUEUE_CACHE, RETRY, PAUSE, STAGE_SUCCESS, QUOTA_FAILED, DEPENDENT_WAITING, UNKNOWN, ) 否 最后构建状态 lock boolean 否 运行锁定 model 流水线模型-创建信息 否 编排详情 latestBuildNum integer 否 最后构建版本号 projectId string 是 项目ID PipelineGroupLabels 参数名称 参数类型 必须 参数说明 groupName string 否 groupName labelName List 否 labelName 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables "},"reference/rest-api/pipeline-resources/delete-the-pipeline-orchestration.html":{"url":"reference/rest-api/pipeline-resources/delete-the-pipeline-orchestration.html","title":"删除流水线编排","keywords":"","body":"删除流水线编排 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId} 资源描述 删除流水线编排 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/":{"url":"reference/rest-api/pipeline-grouping/","title":"OPENAPI-流水线分组","keywords":"","body":"OPENAPI-流水线分组 "},"reference/rest-api/pipeline-grouping/change-label.html":{"url":"reference/rest-api/pipeline-grouping/change-label.html","title":"更改标签","keywords":"","body":"更改标签 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/labels 资源描述 更改标签 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineLabelUpdate 是 流水线标签更新请求 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } PipelineLabelUpdate 参数名称 参数类型 必须 参数说明 groupId string 否 groupId name string 否 name id string 否 id 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/change-group.html":{"url":"reference/rest-api/pipeline-grouping/change-group.html","title":"更改分组","keywords":"","body":"更改分组 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/groups 资源描述 更改分组 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineGroupUpdate 是 流水线标签分组更新请求 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } PipelineGroupUpdate 参数名称 参数类型 必须 参数说明 name string 否 name id string 否 id projectId string 否 projectId 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/add-tag.html":{"url":"reference/rest-api/pipeline-grouping/add-tag.html","title":"添加标签","keywords":"","body":"添加标签 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/labels 资源描述 添加标签 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineLabelCreate 是 流水线标签创建请求 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } PipelineLabelCreate 参数名称 参数类型 必须 参数说明 groupId string 否 groupId name string 否 name 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/add-group.html":{"url":"reference/rest-api/pipeline-grouping/add-group.html","title":"添加分组","keywords":"","body":"添加分组 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/groups 资源描述 添加分组 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body PipelineGroupCreate 是 流水线标签分组创建请求 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } PipelineGroupCreate 参数名称 参数类型 必须 参数说明 name string 否 name projectId string 否 projectId 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/get-all-group-information.html":{"url":"reference/rest-api/pipeline-grouping/get-all-group-information.html","title":"获取所有分组信息","keywords":"","body":"获取所有分组信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/groups 资源描述 获取所有分组信息 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型ListPipelineGroup 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"createTime\" : 0, \"name\" : \"String\", \"updateUser\" : \"String\", \"updateTime\" : 0, \"createUser\" : \"String\", \"id\" : \"String\", \"projectId\" : \"String\", \"labels\" : [ { \"createTime\" : 0, \"groupId\" : \"String\", \"name\" : \"String\", \"updateUser\" : \"String\", \"uptimeTime\" : 0, \"createUser\" : \"String\", \"id\" : \"String\" } ] } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型ListPipelineGroup 参数名称 参数类型 必须 参数说明 data ListPipelineGroup> 否 数据 message string 否 错误信息 status integer 是 状态码 PipelineGroup 参数名称 参数类型 必须 参数说明 createTime integer 否 createTime name string 否 name updateUser string 否 updateUser updateTime integer 否 updateTime createUser string 否 createUser id string 否 id projectId string 否 projectId labels ListPipelineLabel> 否 labels PipelineLabel 参数名称 参数类型 必须 参数说明 createTime integer 否 createTime groupId string 否 groupId name string 否 name updateUser string 否 updateUser uptimeTime integer 否 uptimeTime createUser string 否 createUser id string 否 id "},"reference/rest-api/pipeline-grouping/remove-label.html":{"url":"reference/rest-api/pipeline-grouping/remove-label.html","title":"删除标签","keywords":"","body":"删除标签 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/labels/{labelId} 资源描述 删除标签 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 labelId string 是 标签ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/pipeline-grouping/delete-group.html":{"url":"reference/rest-api/pipeline-grouping/delete-group.html","title":"删除分组","keywords":"","body":"删除分组 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/pipelineGroups/groups/{groupId} 资源描述 删除分组 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 groupId string 是 分组ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/migrate/":{"url":"reference/rest-api/migrate/","title":"OPENAPI-迁移","keywords":"","body":"OPENAPI-迁移 "},"reference/rest-api/migrate/associated-iam-project.html":{"url":"reference/rest-api/migrate/associated-iam-project.html","title":"关联iam项目","keywords":"","body":"关联iam项目 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/permission/move/projects/{projectCode}/relationProject 资源描述 关联iam项目 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 relationId string 是 iam分级管理员ID Path参数 参数名称 参数类型 必须 参数说明 默认值 projectCode string 是 项目Code 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]?relationId={relationId}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/migrate/get-the-pipelineid-and-auto-increment-id-under-the-project.html":{"url":"reference/rest-api/migrate/get-the-pipelineid-and-auto-increment-id-under-the-project.html","title":"获取项目下pipelineId+自增id","keywords":"","body":"获取项目下pipelineId+自增id 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/permission/move/projects/{projectCode}/pipelineIds/list 资源描述 获取项目下pipelineId+自增id 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectCode string 是 项目Code 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型ListPipelineIdInfo 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"id\" : 0, \"pipelineId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型ListPipelineIdInfo 参数名称 参数类型 必须 参数说明 data ListPipelineIdInfo> 否 数据 message string 否 错误信息 status integer 是 状态码 PipelineIdInfo 参数名称 参数类型 必须 参数说明 id integer 否 id pipelineId string 否 pipelineId "},"reference/rest-api/r-and-d-market-resources/":{"url":"reference/rest-api/r-and-d-market-resources/","title":"OPENAPI-研发市场资源","keywords":"","body":"OPENAPI-研发市场资源 "},"reference/rest-api/r-and-d-market-resources/install-the-r-and-d-store-template-into-the-project.html":{"url":"reference/rest-api/r-and-d-market-resources/install-the-r-and-d-store-template-into-the-project.html","title":"安装研发商店模板到项目","keywords":"","body":"安装研发商店模板到项目 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/market/template/installFromStore 资源描述 安装研发商店模板到项目 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 安装模板到项目请求报文 是 安装研发商店模板到项目请求报文体 Path参数 参数名称 参数类型 必须 参数说明 默认值 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 安装模板到项目请求报文 参数名称 参数类型 必须 参数说明 projectCodeList List 是 项目标识 templateCode string 是 模板代码 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-log-resources/":{"url":"reference/rest-api/build-log-resources/","title":"OPENAPI-构建日志资源","keywords":"","body":"OPENAPI-构建日志资源 "},"reference/rest-api/build-log-resources/get-more-logs.html":{"url":"reference/rest-api/build-log-resources/get-more-logs.html","title":"获取更多日志","keywords":"","body":"获取更多日志 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/logs/more 资源描述 获取更多日志 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 debug boolean 否 是否包含调试日志 num integer 否 日志行数 fromStart boolean 否 是否正序输出 start integer 是 起始行号 end integer 是 结尾行号 tag string 否 对应elementId jobId string 否 对应jobId executeCount integer 否 执行次数 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型日志查询模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]?debug={debug}&amp;num={num}&amp;fromStart={fromStart}&amp;start={start}&amp;end={end}&amp;tag={tag}&amp;jobId={jobId}&amp;executeCount={executeCount}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"timeUsed\" : 0, \"hasMore\" : true, \"subTags\" : \"string\", \"buildId\" : \"String\", \"finished\" : true, \"logs\" : [ { \"subTag\" : \"String\", \"jobId\" : \"String\", \"lineNo\" : 0, \"tag\" : \"String\", \"message\" : \"String\", \"priority\" : \"String\", \"executeCount\" : 0, \"timestamp\" : 0 } ], \"status\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型日志查询模型 参数名称 参数类型 必须 参数说明 data 日志查询模型 否 数据 message string 否 错误信息 status integer 是 状态码 日志查询模型 参数名称 参数类型 必须 参数说明 timeUsed integer 否 所用时间 hasMore boolean 否 是否有后续日志 subTags List 是 日志子tag列表 buildId string 是 构建ID finished boolean 是 是否结束 logs List日志模型> 是 日志列表 status integer 否 日志查询状态 日志模型 参数名称 参数类型 必须 参数说明 subTag string 是 日志子tag jobId string 是 日志jobId lineNo integer 是 日志行号 tag string 是 日志tag message string 是 日志消息体 priority string 是 日志权重级 executeCount integer 是 日志执行次数 timestamp integer 是 日志时间戳 "},"reference/rest-api/build-log-resources/obtain-and-initialize-all-logs-according-to-the-build-id.html":{"url":"reference/rest-api/build-log-resources/obtain-and-initialize-all-logs-according-to-the-build-id.html","title":"根据构建ID获取初始化所有日志","keywords":"","body":"根据构建ID获取初始化所有日志 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/logs/init 资源描述 根据构建ID获取初始化所有日志 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 debug boolean 否 是否包含调试日志 tag string 否 对应elementId jobId string 否 对应jobId executeCount integer 否 执行次数 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型日志查询模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]?debug={debug}&amp;tag={tag}&amp;jobId={jobId}&amp;executeCount={executeCount}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"timeUsed\" : 0, \"hasMore\" : true, \"subTags\" : \"string\", \"buildId\" : \"String\", \"finished\" : true, \"logs\" : [ { \"subTag\" : \"String\", \"jobId\" : \"String\", \"lineNo\" : 0, \"tag\" : \"String\", \"message\" : \"String\", \"priority\" : \"String\", \"executeCount\" : 0, \"timestamp\" : 0 } ], \"status\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型日志查询模型 参数名称 参数类型 必须 参数说明 data 日志查询模型 否 数据 message string 否 错误信息 status integer 是 状态码 日志查询模型 参数名称 参数类型 必须 参数说明 timeUsed integer 否 所用时间 hasMore boolean 否 是否有后续日志 subTags List 是 日志子tag列表 buildId string 是 构建ID finished boolean 是 是否结束 logs List日志模型> 是 日志列表 status integer 否 日志查询状态 日志模型 参数名称 参数类型 必须 参数说明 subTag string 是 日志子tag jobId string 是 日志jobId lineNo integer 是 日志行号 tag string 是 日志tag message string 是 日志消息体 priority string 是 日志权重级 executeCount integer 是 日志执行次数 timestamp integer 是 日志时间戳 "},"reference/rest-api/build-log-resources/download-log-interface.html":{"url":"reference/rest-api/build-log-resources/download-log-interface.html","title":"下载日志接口","keywords":"","body":"下载日志接口 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/logs/download 资源描述 下载日志接口 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 tag string 否 对应element ID jobId string 否 对应jobId executeCount integer 否 执行次数 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 default successful operation parse error 请求样例 curl -X GET '[请替换为API地址栏请求地址]?tag={tag}&amp;jobId={jobId}&amp;executeCount={executeCount}' HEADER样例 accept: application/json Content-Type: application/json "},"reference/rest-api/build-log-resources/get-the-log-after-a-certain-line.html":{"url":"reference/rest-api/build-log-resources/get-the-log-after-a-certain-line.html","title":"获取某行后的日志","keywords":"","body":"获取某行后的日志 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/logs/after 资源描述 获取某行后的日志 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 start integer 是 起始行号 debug boolean 否 是否包含调试日志 tag string 否 对应elementId jobId string 否 对应jobId executeCount integer 否 执行次数 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型日志查询模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]?start={start}&amp;debug={debug}&amp;tag={tag}&amp;jobId={jobId}&amp;executeCount={executeCount}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"timeUsed\" : 0, \"hasMore\" : true, \"subTags\" : \"string\", \"buildId\" : \"String\", \"finished\" : true, \"logs\" : [ { \"subTag\" : \"String\", \"jobId\" : \"String\", \"lineNo\" : 0, \"tag\" : \"String\", \"message\" : \"String\", \"priority\" : \"String\", \"executeCount\" : 0, \"timestamp\" : 0 } ], \"status\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型日志查询模型 参数名称 参数类型 必须 参数说明 data 日志查询模型 否 数据 message string 否 错误信息 status integer 是 状态码 日志查询模型 参数名称 参数类型 必须 参数说明 timeUsed integer 否 所用时间 hasMore boolean 否 是否有后续日志 subTags List 是 日志子tag列表 buildId string 是 构建ID finished boolean 是 是否结束 logs List日志模型> 是 日志列表 status integer 否 日志查询状态 日志模型 参数名称 参数类型 必须 参数说明 subTag string 是 日志子tag jobId string 是 日志jobId lineNo integer 是 日志行号 tag string 是 日志tag message string 是 日志消息体 priority string 是 日志权重级 executeCount integer 是 日志执行次数 timestamp integer 是 日志时间戳 "},"reference/rest-api/certificate-resources/":{"url":"reference/rest-api/certificate-resources/","title":"OPENAPI-证书资源","keywords":"","body":"OPENAPI-证书资源 "},"reference/rest-api/certificate-resources/edit-credentials.html":{"url":"reference/rest-api/certificate-resources/edit-credentials.html","title":"编辑凭据","keywords":"","body":"编辑凭据 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/credentials/{credentialId} 资源描述 编辑凭据 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 凭据-更新时内容 是 凭据 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID credentialId string 是 凭据ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 凭据-更新时内容 参数名称 参数类型 必须 参数说明 credentialType ENUM(PASSWORD, ACCESSTOKEN, USERNAME_PASSWORD, SECRETKEY, APPID_SECRETKEY, SSH_PRIVATEKEY, TOKEN_SSH_PRIVATEKEY, TOKEN_USERNAME_PASSWORD, COS_APPID_SECRETID_SECRETKEY_REGION, MULTI_LINE_PASSWORD, ) 是 凭据类型 credentialRemark string 否 凭据描述 v1 string 是 凭据内容 credentialName string 是 凭据名称 v2 string 是 凭据内容 v3 string 是 凭据内容 v4 string 是 凭据内容 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/certificate-resources/add-credentials.html":{"url":"reference/rest-api/certificate-resources/add-credentials.html","title":"新增凭据","keywords":"","body":"新增凭据 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/credentials 资源描述 新增凭据 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 凭据-创建时内容 是 凭据 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 凭据-创建时内容 参数名称 参数类型 必须 参数说明 credentialType ENUM(PASSWORD, ACCESSTOKEN, USERNAME_PASSWORD, SECRETKEY, APPID_SECRETKEY, SSH_PRIVATEKEY, TOKEN_SSH_PRIVATEKEY, TOKEN_USERNAME_PASSWORD, COS_APPID_SECRETID_SECRETKEY_REGION, MULTI_LINE_PASSWORD, ) 是 凭据类型 credentialRemark string 否 凭据描述 credentialId string 是 凭据ID v1 string 是 凭据内容 credentialName string 是 凭据名称 v2 string 是 凭据内容 v3 string 是 凭据内容 v4 string 是 凭据内容 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/certificate-resources/get-credentials.html":{"url":"reference/rest-api/certificate-resources/get-credentials.html","title":"获取凭据","keywords":"","body":"获取凭据 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/credentials/{credentialId} 资源描述 获取凭据 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID credentialId string 是 凭据ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型凭据-凭据内容和权限 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"credentialType\" : \"ENUM\", \"updatedTime\" : 0, \"credentialRemark\" : \"String\", \"permissions\" : { \"view\" : true, \"edit\" : true, \"delete\" : true }, \"credentialId\" : \"String\", \"updateUser\" : \"String\", \"v1\" : \"String\", \"credentialName\" : \"String\", \"v2\" : \"String\", \"v3\" : \"String\", \"v4\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型凭据-凭据内容和权限 参数名称 参数类型 必须 参数说明 data 凭据-凭据内容和权限 否 数据 message string 否 错误信息 status integer 是 状态码 凭据-凭据内容和权限 参数名称 参数类型 必须 参数说明 credentialType ENUM(PASSWORD, ACCESSTOKEN, USERNAME_PASSWORD, SECRETKEY, APPID_SECRETKEY, SSH_PRIVATEKEY, TOKEN_SSH_PRIVATEKEY, TOKEN_USERNAME_PASSWORD, COS_APPID_SECRETID_SECRETKEY_REGION, MULTI_LINE_PASSWORD, ) 是 凭据类型 updatedTime integer 是 最后更新时间 credentialRemark string 否 凭据描述 permissions 凭证-凭证权限 是 权限 credentialId string 是 凭据ID updateUser string 是 最后更新者 v1 string 是 凭据内容 credentialName string 是 凭据名称 v2 string 是 凭据内容 v3 string 是 凭据内容 v4 string 是 凭据内容 凭证-凭证权限 参数名称 参数类型 必须 参数说明 view boolean 是 查看权限 edit boolean 是 编辑权限 delete boolean 是 删除权限 "},"reference/rest-api/certificate-resources/obtain-the-list-of-credentials-that-the-user-has-corresponding-permissions.html":{"url":"reference/rest-api/certificate-resources/obtain-the-list-of-credentials-that-the-user-has-corresponding-permissions.html","title":"获取用户拥有对应权限凭据列表","keywords":"","body":"获取用户拥有对应权限凭据列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/credentials 资源描述 获取用户拥有对应权限凭据列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 credentialTypes string 否 凭证类型列表，用逗号分隔 page integer 否 第几页 1 pageSize integer 否 每页多少条 20 keyword string 否 关键字 X-DEVOPS-UID string 是 用户ID admin Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型凭据-凭据内容和权限 请求样例 curl -X GET '[请替换为API地址栏请求地址]?credentialTypes={credentialTypes}&amp;page={page}&amp;pageSize={pageSize}&amp;keyword={keyword}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"credentialType\" : \"ENUM\", \"updatedTime\" : 0, \"credentialRemark\" : \"String\", \"permissions\" : { \"view\" : true, \"edit\" : true, \"delete\" : true }, \"credentialId\" : \"String\", \"updateUser\" : \"String\", \"v1\" : \"String\", \"credentialName\" : \"String\", \"v2\" : \"String\", \"v3\" : \"String\", \"v4\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型凭据-凭据内容和权限 参数名称 参数类型 必须 参数说明 data 分页数据包装模型凭据-凭据内容和权限 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型凭据-凭据内容和权限 参数名称 参数类型 必须 参数说明 records List凭据-凭据内容和权限> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 凭据-凭据内容和权限 参数名称 参数类型 必须 参数说明 credentialType ENUM(PASSWORD, ACCESSTOKEN, USERNAME_PASSWORD, SECRETKEY, APPID_SECRETKEY, SSH_PRIVATEKEY, TOKEN_SSH_PRIVATEKEY, TOKEN_USERNAME_PASSWORD, COS_APPID_SECRETID_SECRETKEY_REGION, MULTI_LINE_PASSWORD, ) 是 凭据类型 updatedTime integer 是 最后更新时间 credentialRemark string 否 凭据描述 permissions 凭证-凭证权限 是 权限 credentialId string 是 凭据ID updateUser string 是 最后更新者 v1 string 是 凭据内容 credentialName string 是 凭据名称 v2 string 是 凭据内容 v3 string 是 凭据内容 v4 string 是 凭据内容 凭证-凭证权限 参数名称 参数类型 必须 参数说明 view boolean 是 查看权限 edit boolean 是 编辑权限 delete boolean 是 删除权限 "},"reference/rest-api/certificate-resources/delete-credentials.html":{"url":"reference/rest-api/certificate-resources/delete-credentials.html","title":"删除凭据","keywords":"","body":"删除凭据 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/credentials/{credentialId} 资源描述 删除凭据 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID credentialId string 是 凭据ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/callback-resource/":{"url":"reference/rest-api/callback-resource/","title":"OPENAPI-callback资源","keywords":"","body":"OPENAPI-callback资源 "},"reference/rest-api/callback-resource/callback-callback-to-retry.html":{"url":"reference/rest-api/callback-resource/callback-callback-to-retry.html","title":"callback回调重试","keywords":"","body":"callback回调重试 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks/history/{id}/retry 资源描述 callback回调重试 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId id integer 是 id 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/callback-resource/create-callbacks-in-batches.html":{"url":"reference/rest-api/callback-resource/create-callbacks-in-batches.html","title":"批量创建callback回调","keywords":"","body":"批量创建callback回调 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks/batch 资源描述 批量创建callback回调 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 url string 是 url region string 是 region event string 是 event secretToken string 否 secretToken Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型项目的流水线回调创建结果 请求样例 curl -X POST '[请替换为API地址栏请求地址]?url={url}&amp;region={region}&amp;event={event}&amp;secretToken={secretToken}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"successEvents\" : \"string\", \"failureEvents\" : { \"string\" : \"string\" } }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型项目的流水线回调创建结果 参数名称 参数类型 必须 参数说明 data 项目的流水线回调创建结果 否 数据 message string 否 错误信息 status integer 是 状态码 项目的流水线回调创建结果 参数名称 参数类型 必须 参数说明 successEvents List 否 successEvents failureEvents object 否 failureEvents "},"reference/rest-api/callback-resource/create-callback-callback.html":{"url":"reference/rest-api/callback-resource/create-callback-callback.html","title":"创建callback回调","keywords":"","body":"创建callback回调 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks 资源描述 创建callback回调 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 url string 是 url region string 是 region event string 是 event secretToken string 否 secretToken Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]?url={url}&amp;region={region}&amp;event={event}&amp;secretToken={secretToken}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/callback-resource/callback-execution-history.html":{"url":"reference/rest-api/callback-resource/callback-execution-history.html","title":"callback回调执行历史记录","keywords":"","body":"callback回调执行历史记录 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks/history 资源描述 callback回调执行历史记录 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 url string 是 回调url event string 是 事件类型 startTime string 否 开始时间(yyyy-MM-dd HH:mm:ss格式) endTime string 否 结束时间(yyyy-MM-dd HH:mm:ss格式) page integer 否 第几页 1 pageSize integer 否 每页多少条 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型项目的流水线回调历史 请求样例 curl -X GET '[请替换为API地址栏请求地址]?url={url}&amp;event={event}&amp;startTime={startTime}&amp;endTime={endTime}&amp;page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"callBackUrl\" : \"String\", \"responseBody\" : \"String\", \"responseCode\" : 0, \"errorMsg\" : \"String\", \"requestHeaders\" : [ { \"name\" : \"String\", \"value\" : \"String\" } ], \"requestBody\" : \"String\", \"createdTime\" : 0, \"startTime\" : 0, \"id\" : 0, \"endTime\" : 0, \"projectId\" : \"String\", \"events\" : \"String\", \"status\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型项目的流水线回调历史 参数名称 参数类型 必须 参数说明 data 分页数据包装模型项目的流水线回调历史 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型项目的流水线回调历史 参数名称 参数类型 必须 参数说明 records List项目的流水线回调历史> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 项目的流水线回调历史 参数名称 参数类型 必须 参数说明 callBackUrl string 否 callBackUrl responseBody string 否 responseBody responseCode integer 否 responseCode errorMsg string 否 errorMsg requestHeaders ListCallBackHeader> 否 requestHeaders requestBody string 否 requestBody createdTime integer 否 createdTime startTime integer 否 startTime id integer 否 id endTime integer 否 endTime projectId string 否 projectId events string 否 events status string 否 status CallBackHeader 参数名称 参数类型 必须 参数说明 name string 否 name value string 否 value "},"reference/rest-api/callback-resource/callback-list.html":{"url":"reference/rest-api/callback-resource/callback-list.html","title":"callback回调列表","keywords":"","body":"callback回调列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks 资源描述 callback回调列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 第几页 1 pageSize integer 否 每页多少条 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型项目的流水线回调配置 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"callBackUrl\" : \"String\", \"secretToken\" : \"String\", \"id\" : 0, \"projectId\" : \"String\", \"events\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型项目的流水线回调配置 参数名称 参数类型 必须 参数说明 data 分页数据包装模型项目的流水线回调配置 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型项目的流水线回调配置 参数名称 参数类型 必须 参数说明 records List项目的流水线回调配置> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 项目的流水线回调配置 参数名称 参数类型 必须 参数说明 callBackUrl string 否 callBackUrl secretToken string 否 secretToken id integer 否 id projectId string 否 projectId events string 否 events "},"reference/rest-api/callback-resource/callback-callback-removed.html":{"url":"reference/rest-api/callback-resource/callback-callback-removed.html","title":"callback回调移除","keywords":"","body":"callback回调移除 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/callbacks/{id} 资源描述 callback回调移除 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId id integer 是 id 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources-1/":{"url":"reference/rest-api/build-resources-1/","title":"OPENAPI-构建资源","keywords":"","body":"OPENAPI-构建资源 "},"reference/rest-api/build-resources-1/start-the-build.html":{"url":"reference/rest-api/build-resources-1/start-the-build.html","title":"启动构建","keywords":"","body":"启动构建 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/start 资源描述 启动构建 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 buildNo integer 否 手动指定构建版本参数 channelCode string 否 渠道号，默认为BS Body参数 参数名称 参数类型 必须 参数说明 默认值 body map 是 启动参数 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型构建模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]?buildNo={buildNo}&amp;channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型构建模型-ID 参数名称 参数类型 必须 参数说明 data 构建模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 构建模型-ID 参数名称 参数类型 必须 参数说明 id string 是 构建ID "},"reference/rest-api/build-resources-1/get-the-value-of-the-variable-in-the-build.html":{"url":"reference/rest-api/build-resources-1/get-the-value-of-the-variable-in-the-build.html","title":"获取构建中的变量值","keywords":"","body":"获取构建中的变量值 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/variables 资源描述 获取构建中的变量值 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 变量名列表 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型MapStringString 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"string\" : \"string\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型MapStringString 参数名称 参数类型 必须 参数说明 data object 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources-1/stop-building.html":{"url":"reference/rest-api/build-resources-1/stop-building.html","title":"停止构建","keywords":"","body":"停止构建 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/stop 资源描述 停止构建 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources-1/manual-review-of-the-start-up-phase.html":{"url":"reference/rest-api/build-resources-1/manual-review-of-the-start-up-phase.html","title":"手动审核启动阶段","keywords":"","body":"手动审核启动阶段 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/stages/{stageId}/manualStart 资源描述 手动审核启动阶段 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 cancel boolean 否 取消执行 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 人工审核-自定义参数 否 审核请求体 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID stageId string 是 阶段ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]?cancel={cancel}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources-1/retry-the-build.html":{"url":"reference/rest-api/build-resources-1/retry-the-build.html","title":"重试构建-重试或者跳过失败插件","keywords":"","body":"重试构建-重试或者跳过失败插件 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/retry 资源描述 重试构建-重试或者跳过失败插件 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 taskId string 否 要重试或跳过的插件ID，或者StageId failedContainer boolean 否 仅重试所有失败Job skip boolean 否 跳过失败插件，为true时需要传taskId值（值为stageId则表示跳过Stage下所有失败插件） channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型构建模型-ID 请求样例 curl -X POST '[请替换为API地址栏请求地址]?taskId={taskId}&amp;failedContainer={failedContainer}&amp;skip={skip}&amp;channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"id\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型构建模型-ID 参数名称 参数类型 必须 参数说明 data 构建模型-ID 否 数据 message string 否 错误信息 status integer 是 状态码 构建模型-ID 参数名称 参数类型 必须 参数说明 id string 是 构建ID "},"reference/rest-api/build-resources-1/operation-pause-plugin.html":{"url":"reference/rest-api/build-resources-1/operation-pause-plugin.html","title":"操作暂停插件","keywords":"","body":"操作暂停插件 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/execute/pause 资源描述 操作暂停插件 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 流水线暂停操作实体类 否 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 流水线暂停操作实体类 参数名称 参数类型 必须 参数说明 continue boolean 否 continue containerId string 否 当前containerId taskId string 否 任务ID element Element 否 element信息,若插件内有变量变更需给出变更后的element stageId string 否 当前stageId Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-resources-1/obtain-the-manual-start-parameters-of-the-pipeline.html":{"url":"reference/rest-api/build-resources-1/obtain-the-manual-start-parameters-of-the-pipeline.html","title":"获取流水线手动启动参数","keywords":"","body":"获取流水线手动启动参数 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/manualStartupInfo 资源描述 获取流水线手动启动参数 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型构建模型-流水线手动启动信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"canManualStartup\" : true, \"canElementSkip\" : true, \"buildNo\" : { \"buildNoType\" : \"ENUM\", \"buildNo\" : 0, \"required\" : true }, \"properties\" : [ { \"defaultValue\" : { \"string\" : \"string\" }, \"containerType\" : { \"os\" : \"ENUM\", \"buildType\" : \"ENUM\" }, \"glob\" : \"String\", \"replaceKey\" : \"String\", \"readOnly\" : true, \"label\" : \"String\", \"type\" : \"ENUM\", \"required\" : true, \"repoHashId\" : \"String\", \"scmType\" : \"ENUM\", \"relativePath\" : \"String\", \"propertyType\" : \"String\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"searchUrl\" : \"String\", \"id\" : \"String\", \"placeholder\" : \"String\", \"properties\" : { \"string\" : \"string\" }, \"desc\" : \"String\" } ] }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型构建模型-流水线手动启动信息 参数名称 参数类型 必须 参数说明 data 构建模型-流水线手动启动信息 否 数据 message string 否 错误信息 status integer 是 状态码 构建模型-流水线手动启动信息 参数名称 参数类型 必须 参数说明 canManualStartup boolean 是 是否可手工启动 canElementSkip boolean 是 是否可跳过插件 buildNo BuildNo 是 指定的构建号 properties List构建模型-表单元素属性> 是 启动表单元素列表 BuildNo 参数名称 参数类型 必须 参数说明 buildNoType ENUM(CONSISTENT, SUCCESS_BUILD_INCREMENT, EVERY_BUILD_INCREMENT, ) 否 buildNoType buildNo integer 否 buildNo required boolean 否 required 构建模型-表单元素属性 参数名称 参数类型 必须 参数说明 defaultValue object 是 默认值 containerType BuildContainerType 否 构建机类型下拉 glob string 否 自定义仓库通配符 replaceKey string 否 替换搜索url中的搜素关键字 readOnly boolean 否 是否只读 label string 否 元素标签 type ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 是 元素类型 required boolean 是 是否必须 repoHashId string 否 repoHashId scmType ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 否 代码库类型下拉 relativePath string 否 relativePath propertyType string 否 元素模块 options List构建模型-下拉框表单元素值> 否 下拉框列表 searchUrl string 否 搜索url, 当是下拉框选项时，列表值从url获取不再从option获取 id string 是 元素ID-标识符 placeholder string 否 元素placeholder properties object 否 文件元数据 desc string 否 描述 BuildContainerType 参数名称 参数类型 必须 参数说明 os ENUM(MACOS, WINDOWS, LINUX, ) 否 os buildType ENUM(ESXi, MACOS, DOCKER, IDC, PUBLIC_DEVCLOUD, TSTACK, THIRD_PARTY_AGENT_ID, THIRD_PARTY_AGENT_ENV, THIRD_PARTY_PCG, THIRD_PARTY_DEVCLOUD, GIT_CI, AGENT_LESS, ) 否 buildType 构建模型-下拉框表单元素值 参数名称 参数类型 必须 参数说明 value string 是 元素值名称-显示用 key string 是 元素值ID-标识符 "},"reference/rest-api/build-resources-1/get-pipeline-construction-history.html":{"url":"reference/rest-api/build-resources-1/get-pipeline-construction-history.html","title":"获取流水线构建历史","keywords":"","body":"获取流水线构建历史 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/history 资源描述 获取流水线构建历史 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 第几页 1 pageSize integer 否 每页多少条 20 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型构建历史-分页数据包装模型历史构建模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}&amp;channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"pipelineVersion\" : 0, \"records\" : [ { \"buildNum\" : 0, \"buildNumAlias\" : \"String\", \"stageStatus\" : [ { \"name\" : \"String\", \"stageId\" : \"String\" } ], \"remark\" : \"String\", \"buildMsg\" : \"String\", \"startTime\" : 0, \"id\" : \"String\", \"recommendVersion\" : \"String\", \"retry\" : true, \"totalTime\" : 0, \"webHookType\" : \"String\", \"mobileStart\" : true, \"startType\" : \"String\", \"trigger\" : \"String\", \"userId\" : \"String\", \"deleteReason\" : \"String\", \"queueTime\" : 0, \"pipelineVersion\" : 0, \"buildParameters\" : [ { \"valueType\" : \"ENUM\", \"readOnly\" : true, \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\" } ], \"material\" : [ { \"newCommitId\" : \"String\", \"aliasName\" : \"String\", \"commitTimes\" : 0, \"branchName\" : \"String\", \"url\" : \"String\", \"newCommitComment\" : \"String\" } ], \"currentTimestamp\" : 0, \"artifactList\" : [ { \"fullPath\" : \"String\", \"modifiedTime\" : 0, \"appVersion\" : \"String\", \"shortUrl\" : \"String\", \"downloadUrl\" : \"String\", \"fullName\" : \"String\", \"path\" : \"String\", \"folder\" : true, \"size\" : 0, \"name\" : \"String\", \"artifactoryType\" : \"ENUM\", \"properties\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"md5\" : \"String\" } ], \"endTime\" : 0, \"webhookInfo\" : { \"webhookBranch\" : \"String\", \"webhookEventType\" : \"String\", \"webhookMessage\" : \"String\", \"webhookMergeCommitSha\" : \"String\", \"webhookRepoUrl\" : \"String\", \"webhookCommitId\" : \"String\", \"webhookType\" : \"String\" }, \"errorInfoList\" : [ { \"atomCode\" : \"String\", \"errorType\" : 0, \"errorCode\" : 0, \"taskName\" : \"String\", \"taskId\" : \"String\", \"errorMsg\" : \"String\" } ], \"status\" : \"String\", \"executeTime\" : 0 } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0, \"hasDownloadPermission\" : true }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型构建历史-分页数据包装模型历史构建模型 参数名称 参数类型 必须 参数说明 data 构建历史-分页数据包装模型历史构建模型 否 数据 message string 否 错误信息 status integer 是 状态码 构建历史-分页数据包装模型历史构建模型 参数名称 参数类型 必须 参数说明 pipelineVersion integer 是 最新的编排版本号 records List历史构建模型> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 hasDownloadPermission boolean 是 是否拥有下载构建的权限 历史构建模型 参数名称 参数类型 必须 参数说明 buildNum integer 是 构建号 buildNumAlias string 否 自定义构建版本号 stageStatus List历史构建阶段状态> 是 各阶段状态 remark string 否 备注 buildMsg string 否 构建信息 startTime integer 是 开始时间 id string 是 构建ID recommendVersion string 否 推荐版本号 retry boolean 否 是否重试 totalTime integer 否 总耗时(秒) webHookType string 否 WebHookType mobileStart boolean 否 mobileStart startType string 否 启动类型(新) trigger string 是 触发条件 userId string 是 启动用户 deleteReason string 是 结束原因 queueTime integer 否 排队于 pipelineVersion integer 是 编排文件版本号 buildParameters List构建模型-构建参数> 否 启动参数 material ListPipelineBuildMaterial> 否 原材料 currentTimestamp integer 是 服务器当前时间戳 artifactList List版本仓库-文件信息> 否 构件列表 endTime integer 是 结束时间 webhookInfo WebhookInfo 否 webhookInfo errorInfoList List插件错误信息> 否 流水线任务执行错误 status string 是 状态 executeTime integer 否 运行耗时(秒，不包括人工审核时间) 历史构建阶段状态 参数名称 参数类型 必须 参数说明 name string 是 阶段名称 stageId string 是 阶段ID 构建模型-构建参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 否 元素值类型 readOnly boolean 否 是否只读 value object 是 元素值名称-显示用 key string 是 元素值ID-标识符 PipelineBuildMaterial 参数名称 参数类型 必须 参数说明 newCommitId string 否 newCommitId aliasName string 否 aliasName commitTimes integer 否 commitTimes branchName string 否 branchName url string 否 url newCommitComment string 否 newCommitComment 版本仓库-文件信息 参数名称 参数类型 必须 参数说明 fullPath string 是 文件全路径 modifiedTime integer 是 更新时间 appVersion string 是 app版本 shortUrl string 是 下载短链接 downloadUrl string 否 下载链接 fullName string 是 文件全名 path string 是 文件路径 folder boolean 是 是否文件夹 size integer 是 文件大小(byte) name string 是 文件名 artifactoryType ENUM(PIPELINE, CUSTOM_DIR, ) 是 仓库类型 properties List版本仓库-元数据> 是 元数据 md5 string 否 MD5 版本仓库-元数据 参数名称 参数类型 必须 参数说明 value string 是 元数据值 key string 是 元数据键 WebhookInfo 参数名称 参数类型 必须 参数说明 webhookBranch string 否 webhookBranch webhookEventType string 否 webhookEventType webhookMessage string 否 webhookMessage webhookMergeCommitSha string 否 webhookMergeCommitSha webhookRepoUrl string 否 webhookRepoUrl webhookCommitId string 否 webhookCommitId webhookType string 否 webhookType 插件错误信息 参数名称 参数类型 必须 参数说明 atomCode string 否 插件编号 errorType integer 否 错误类型 errorCode integer 是 错误码 taskName string 否 插件名称 taskId string 否 插件ID errorMsg string 否 错误信息 "},"reference/rest-api/build-resources-1/view-build-status-information.html":{"url":"reference/rest-api/build-resources-1/view-build-status-information.html","title":"查看构建状态信息","keywords":"","body":"查看构建状态信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/status 资源描述 查看构建状态信息 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型带构建变量的历史构建模型 请求样例 curl -X GET '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"buildNum\" : 0, \"buildNumAlias\" : \"String\", \"stageStatus\" : [ { \"name\" : \"String\", \"stageId\" : \"String\" } ], \"remark\" : \"String\", \"buildMsg\" : \"String\", \"startTime\" : 0, \"id\" : \"String\", \"recommendVersion\" : \"String\", \"retry\" : true, \"variables\" : { \"string\" : \"string\" }, \"totalTime\" : 0, \"webHookType\" : \"String\", \"mobileStart\" : true, \"startType\" : \"String\", \"trigger\" : \"String\", \"userId\" : \"String\", \"deleteReason\" : \"String\", \"queueTime\" : 0, \"pipelineVersion\" : 0, \"buildParameters\" : [ { \"valueType\" : \"ENUM\", \"readOnly\" : true, \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\" } ], \"material\" : [ { \"newCommitId\" : \"String\", \"aliasName\" : \"String\", \"commitTimes\" : 0, \"branchName\" : \"String\", \"url\" : \"String\", \"newCommitComment\" : \"String\" } ], \"currentTimestamp\" : 0, \"artifactList\" : [ { \"fullPath\" : \"String\", \"modifiedTime\" : 0, \"appVersion\" : \"String\", \"shortUrl\" : \"String\", \"downloadUrl\" : \"String\", \"fullName\" : \"String\", \"path\" : \"String\", \"folder\" : true, \"size\" : 0, \"name\" : \"String\", \"artifactoryType\" : \"ENUM\", \"properties\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"md5\" : \"String\" } ], \"endTime\" : 0, \"webhookInfo\" : { \"webhookBranch\" : \"String\", \"webhookEventType\" : \"String\", \"webhookMessage\" : \"String\", \"webhookMergeCommitSha\" : \"String\", \"webhookRepoUrl\" : \"String\", \"webhookCommitId\" : \"String\", \"webhookType\" : \"String\" }, \"errorInfoList\" : [ { \"atomCode\" : \"String\", \"errorType\" : 0, \"errorCode\" : 0, \"taskName\" : \"String\", \"taskId\" : \"String\", \"errorMsg\" : \"String\" } ], \"status\" : \"String\", \"executeTime\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型带构建变量的历史构建模型 参数名称 参数类型 必须 参数说明 data 带构建变量的历史构建模型 否 数据 message string 否 错误信息 status integer 是 状态码 带构建变量的历史构建模型 参数名称 参数类型 必须 参数说明 buildNum integer 是 构建号 buildNumAlias string 否 自定义构建版本号 stageStatus List历史构建阶段状态> 是 各阶段状态 remark string 否 备注 buildMsg string 否 构建信息 startTime integer 是 开始时间 id string 是 构建ID recommendVersion string 否 推荐版本号 retry boolean 否 是否重试 variables object 是 构建变量集合 totalTime integer 否 总耗时(秒) webHookType string 否 WebHookType mobileStart boolean 否 mobileStart startType string 否 启动类型(新) trigger string 是 触发条件 userId string 是 启动用户 deleteReason string 是 结束原因 queueTime integer 否 排队于 pipelineVersion integer 是 编排文件版本号 buildParameters List构建模型-构建参数> 否 启动参数 material ListPipelineBuildMaterial> 否 原材料 currentTimestamp integer 是 服务器当前时间戳 artifactList List版本仓库-文件信息> 否 构件列表 endTime integer 是 结束时间 webhookInfo WebhookInfo 否 webhookInfo errorInfoList List插件错误信息> 否 流水线任务执行错误 status string 是 状态 executeTime integer 否 运行耗时(秒，不包括人工审核时间) 历史构建阶段状态 参数名称 参数类型 必须 参数说明 name string 是 阶段名称 stageId string 是 阶段ID 构建模型-构建参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, ENUM, DATE, LONG, BOOLEAN, SVN_TAG, GIT_REF, MULTIPLE, CODE_LIB, CONTAINER_TYPE, ARTIFACTORY, SUB_PIPELINE, CUSTOM_FILE, PASSWORD, TEMPORARY, ) 否 元素值类型 readOnly boolean 否 是否只读 value object 是 元素值名称-显示用 key string 是 元素值ID-标识符 PipelineBuildMaterial 参数名称 参数类型 必须 参数说明 newCommitId string 否 newCommitId aliasName string 否 aliasName commitTimes integer 否 commitTimes branchName string 否 branchName url string 否 url newCommitComment string 否 newCommitComment 版本仓库-文件信息 参数名称 参数类型 必须 参数说明 fullPath string 是 文件全路径 modifiedTime integer 是 更新时间 appVersion string 是 app版本 shortUrl string 是 下载短链接 downloadUrl string 否 下载链接 fullName string 是 文件全名 path string 是 文件路径 folder boolean 是 是否文件夹 size integer 是 文件大小(byte) name string 是 文件名 artifactoryType ENUM(PIPELINE, CUSTOM_DIR, ) 是 仓库类型 properties List版本仓库-元数据> 是 元数据 md5 string 否 MD5 版本仓库-元数据 参数名称 参数类型 必须 参数说明 value string 是 元数据值 key string 是 元数据键 WebhookInfo 参数名称 参数类型 必须 参数说明 webhookBranch string 否 webhookBranch webhookEventType string 否 webhookEventType webhookMessage string 否 webhookMessage webhookMergeCommitSha string 否 webhookMergeCommitSha webhookRepoUrl string 否 webhookRepoUrl webhookCommitId string 否 webhookCommitId webhookType string 否 webhookType 插件错误信息 参数名称 参数类型 必须 参数说明 atomCode string 否 插件编号 errorType integer 否 错误类型 errorCode integer 是 错误码 taskName string 否 插件名称 taskId string 否 插件ID errorMsg string 否 错误信息 "},"reference/rest-api/build-resources-1/build-details.html":{"url":"reference/rest-api/build-resources-1/build-details.html","title":"构建详情","keywords":"","body":"构建详情 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/detail 资源描述 构建详情 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道号，默认为BS Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID pipelineId string 是 流水线ID buildId string 是 构建ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型构建详情-构建信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"buildNum\" : 0, \"cancelUserId\" : \"String\", \"trigger\" : \"String\", \"userId\" : \"String\", \"pipelineId\" : \"String\", \"pipelineName\" : \"String\", \"latestVersion\" : 0, \"currentTimestamp\" : 0, \"curVersion\" : 0, \"startTime\" : 0, \"model\" : { \"latestVersion\" : 0, \"pipelineCreator\" : \"String\", \"name\" : \"String\", \"stages\" : [ { \"canRetry\" : true, \"checkIn\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"customBuildEnv\" : { \"string\" : \"string\" }, \"finally\" : true, \"name\" : \"String\", \"containers\" : [ { \"canRetry\" : true, \"elementElapsed\" : 0, \"startEpoch\" : 0, \"executeCount\" : 0, \"jobId\" : \"String\", \"containPostTaskFlag\" : true, \"systemElapsed\" : 0, \"elements\" : [ { \"canRetry\" : true, \"errorType\" : \"String\", \"errorCode\" : 0, \"canSkip\" : true, \"startEpoch\" : 0, \"version\" : \"String\", \"executeCount\" : 0, \"templateModify\" : true, \"elementEnable\" : true, \"errorMsg\" : \"String\", \"elapsed\" : 0, \"atomCode\" : \"String\", \"additionalOptions\" : { \"enableCustomEnv\" : true, \"continueWhenFailed\" : true, \"manualRetry\" : true, \"pauseBeforeExec\" : true, \"retryCount\" : 0, \"manualSkip\" : true, \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"otherTask\" : \"String\", \"customEnv\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"retryWhenFailed\" : true, \"enable\" : true, \"subscriptionPauseUser\" : \"String\", \"customCondition\" : \"String\", \"runCondition\" : \"ENUM\", \"elementPostInfo\" : { \"parentElementId\" : \"String\", \"postCondition\" : \"String\", \"parentElementJobIndex\" : 0, \"parentElementName\" : \"String\", \"postEntryParam\" : \"String\" } }, \"taskAtom\" : \"String\", \"name\" : \"String\", \"id\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"name\" : \"String\", \"id\" : \"String\", \"startVMStatus\" : \"String\", \"containerId\" : \"String\", \"classType\" : \"String\", \"status\" : \"String\" } ], \"id\" : \"String\", \"stageControlOption\" : { \"triggered\" : true, \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"enable\" : true, \"customCondition\" : \"String\", \"triggerUsers\" : \"string\", \"reviewDesc\" : \"String\", \"runCondition\" : \"ENUM\", \"timeout\" : 0, \"customVariables\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ] }, \"checkOut\" : { \"ruleIds\" : \"string\", \"reviewParams\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"manualTrigger\" : true, \"checkTimes\" : 0, \"reviewDesc\" : \"String\", \"reviewGroups\" : [ { \"name\" : \"String\", \"id\" : \"String\", \"suggest\" : \"String\", \"params\" : [ { \"valueType\" : \"ENUM\", \"options\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"chineseName\" : \"String\", \"value\" : { \"string\" : \"string\" }, \"key\" : \"String\", \"required\" : true, \"desc\" : \"String\" } ], \"reviewers\" : \"string\", \"operator\" : \"String\", \"reviewTime\" : 0, \"status\" : \"String\" } ], \"timeout\" : 0, \"status\" : \"String\" }, \"fastKill\" : true } ], \"templateId\" : \"String\", \"srcTemplateId\" : \"String\", \"tips\" : \"String\", \"desc\" : \"String\", \"labels\" : \"string\", \"instanceFromTemplate\" : true }, \"id\" : \"String\", \"endTime\" : 0, \"latestBuildNum\" : 0, \"status\" : \"String\", \"executeTime\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型构建详情-构建信息 参数名称 参数类型 必须 参数说明 data 构建详情-构建信息 否 数据 message string 否 错误信息 status integer 是 状态码 构建详情-构建信息 参数名称 参数类型 必须 参数说明 buildNum integer 是 构建号 cancelUserId string 否 取消构建的用户 trigger string 是 触发条件 userId string 是 启动用户 pipelineId string 是 流水线ID pipelineName string 是 流水线名称 latestVersion integer 是 流水线当前最新版本号 currentTimestamp integer 是 服务器当前时间戳 curVersion integer 是 本次执行的编排版本号 startTime integer 是 Start time model 流水线模型-创建信息 是 Build Model id string 是 构建ID endTime integer 否 End time latestBuildNum integer 是 最新一次的构建buildNo status string 是 Build status executeTime integer 是 执行耗时（排除系统耗时） 流水线模型-创建信息 参数名称 参数类型 必须 参数说明 latestVersion integer 否 提交时流水线最新版本号 pipelineCreator string 否 创建人 name string 是 名称 stages List流水线模型-阶段> 是 阶段集合 templateId string 否 模板ID srcTemplateId string 否 源模版ID tips string 否 提示 desc string 否 描述 labels List 否 标签 instanceFromTemplate boolean 否 是否从模板中实例化出来的 流水线模型-阶段 参数名称 参数类型 必须 参数说明 canRetry boolean 否 当前Stage是否能重试 checkIn StagePauseCheck 否 当前Stage是否能重试 customBuildEnv object 否 用户自定义环境变量 finally boolean 否 标识是否为FinallyStage，每个Model只能包含一个FinallyStage，并且处于最后位置 name string 是 阶段名称 containers List流水线模型-多态基类> 是 容器集合 id string 否 阶段ID stageControlOption StageControlOption 是 流程控制选项 checkOut StagePauseCheck 否 当前Stage是否能重试 fastKill boolean 否 是否启用容器失败快速终止阶段 StagePauseCheck 参数名称 参数类型 必须 参数说明 ruleIds List 否 ruleIds reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger checkTimes integer 否 checkTimes reviewDesc string 否 reviewDesc reviewGroups ListStage审核组信息> 否 reviewGroups timeout integer 否 timeout status string 否 status 人工审核-自定义参数 参数名称 参数类型 必须 参数说明 valueType ENUM(STRING, TEXTAREA, BOOLEAN, ENUM, MULTIPLE, ) 否 参数类型 options List人工审核-自定义参数-下拉框列表剑> 否 下拉框列表 chineseName string 否 中文名称 value object 是 参数内容 key string 是 参数名 required boolean 是 是否必填 desc string 否 参数描述 人工审核-自定义参数-下拉框列表剑 参数名称 参数类型 必须 参数说明 value string 是 参数内容 key string 是 参数名 Stage审核组信息 参数名称 参数类型 必须 参数说明 name string 是 审核组名称 id string 否 审核组ID(后台生成) suggest string 否 审核建议 params List人工审核-自定义参数> 否 审核传入变量 reviewers List 是 审核人员 operator string 否 审核操作人 reviewTime integer 否 审核操作时间 status string 否 审核结果（枚举） 流水线模型-多态基类 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry elementElapsed integer 否 elementElapsed startEpoch integer 否 startEpoch executeCount integer 否 executeCount jobId string 否 jobId containPostTaskFlag boolean 否 containPostTaskFlag systemElapsed integer 否 systemElapsed elements ListElement> 否 elements name string 否 name id string 否 id startVMStatus string 否 startVMStatus containerId string 否 containerId classType string 否 classType status string 否 status Element 参数名称 参数类型 必须 参数说明 canRetry boolean 否 canRetry errorType string 否 errorType errorCode integer 否 errorCode canSkip boolean 否 canSkip startEpoch integer 否 startEpoch version string 否 version executeCount integer 否 executeCount templateModify boolean 否 templateModify elementEnable boolean 否 elementEnable errorMsg string 否 errorMsg elapsed integer 否 elapsed atomCode string 否 atomCode additionalOptions ElementAdditionalOptions 否 additionalOptions taskAtom string 否 taskAtom name string 否 name id string 否 id classType string 否 classType status string 否 status ElementAdditionalOptions 参数名称 参数类型 必须 参数说明 enableCustomEnv boolean 否 enableCustomEnv continueWhenFailed boolean 否 continueWhenFailed manualRetry boolean 否 manualRetry pauseBeforeExec boolean 否 pauseBeforeExec retryCount integer 否 retryCount manualSkip boolean 否 manualSkip timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables otherTask string 否 otherTask customEnv ListNameAndValue> 否 customEnv retryWhenFailed boolean 否 retryWhenFailed enable boolean 否 enable subscriptionPauseUser string 否 subscriptionPauseUser customCondition string 否 customCondition runCondition ENUM(PRE_TASK_SUCCESS, PRE_TASK_FAILED_BUT_CANCEL, PRE_TASK_FAILED_EVEN_CANCEL, PRE_TASK_FAILED_ONLY, OTHER_TASK_RUNNING, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, PARENT_TASK_CANCELED_OR_TIMEOUT, PARENT_TASK_FINISH, ) 否 runCondition elementPostInfo 元素post信息 否 elementPostInfo NameAndValue 参数名称 参数类型 必须 参数说明 value string 否 value key string 否 key 元素post信息 参数名称 参数类型 必须 参数说明 parentElementId string 否 父元素ID postCondition string 否 执行条件 parentElementJobIndex integer 否 父元素在job中的位置 parentElementName string 否 父元素名称 postEntryParam string 否 入口参数 StageControlOption 参数名称 参数类型 必须 参数说明 triggered boolean 否 triggered reviewParams List人工审核-自定义参数> 否 reviewParams manualTrigger boolean 否 manualTrigger enable boolean 否 enable customCondition string 否 customCondition triggerUsers List 否 triggerUsers reviewDesc string 否 reviewDesc runCondition ENUM(AFTER_LAST_FINISHED, CUSTOM_VARIABLE_MATCH, CUSTOM_VARIABLE_MATCH_NOT_RUN, CUSTOM_CONDITION_MATCH, ) 否 runCondition timeout integer 否 timeout customVariables ListNameAndValue> 否 customVariables "},"reference/rest-api/plugin-resources/":{"url":"reference/rest-api/plugin-resources/","title":"OPENAPI-插件资源","keywords":"","body":"OPENAPI-插件资源 "},"reference/rest-api/plugin-resources/install-the-plugin-to-the-project.html":{"url":"reference/rest-api/plugin-resources/install-the-plugin-to-the-project.html","title":"安装插件到项目","keywords":"","body":"安装插件到项目 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/atoms/{atomCode}/install 资源描述 安装插件到项目 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 channelCode string 否 渠道类型 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 安装插件到项目请求报文 是 安装插件到项目请求报文体 Path参数 参数名称 参数类型 必须 参数说明 默认值 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X POST '[请替换为API地址栏请求地址]?channelCode={channelCode}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 安装插件到项目请求报文 参数名称 参数类型 必须 参数说明 atomCode string 是 插件标识 projectCode List 是 项目标识 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/plugin-resources/get-plug-in-statistics-according-to-the-plug-in-code.html":{"url":"reference/rest-api/plugin-resources/get-plug-in-statistics-according-to-the-plug-in-code.html","title":"根据插件代码获取插件统计信息","keywords":"","body":"根据插件代码获取插件统计信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/atoms/{atomCode}/statistic 资源描述 根据插件代码获取插件统计信息 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 atomCode string 是 插件代码 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型统计信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"score\" : \"parse error\", \"downloads\" : 0, \"successRate\" : \"parse error\", \"recentExecuteNum\" : 0, \"pipelineCnt\" : 0, \"commentCnt\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型统计信息 参数名称 参数类型 必须 参数说明 data 统计信息 否 数据 message string 否 错误信息 status integer 是 状态码 统计信息 参数名称 参数类型 必须 参数说明 score number 否 星级评分 downloads integer 否 下载量 successRate number 否 成功率 recentExecuteNum integer 否 最近执行次数 pipelineCnt integer 否 流水线个数 commentCnt integer 否 评论量 "},"reference/rest-api/plugin-resources/get-the-details-of-the-pipeline-used-according-to-the-plug-in-code.html":{"url":"reference/rest-api/plugin-resources/get-the-details-of-the-pipeline-used-according-to-the-plug-in-code.html","title":"根据插件代码获取使用的流水线详情","keywords":"","body":"根据插件代码获取使用的流水线详情 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/atoms/{atomCode}/pipelines 资源描述 根据插件代码获取使用的流水线详情 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 第几页 1 pageSize integer 否 每页多少条 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 atomCode string 是 插件代码 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型流水线信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"pipelineName\" : \"String\", \"deptName\" : \"String\", \"projectCode\" : \"String\", \"bgName\" : \"String\", \"projectName\" : \"String\", \"pipelineId\" : \"String\", \"atomVersion\" : \"String\", \"centerName\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型流水线信息 参数名称 参数类型 必须 参数说明 data 分页数据包装模型流水线信息 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型流水线信息 参数名称 参数类型 必须 参数说明 records List 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 流水线信息 参数名称 参数类型 必须 参数说明 pipelineName string 是 流水线名称 deptName string 否 所属部门 projectCode string 是 项目标识 bgName string 否 所属BG projectName string 否 所属项目 pipelineId string 是 流水线ID atomVersion string 否 流水线使用的插件版本 centerName string 否 所属中心 "},"reference/rest-api/plugin-resources/get-plug-in-details-according-to-the-plug-in-code.html":{"url":"reference/rest-api/plugin-resources/get-plug-in-details-according-to-the-plug-in-code.html","title":"根据插件代码获取插件详细信息","keywords":"","body":"根据插件代码获取插件详细信息 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/atoms/{atomCode} 资源描述 根据插件代码获取插件详细信息 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 atomCode string 是 插件代码 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型AtomVersion 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"versionContent\" : \"String\", \"flag\" : true, \"modifier\" : \"String\", \"description\" : \"String\", \"language\" : \"String\", \"yamlFlag\" : true, \"atomId\" : \"String\", \"atomStatus\" : \"String\", \"initProjectCode\" : \"String\", \"codeSrc\" : \"String\", \"htmlTemplateVersion\" : \"String\", \"projectCode\" : \"String\", \"releaseType\" : \"String\", \"pkgName\" : \"String\", \"jobType\" : \"String\", \"atomType\" : \"String\", \"classifyName\" : \"String\", \"userCommentInfo\" : { \"commentFlag\" : true, \"commentId\" : \"String\" }, \"summary\" : \"String\", \"recommendFlag\" : true, \"editFlag\" : true, \"creator\" : \"String\", \"defaultFlag\" : true, \"docsLink\" : \"String\", \"os\" : \"string\", \"updateTime\" : \"String\", \"privateReason\" : \"String\", \"version\" : \"String\", \"logoUrl\" : \"String\", \"atomCode\" : \"String\", \"labelList\" : [ { \"createTime\" : 0, \"labelType\" : \"String\", \"updateTime\" : 0, \"id\" : \"String\", \"labelName\" : \"String\", \"labelCode\" : \"String\" } ], \"createTime\" : \"String\", \"visibilityLevel\" : \"String\", \"frontendType\" : \"ENUM\", \"name\" : \"String\", \"repositoryAuthorizer\" : \"String\", \"publisher\" : \"String\", \"classifyCode\" : \"String\", \"category\" : \"String\", \"dailyStatisticList\" : [ { \"dailySuccessNum\" : 0, \"statisticsTime\" : \"String\", \"dailyFailNum\" : 0, \"dailyFailRate\" : \"parse error\", \"dailyDownloads\" : 0, \"totalDownloads\" : 0, \"dailySuccessRate\" : \"parse error\", \"dailyFailDetail\" : { \"string\" : \"string\" } } ] }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型AtomVersion 参数名称 参数类型 必须 参数说明 data AtomVersion 否 数据 message string 否 错误信息 status integer 是 状态码 AtomVersion 参数名称 参数类型 必须 参数说明 versionContent string 否 版本日志 flag boolean 否 是否可安装标识 modifier string 否 修改人 description string 否 插件描述 language string 否 开发语言 yamlFlag boolean 否 yaml可用标识 true：是，false：否 atomId string 否 插件ID atomStatus string 是 插件状态 initProjectCode string 否 插件的初始化项目 codeSrc string 否 代码库链接 htmlTemplateVersion string 否 前端渲染模板版本（1.0代表历史存量插件渲染模板版本） projectCode string 否 插件的调试项目 releaseType string 否 发布类型 pkgName string 否 插件包名 jobType string 否 适用Job类型 atomType string 否 插件类型 classifyName string 否 插件分类名称 userCommentInfo 用户评论信息 否 用户评论信息 summary string 否 插件简介 recommendFlag boolean 否 是否推荐标识 true：推荐，false：不推荐 editFlag boolean 否 是否可编辑 creator string 否 创建人 defaultFlag boolean 否 是否为默认插件（默认插件默认所有项目可见）true：默认插件 false：普通插件 docsLink string 否 插件说明文档链接 os List 否 操作系统 updateTime string 否 修改时间 privateReason string 否 插件代码库不开源原因 version string 否 版本号 logoUrl string 否 logo地址 atomCode string 否 插件标识 labelList List 否 标签列表 createTime string 否 创建时间 visibilityLevel string 否 项目可视范围,PRIVATE:私有 LOGIN_PUBLIC:登录用户开源 frontendType ENUM(HISTORY, NORMAL, SPECIAL, ) 否 前端UI渲染方式 name string 否 插件名称 repositoryAuthorizer string 否 插件代码库授权者 publisher string 否 发布者 classifyCode string 否 插件分类code category string 否 插件范畴 dailyStatisticList List 否 每日统计信息列表 用户评论信息 参数名称 参数类型 必须 参数说明 commentFlag boolean 是 是否已评论 true:是，false:否 commentId string 否 评论ID 标签信息 参数名称 参数类型 必须 参数说明 createTime integer 否 创建日期 labelType string 是 类别 ATOM:插件 TEMPLATE:模板 IMAGE:镜像 IDE_ATOM:IDE插件 updateTime integer 否 更新日期 id string 是 标签ID labelName string 是 标签名称 labelCode string 是 标签代码 每日统计信息 参数名称 参数类型 必须 参数说明 dailySuccessNum integer 否 每日执行成功数 statisticsTime string 否 统计时间，格式yyyy-MM-dd HH:mm:ss dailyFailNum integer 否 每日执行失败数 dailyFailRate number 否 每日执行失败率 dailyDownloads integer 否 每日下载量 totalDownloads integer 否 总下载量 dailySuccessRate number 否 每日执行成功率 dailyFailDetail object 否 每日执行失败详情 "},"reference/rest-api/build-product-resources/":{"url":"reference/rest-api/build-product-resources/","title":"OPENAPI-构建产物资源","keywords":"","body":"OPENAPI-构建产物资源 "},"reference/rest-api/build-product-resources/get-user-download-link.html":{"url":"reference/rest-api/build-product-resources/get-user-download-link.html","title":"获取用户下载链接","keywords":"","body":"获取用户下载链接 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/artifactories/userDownloadUrl 资源描述 获取用户下载链接 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 artifactoryType string 是 版本仓库类型 path string 是 路径 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型版本仓库-下载信息 请求样例 curl -X GET '[请替换为上方API地址栏请求地址]?artifactoryType={artifactoryType}&amp;path={path}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"url2\" : \"String\", \"url\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型版本仓库-下载信息 参数名称 参数类型 必须 参数说明 data 版本仓库-下载信息 否 数据 message string 否 错误信息 status integer 是 状态码 版本仓库-下载信息 参数名称 参数类型 必须 参数说明 url2 string 否 下载链接2 url string 是 下载链接 "},"reference/rest-api/build-product-resources/get-files-based-on-metadata.html":{"url":"reference/rest-api/build-product-resources/get-files-based-on-metadata.html","title":"根据元数据获取文件","keywords":"","body":"根据元数据获取文件 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/artifactories 资源描述 根据元数据获取文件 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 pipelineId string 是 流水线ID buildId string 是 构建ID page integer 否 第几页 1 pageSize integer 否 每页多少条(不传默认全部返回) 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型版本仓库-文件信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]?pipelineId={pipelineId}&amp;buildId={buildId}&amp;page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"fullPath\" : \"String\", \"modifiedTime\" : 0, \"appVersion\" : \"String\", \"shortUrl\" : \"String\", \"downloadUrl\" : \"String\", \"fullName\" : \"String\", \"path\" : \"String\", \"folder\" : true, \"size\" : 0, \"name\" : \"String\", \"artifactoryType\" : \"ENUM\", \"properties\" : [ { \"value\" : \"String\", \"key\" : \"String\" } ], \"md5\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型版本仓库-文件信息 参数名称 参数类型 必须 参数说明 data 分页数据包装模型版本仓库-文件信息 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型版本仓库-文件信息 参数名称 参数类型 必须 参数说明 records List 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 版本仓库-文件信息 参数名称 参数类型 必须 参数说明 fullPath string 是 文件全路径 modifiedTime integer 是 更新时间 appVersion string 是 app版本 shortUrl string 是 下载短链接 downloadUrl string 否 下载链接 fullName string 是 文件全名 path string 是 文件路径 folder boolean 是 是否文件夹 size integer 是 文件大小(byte) name string 是 文件名 artifactoryType ENUM(PIPELINE, CUSTOM_DIR, ) 是 仓库类型 properties List 是 元数据 md5 string 否 MD5 版本仓库-元数据 参数名称 参数类型 必须 参数说明 value string 是 元数据值 key string 是 元数据键 "},"reference/rest-api/build-product-hosting-task-resources/":{"url":"reference/rest-api/build-product-hosting-task-resources/","title":"OPENAPI-构建产物托管任务资源","keywords":"","body":"OPENAPI-构建产物托管任务资源 "},"reference/rest-api/build-product-hosting-task-resources/clean-up-file-hosting-tasks.html":{"url":"reference/rest-api/build-product-hosting-task-resources/clean-up-file-hosting-tasks.html","title":"清理文件托管任务","keywords":"","body":"清理文件托管任务 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/artifactory/fileTask/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/tasks/{taskId}/clear 资源描述 清理文件托管任务 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId pipelineId string 是 pipelineId buildId string 是 buildId taskId string 是 taskId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为上方API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-product-hosting-task-resources/create-file-hosting-task.html":{"url":"reference/rest-api/build-product-hosting-task-resources/create-file-hosting-task.html","title":"创建文件托管任务","keywords":"","body":"创建文件托管任务 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/artifactory/fileTask/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/create 资源描述 创建文件托管任务 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 创建文件托管任务请求 是 taskId Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId pipelineId string 是 pipelineId buildId string 是 buildId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型String 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : \"String\", \"message\" : \"String\", \"status\" : 0 } 创建文件托管任务请求 参数名称 参数类型 必须 参数说明 path string 是 文件路径 fileType ENUM(BK_ARCHIVE, BK_CUSTOM, BK_REPORT, BK_PLUGIN_FE, ) 是 文件类型 数据返回包装模型String 参数名称 参数类型 必须 参数说明 data string 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-product-hosting-task-resources/query-file-hosting-task-status.html":{"url":"reference/rest-api/build-product-hosting-task-resources/query-file-hosting-task-status.html","title":"查询文件托管任务状态","keywords":"","body":"查询文件托管任务状态 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/artifactory/fileTask/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/tasks/{taskId}/status 资源描述 查询文件托管任务状态 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId pipelineId string 是 pipelineId buildId string 是 buildId taskId string 是 taskId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型版本仓库-文件托管任务信息 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"path\" : \"String\", \"ip\" : \"String\", \"id\" : \"String\", \"status\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型版本仓库-文件托管任务信息 参数名称 参数类型 必须 参数说明 data 版本仓库-文件托管任务信息 否 数据 message string 否 错误信息 status integer 是 状态码 版本仓库-文件托管任务信息 参数名称 参数类型 必须 参数说明 path string 是 文件绝对路径 ip string 是 文件所在机器IP id string 是 任务Id status integer 是 任务状态 "},"reference/rest-api/build-machine-management/":{"url":"reference/rest-api/build-machine-management/","title":"OPENAPI-环境管理-构建机管理","keywords":"","body":"OPENAPI-环境管理-构建机管理 "},"reference/rest-api/build-machine-management/get-the-list-of-project-nodes-according-to-hashid.html":{"url":"reference/rest-api/build-machine-management/get-the-list-of-project-nodes-according-to-hashid.html","title":"根据hashId获取项目节点列表(不校验权限)","keywords":"","body":"根据hashId获取项目节点列表(不校验权限) 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/environment/projects/{projectId}/nodes/listRawByNodeHashIds 资源描述 根据hashId获取项目节点列表(不校验权限) 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 节点 hashIds Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List节点信息(权限) 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"pipelineRefCount\" : 0, \"nodeHashId\" : \"String\", \"displayName\" : \"String\", \"ip\" : \"String\", \"canEdit\" : true, \"nodeStatus\" : \"String\", \"nodeType\" : \"String\", \"osName\" : \"String\", \"agentStatus\" : true, \"operator\" : \"String\", \"canUse\" : true, \"bakOperator\" : \"String\", \"lastBuildTime\" : \"String\", \"lastModifyUser\" : \"String\", \"createTime\" : \"String\", \"lastModifyTime\" : \"String\", \"name\" : \"String\", \"bizId\" : 0, \"canDelete\" : true, \"nodeId\" : \"String\", \"createdUser\" : \"String\", \"gateway\" : \"String\", \"agentHashId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List节点信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 节点信息(权限) 参数名称 参数类型 必须 参数说明 pipelineRefCount integer 否 流水线Job引用数 nodeHashId string 是 环境 HashId displayName string 否 显示名称 ip string 是 IP canEdit boolean 否 是否可以编辑 nodeStatus string 是 节点状态 nodeType string 是 节点类型 osName string 否 操作系统 agentStatus boolean 是 agent状态 operator string 否 责任人 canUse boolean 否 是否可以使用 bakOperator string 否 备份责任人 lastBuildTime string 否 流水线Job引用数 lastModifyUser string 否 最后修改人 createTime string 否 创建/导入时间 lastModifyTime string 否 最后修改时间 name string 是 节点名称 bizId integer 否 所属业务, 默认-1表示没有绑定业务 canDelete boolean 否 是否可以删除 nodeId string 是 节点 Id createdUser string 是 创建人 gateway string 否 网关地域 agentHashId string 否 agent hash id "},"reference/rest-api/build-machine-management/get-the-list-of-nodes-in-the-specified-environment-of-the-specified-project-according-to-the-hashid.html":{"url":"reference/rest-api/build-machine-management/get-the-list-of-nodes-in-the-specified-environment-of-the-specified-project-according-to-the-hashid.html","title":"根据环境的hashId获取指定项目指定环境下节点列表(不校验权限)","keywords":"","body":"根据环境的hashId获取指定项目指定环境下节点列表(不校验权限) 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/environment/projects/{projectId}/nodes/listRawByEnvHashIds 资源描述 根据环境的hashId获取指定项目指定环境下节点列表(不校验权限) 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 节点 hashIds Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型MapStringList节点信息(权限) 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"string\" : \"string\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型MapStringList节点信息(权限) 参数名称 参数类型 必须 参数说明 data object 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/build-machine-management/obtain-environmental-information-based-on-the-environmental-name.html":{"url":"reference/rest-api/build-machine-management/obtain-environmental-information-based-on-the-environmental-name.html","title":"根据环境名称获取环境信息(不校验权限)","keywords":"","body":"根据环境名称获取环境信息(不校验权限) 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/environment/projects/{projectId}/envs/listRawByEnvNames 资源描述 根据环境名称获取环境信息(不校验权限) 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 环境名称(s) Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List环境信息(权限) 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"updatedTime\" : 0, \"canEdit\" : true, \"envVars\" : [ { \"name\" : \"String\", \"secure\" : true, \"value\" : \"String\" } ], \"updatedUser\" : \"String\", \"canUse\" : true, \"envType\" : \"String\", \"name\" : \"String\", \"createdTime\" : 0, \"nodeCount\" : 0, \"canDelete\" : true, \"envHashId\" : \"String\", \"createdUser\" : \"String\", \"desc\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List环境信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 环境信息(权限) 参数名称 参数类型 必须 参数说明 updatedTime integer 是 更新时间 canEdit boolean 否 是否可以编辑 envVars List 是 环境变量 updatedUser string 是 更新人 canUse boolean 否 是否可以使用 envType string 是 环境类型（开发环境{DEV} name string 是 环境名称 createdTime integer 是 创建时间 nodeCount integer 否 节点数量 canDelete boolean 否 是否可以删除 envHashId string 是 环境 HashId createdUser string 是 创建人 desc string 是 环境描述 环境变量 参数名称 参数类型 必须 参数说明 name string 是 变量名 secure boolean 是 是否安全变量 value string 是 变量值 "},"reference/rest-api/build-machine-management/obtain-environmental-information-based-on-hashid-multiple.html":{"url":"reference/rest-api/build-machine-management/obtain-environmental-information-based-on-hashid-multiple.html","title":"根据hashId(多个)获取环境信息(不校验权限)","keywords":"","body":"根据hashId(多个)获取环境信息(不校验权限) 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/environment/projects/{projectId}/envs/listRawByEnvHashIds 资源描述 根据hashId(多个)获取环境信息(不校验权限) 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body array 是 环境 hashId(s) Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List环境信息(权限) 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"updatedTime\" : 0, \"canEdit\" : true, \"envVars\" : [ { \"name\" : \"String\", \"secure\" : true, \"value\" : \"String\" } ], \"updatedUser\" : \"String\", \"canUse\" : true, \"envType\" : \"String\", \"name\" : \"String\", \"createdTime\" : 0, \"nodeCount\" : 0, \"canDelete\" : true, \"envHashId\" : \"String\", \"createdUser\" : \"String\", \"desc\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List环境信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 环境信息(权限) 参数名称 参数类型 必须 参数说明 updatedTime integer 是 更新时间 canEdit boolean 否 是否可以编辑 envVars List 是 环境变量 updatedUser string 是 更新人 canUse boolean 否 是否可以使用 envType string 是 环境类型（开发环境{DEV} name string 是 环境名称 createdTime integer 是 创建时间 nodeCount integer 否 节点数量 canDelete boolean 否 是否可以删除 envHashId string 是 环境 HashId createdUser string 是 创建人 desc string 是 环境描述 环境变量 参数名称 参数类型 必须 参数说明 name string 是 变量名 secure boolean 是 是否安全变量 value string 是 变量值 "},"reference/rest-api/build-machine-management/get-the-status-of-the-specified-build-machine.html":{"url":"reference/rest-api/build-machine-management/get-the-status-of-the-specified-build-machine.html","title":"获取指定构建机状态","keywords":"","body":"获取指定构建机状态 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/environment/thirdPartAgent/nodes/status 资源描述 获取指定构建机状态 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 nodeHashId string 是 节点 hashId Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型节点信息(权限) 请求样例 curl -X GET '[请替换为API地址栏请求地址]?nodeHashId={nodeHashId}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"pipelineRefCount\" : 0, \"nodeHashId\" : \"String\", \"displayName\" : \"String\", \"ip\" : \"String\", \"canEdit\" : true, \"nodeStatus\" : \"String\", \"nodeType\" : \"String\", \"osName\" : \"String\", \"agentStatus\" : true, \"operator\" : \"String\", \"canUse\" : true, \"bakOperator\" : \"String\", \"lastBuildTime\" : \"String\", \"lastModifyUser\" : \"String\", \"createTime\" : \"String\", \"lastModifyTime\" : \"String\", \"name\" : \"String\", \"bizId\" : 0, \"canDelete\" : true, \"nodeId\" : \"String\", \"createdUser\" : \"String\", \"gateway\" : \"String\", \"agentHashId\" : \"String\" }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型节点信息(权限) 参数名称 参数类型 必须 参数说明 data 节点信息(权限) 否 数据 message string 否 错误信息 status integer 是 状态码 节点信息(权限) 参数名称 参数类型 必须 参数说明 pipelineRefCount integer 否 流水线Job引用数 nodeHashId string 是 环境 HashId displayName string 否 显示名称 ip string 是 IP canEdit boolean 否 是否可以编辑 nodeStatus string 是 节点状态 nodeType string 是 节点类型 osName string 否 操作系统 agentStatus boolean 是 agent状态 operator string 否 责任人 canUse boolean 否 是否可以使用 bakOperator string 否 备份责任人 lastBuildTime string 否 流水线Job引用数 lastModifyUser string 否 最后修改人 createTime string 否 创建/导入时间 lastModifyTime string 否 最后修改时间 name string 是 节点名称 bizId integer 否 所属业务, 默认-1表示没有绑定业务 canDelete boolean 否 是否可以删除 nodeId string 是 节点 Id createdUser string 是 创建人 gateway string 否 网关地域 agentHashId string 否 agent hash id "},"reference/rest-api/build-machine-management/get-the-list-of-third-party-build-machines-under-the-project.html":{"url":"reference/rest-api/build-machine-management/get-the-list-of-third-party-build-machines-under-the-project.html","title":"获取项目下第三方构建机列表","keywords":"","body":"获取项目下第三方构建机列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/environment/thirdPartAgent/nodeList 资源描述 获取项目下第三方构建机列表 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 projectId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List节点信息(权限) 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"pipelineRefCount\" : 0, \"nodeHashId\" : \"String\", \"displayName\" : \"String\", \"ip\" : \"String\", \"canEdit\" : true, \"nodeStatus\" : \"String\", \"nodeType\" : \"String\", \"osName\" : \"String\", \"agentStatus\" : true, \"operator\" : \"String\", \"canUse\" : true, \"bakOperator\" : \"String\", \"lastBuildTime\" : \"String\", \"lastModifyUser\" : \"String\", \"createTime\" : \"String\", \"lastModifyTime\" : \"String\", \"name\" : \"String\", \"bizId\" : 0, \"canDelete\" : true, \"nodeId\" : \"String\", \"createdUser\" : \"String\", \"gateway\" : \"String\", \"agentHashId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List节点信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 节点信息(权限) 参数名称 参数类型 必须 参数说明 pipelineRefCount integer 否 流水线Job引用数 nodeHashId string 是 环境 HashId displayName string 否 显示名称 ip string 是 IP canEdit boolean 否 是否可以编辑 nodeStatus string 是 节点状态 nodeType string 是 节点类型 osName string 否 操作系统 agentStatus boolean 是 agent状态 operator string 否 责任人 canUse boolean 否 是否可以使用 bakOperator string 否 备份责任人 lastBuildTime string 否 流水线Job引用数 lastModifyUser string 否 最后修改人 createTime string 否 创建/导入时间 lastModifyTime string 否 最后修改时间 name string 是 节点名称 bizId integer 否 所属业务, 默认-1表示没有绑定业务 canDelete boolean 否 是否可以删除 nodeId string 是 节点 Id createdUser string 是 创建人 gateway string 否 网关地域 agentHashId string 否 agent hash id "},"reference/rest-api/build-machine-management/get-the-list-of-servers-that-the-user-has-permission-to-use.html":{"url":"reference/rest-api/build-machine-management/get-the-list-of-servers-that-the-user-has-permission-to-use.html","title":"获取用户有权限使用的服务器列表","keywords":"","body":"获取用户有权限使用的服务器列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/environment/projects/{projectId}/nodes/listUsableServerNodes 资源描述 获取用户有权限使用的服务器列表 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List节点信息(权限) 请求样例 curl -X GET '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"pipelineRefCount\" : 0, \"nodeHashId\" : \"String\", \"displayName\" : \"String\", \"ip\" : \"String\", \"canEdit\" : true, \"nodeStatus\" : \"String\", \"nodeType\" : \"String\", \"osName\" : \"String\", \"agentStatus\" : true, \"operator\" : \"String\", \"canUse\" : true, \"bakOperator\" : \"String\", \"lastBuildTime\" : \"String\", \"lastModifyUser\" : \"String\", \"createTime\" : \"String\", \"lastModifyTime\" : \"String\", \"name\" : \"String\", \"bizId\" : 0, \"canDelete\" : true, \"nodeId\" : \"String\", \"createdUser\" : \"String\", \"gateway\" : \"String\", \"agentHashId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List节点信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 节点信息(权限) 参数名称 参数类型 必须 参数说明 pipelineRefCount integer 否 流水线Job引用数 nodeHashId string 是 环境 HashId displayName string 否 显示名称 ip string 是 IP canEdit boolean 否 是否可以编辑 nodeStatus string 是 节点状态 nodeType string 是 节点类型 osName string 否 操作系统 agentStatus boolean 是 agent状态 operator string 否 责任人 canUse boolean 否 是否可以使用 bakOperator string 否 备份责任人 lastBuildTime string 否 流水线Job引用数 lastModifyUser string 否 最后修改人 createTime string 否 创建/导入时间 lastModifyTime string 否 最后修改时间 name string 是 节点名称 bizId integer 否 所属业务, 默认-1表示没有绑定业务 canDelete boolean 否 是否可以删除 nodeId string 是 节点 Id createdUser string 是 创建人 gateway string 否 网关地域 agentHashId string 否 agent hash id "},"reference/rest-api/build-machine-management/get-build-node-information.html":{"url":"reference/rest-api/build-machine-management/get-build-node-information.html","title":"获取构建节点信息（扩展接口）","keywords":"","body":"获取构建节点信息（扩展接口） 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/environment/projects/{projectId}/nodes/extListNodes 资源描述 获取构建节点信息（扩展接口） 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List节点信息(权限) 请求样例 curl -X GET '[请替换API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"pipelineRefCount\" : 0, \"nodeHashId\" : \"String\", \"displayName\" : \"String\", \"ip\" : \"String\", \"canEdit\" : true, \"nodeStatus\" : \"String\", \"nodeType\" : \"String\", \"osName\" : \"String\", \"agentStatus\" : true, \"operator\" : \"String\", \"canUse\" : true, \"bakOperator\" : \"String\", \"lastBuildTime\" : \"String\", \"lastModifyUser\" : \"String\", \"createTime\" : \"String\", \"lastModifyTime\" : \"String\", \"name\" : \"String\", \"bizId\" : 0, \"canDelete\" : true, \"nodeId\" : \"String\", \"createdUser\" : \"String\", \"gateway\" : \"String\", \"agentHashId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List节点信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 节点信息(权限) 参数名称 参数类型 必须 参数说明 pipelineRefCount integer 否 流水线Job引用数 nodeHashId string 是 环境 HashId displayName string 否 显示名称 ip string 是 IP canEdit boolean 否 是否可以编辑 nodeStatus string 是 节点状态 nodeType string 是 节点类型 osName string 否 操作系统 agentStatus boolean 是 agent状态 operator string 否 责任人 canUse boolean 否 是否可以使用 bakOperator string 否 备份责任人 lastBuildTime string 否 流水线Job引用数 lastModifyUser string 否 最后修改人 createTime string 否 创建/导入时间 lastModifyTime string 否 最后修改时间 name string 是 节点名称 bizId integer 否 所属业务, 默认-1表示没有绑定业务 canDelete boolean 否 是否可以删除 nodeId string 是 节点 Id createdUser string 是 创建人 gateway string 否 网关地域 agentHashId string 否 agent hash id "},"reference/rest-api/build-machine-management/get-build-node-information-extension-ports.html":{"url":"reference/rest-api/build-machine-management/get-build-node-information-extension-ports.html","title":"获取构建节点信息（扩展接口）","keywords":"","body":"获取构建节点信息（扩展接口） 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/environment/projects/{projectId}/nodes/{nodeHashId}/listPipelineRef 资源描述 获取构建节点信息（扩展接口） 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 sortBy string 是 排序字段, pipelineName lastBuildTime sortDirection string 是 排序方向, ASC DESC Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID nodeHashId string 是 节点 hashId 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List第三方构建机流水线引用信息 请求样例 curl -X GET '[请替换API地址栏请求地址]?sortBy={sortBy}&amp;sortDirection={sortDirection}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"pipelineName\" : \"String\", \"jobName\" : \"String\", \"jobId\" : \"String\", \"agentId\" : 0, \"vmSeqId\" : \"String\", \"nodeHashId\" : \"String\", \"nodeId\" : 0, \"projectId\" : \"String\", \"agentHashId\" : \"String\", \"pipelineId\" : \"String\", \"lastBuildTime\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List第三方构建机流水线引用信息 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 第三方构建机流水线引用信息 参数名称 参数类型 必须 参数说明 pipelineName string 是 流水线名称 jobName string 是 Job Name jobId string 是 Job ID agentId integer 是 Agent ID vmSeqId string 是 Vm Seq ID nodeHashId string 是 Node Hash ID nodeId integer 是 Node ID projectId string 是 项目ID agentHashId string 是 Agent Hash ID pipelineId string 是 流水线ID lastBuildTime string 否 上次构建时间 "},"reference/rest-api/build-machine-management/get-the-list-of-environments-that-the-user-has-permission-to-use.html":{"url":"reference/rest-api/build-machine-management/get-the-list-of-environments-that-the-user-has-permission-to-use.html","title":"获取用户有权限使用的环境列表","keywords":"","body":"获取用户有权限使用的环境列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/environment/projects/{projectId}/envs/listUsableServerEnvs 资源描述 获取用户有权限使用的环境列表 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型List环境信息(权限) 请求样例 curl -X GET '[请替换API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"updatedTime\" : 0, \"canEdit\" : true, \"envVars\" : [ { \"name\" : \"String\", \"secure\" : true, \"value\" : \"String\" } ], \"updatedUser\" : \"String\", \"canUse\" : true, \"envType\" : \"String\", \"name\" : \"String\", \"createdTime\" : 0, \"nodeCount\" : 0, \"canDelete\" : true, \"envHashId\" : \"String\", \"createdUser\" : \"String\", \"desc\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型List环境信息(权限) 参数名称 参数类型 必须 参数说明 data List 否 数据 message string 否 错误信息 status integer 是 状态码 环境信息(权限) 参数名称 参数类型 必须 参数说明 updatedTime integer 是 更新时间 canEdit boolean 否 是否可以编辑 envVars List 是 环境变量 updatedUser string 是 更新人 canUse boolean 否 是否可以使用 envType string 是 环境类型（开发环境{DEV} name string 是 环境名称 createdTime integer 是 创建时间 nodeCount integer 否 节点数量 canDelete boolean 否 是否可以删除 envHashId string 是 环境 HashId createdUser string 是 创建人 desc string 是 环境描述 环境变量 参数名称 参数类型 必须 参数说明 name string 是 变量名 secure boolean 是 是否安全变量 value string 是 变量值 "},"reference/rest-api/quality-red-line-related/":{"url":"reference/rest-api/quality-red-line-related/","title":"QUALITY-质量红线相关","keywords":"","body":"QUALITY-质量红线相关 "},"reference/rest-api/quality-red-line-related/update-the-list-of-blocking-rules.html":{"url":"reference/rest-api/quality-red-line-related/update-the-list-of-blocking-rules.html","title":"更新拦截规则列表","keywords":"","body":"更新拦截规则列表 请求方法/请求路径 PUT /ms/openapi/api/apigw/v3/projects/{projectId}/quality/rules/{ruleHashId}/update 资源描述 更新拦截规则列表 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 规则更新请求 是 规则内容 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID ruleHashId string 是 规则ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X PUT '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 规则更新请求 参数名称 参数类型 必须 参数说明 templateRange List 是 生效的流水线模板id集合 auditUserList List 否 审核通知人员 range List 是 生效的流水线id集合 auditTimeoutMinutes integer 否 审核超时时间 notifyTypeList List 否 通知类型 notifyUserList List 否 通知人员名单 controlPointPosition string 是 控制点位置 name string 是 规则名称 notifyGroupList List 否 通知组名单 operation ENUM(END, AUDIT, ) 是 操作类型 indicatorIds ListCreateRequestIndicator> 是 指标类型 controlPoint string 是 控制点 gatewayId string 否 红线匹配的id desc string 是 规则描述 CreateRequestIndicator 参数名称 参数类型 必须 参数说明 threshold string 否 threshold hashId string 否 hashId operation string 否 operation 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/quality-red-line-related/create-blocking-rules.html":{"url":"reference/rest-api/quality-red-line-related/create-blocking-rules.html","title":"创建拦截规则","keywords":"","body":"创建拦截规则 请求方法/请求路径 POST /ms/openapi/api/apigw/v3/projects/{projectId}/quality/rules/create 资源描述 创建拦截规则 输入参数说明 Body参数 参数名称 参数类型 必须 参数说明 默认值 body 规则创建请求 是 规则内容 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型String 请求样例 curl -X POST '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : \"String\", \"message\" : \"String\", \"status\" : 0 } 规则创建请求 参数名称 参数类型 必须 参数说明 templateRange List 是 生效的流水线模板id集合 auditUserList List 否 审核通知人员 range List 是 生效的流水线id集合 auditTimeoutMinutes integer 否 审核超时时间 notifyTypeList List 否 通知类型 notifyUserList List 否 通知人员名单 controlPointPosition string 是 控制点位置 name string 是 规则名称 notifyGroupList List 否 通知组名单 operation ENUM(END, AUDIT, ) 是 操作类型 indicatorIds ListCreateRequestIndicator> 是 指标类型 controlPoint string 是 控制点 gatewayId string 否 红线匹配的id desc string 是 规则描述 CreateRequestIndicator 参数名称 参数类型 必须 参数说明 threshold string 否 threshold hashId string 否 hashId operation string 否 operation 数据返回包装模型String 参数名称 参数类型 必须 参数说明 data string 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/quality-red-line-related/get-the-list-of-blocking-rules.html":{"url":"reference/rest-api/quality-red-line-related/get-the-list-of-blocking-rules.html","title":"获取拦截规则列表","keywords":"","body":"获取拦截规则列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/quality/rules/list 资源描述 获取拦截规则列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 页目 1 pageSize integer 否 每页数目 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型质量红线-规则简要信息v2 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"pipelineCount\" : 0, \"pipelineExecuteCount\" : 0, \"indicatorList\" : [ { \"cnName\" : \"String\", \"name\" : \"String\", \"threshold\" : \"String\", \"hashId\" : \"String\", \"operation\" : \"String\" } ], \"enable\" : true, \"permissions\" : { \"canEnable\" : true, \"canEdit\" : true, \"canDelete\" : true }, \"name\" : \"String\", \"range\" : \"ENUM\", \"rangeSummary\" : [ { \"lackElements\" : \"string\", \"name\" : \"String\", \"id\" : \"String\", \"type\" : \"String\" } ], \"interceptTimes\" : 0, \"ruleHashId\" : \"String\", \"controlPoint\" : { \"cnName\" : \"String\", \"name\" : \"String\", \"hashId\" : \"String\" }, \"gatewayId\" : \"String\" } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型质量红线-规则简要信息v2 参数名称 参数类型 必须 参数说明 data 分页数据包装模型质量红线-规则简要信息v2 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型质量红线-规则简要信息v2 参数名称 参数类型 必须 参数说明 records List质量红线-规则简要信息v2> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 质量红线-规则简要信息v2 参数名称 参数类型 必须 参数说明 pipelineCount integer 是 流水线个数 pipelineExecuteCount integer 是 生效流水线执次数 indicatorList ListRuleSummaryIndicator> 是 指标列表 enable boolean 是 是否启用 permissions 质量红线-规则权限 是 规则权限 name string 是 规则名称 range ENUM(ANY, PART_BY_TAG, PART_BY_NAME, ) 是 生效范围 rangeSummary ListRuleRangeSummary> 是 包含模板和流水线的生效范围（新） interceptTimes integer 是 拦截次数 ruleHashId string 是 规则HashId controlPoint RuleSummaryControlPoint 是 控制点 gatewayId string 是 红线ID RuleSummaryIndicator 参数名称 参数类型 必须 参数说明 cnName string 否 cnName name string 否 name threshold string 否 threshold hashId string 否 hashId operation string 否 operation 质量红线-规则权限 参数名称 参数类型 必须 参数说明 canEnable boolean 是 是否可停用/启用 canEdit boolean 是 是否可编辑 canDelete boolean 是 是否可删除 RuleRangeSummary 参数名称 参数类型 必须 参数说明 lackElements List 否 lackElements name string 否 name id string 否 id type string 否 type RuleSummaryControlPoint 参数名称 参数类型 必须 参数说明 cnName string 否 cnName name string 否 name hashId string 否 hashId "},"reference/rest-api/quality-red-line-related/obtain-interception-records.html":{"url":"reference/rest-api/quality-red-line-related/obtain-interception-records.html","title":"获取拦截记录","keywords":"","body":"获取拦截记录 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/projects/{projectId}/quality/intercepts/list 资源描述 获取拦截记录 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 pipelineId string 否 流水线ID ruleHashId string 否 规则ID interceptResult string 否 状态 startTime integer 否 开始时间 endTime integer 否 截止时间 page integer 否 页号 1 pageSize integer 否 页数 20 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型分页数据包装模型质量红线-拦截记录 请求样例 curl -X GET '[请替换为API地址栏请求地址]?pipelineId={pipelineId}&amp;ruleHashId={ruleHashId}&amp;interceptResult={interceptResult}&amp;startTime={startTime}&amp;endTime={endTime}&amp;page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"checkTimes\" : 0, \"num\" : 0, \"buildId\" : \"String\", \"remark\" : \"String\", \"buildNo\" : \"String\", \"hashId\" : \"String\", \"pipelineId\" : \"String\", \"pipelineName\" : \"String\", \"pipelineIsDelete\" : true, \"interceptList\" : [ { \"indicatorId\" : \"String\", \"indicatorName\" : \"String\", \"indicatorType\" : \"String\", \"pass\" : true, \"actualValue\" : \"String\", \"logPrompt\" : \"String\", \"detail\" : \"String\", \"operation\" : \"ENUM\", \"value\" : \"String\", \"controlPoint\" : \"String\" } ], \"interceptResult\" : \"ENUM\", \"ruleName\" : \"String\", \"ruleHashId\" : \"String\", \"timestamp\" : 0 } ], \"count\" : 0, \"totalPages\" : 0, \"pageSize\" : 0, \"page\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型分页数据包装模型质量红线-拦截记录 参数名称 参数类型 必须 参数说明 data 分页数据包装模型质量红线-拦截记录 否 数据 message string 否 错误信息 status integer 是 状态码 分页数据包装模型质量红线-拦截记录 参数名称 参数类型 必须 参数说明 records List质量红线-拦截记录> 是 数据 count integer 是 总记录行数 totalPages integer 是 总共多少页 pageSize integer 是 每页多少条 page integer 是 第几页 质量红线-拦截记录 参数名称 参数类型 必须 参数说明 checkTimes integer 是 检查次数 num integer 是 项目里的序号 buildId string 是 构建ID remark string 是 描述 buildNo string 是 构建号 hashId string 是 hashId pipelineId string 是 流水线ID pipelineName string 是 流水线名称 pipelineIsDelete boolean 是 流水线是否已删除 interceptList List质量红线-拦截规则拦截记录> 是 描述列表 interceptResult ENUM(PASS, FAIL, ) 是 拦截结果 ruleName string 是 规则名称 ruleHashId string 是 规则HashId timestamp integer 是 时间戳(秒) 质量红线-拦截规则拦截记录 参数名称 参数类型 必须 参数说明 indicatorId string 是 指标ID indicatorName string 是 指标名称 indicatorType string 否 指标插件类型 pass boolean 是 是否通过 actualValue string 是 实际值 logPrompt string 否 指标日志输出详情 detail string 是 指标详情 operation ENUM(GT, GE, LT, LE, EQ, ) 是 关系 value string 是 阈值值大小 controlPoint string 是 控制点 "},"reference/rest-api/quality-red-line-related/delete-the-list-of-blocking-rules.html":{"url":"reference/rest-api/quality-red-line-related/delete-the-list-of-blocking-rules.html","title":"删除拦截规则列表","keywords":"","body":"删除拦截规则列表 请求方法/请求路径 DELETE /ms/openapi/api/apigw/v3/projects/{projectId}/quality/rules/{ruleHashId}/delete 资源描述 删除拦截规则列表 输入参数说明 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 项目ID ruleHashId string 是 规则ID 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型Boolean 请求样例 curl -X DELETE '[请替换为API地址栏请求地址]' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : true, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型Boolean 参数名称 参数类型 必须 参数说明 data boolean 否 数据 message string 否 错误信息 status integer 是 状态码 "},"reference/rest-api/code-event-trigger/":{"url":"reference/rest-api/code-event-trigger/","title":"WEBHOOK-代码事件触发","keywords":"","body":"WEBHOOK-代码事件触发 "},"reference/rest-api/code-event-trigger/get-the-pipelines-webhook-build-log-list.html":{"url":"reference/rest-api/code-event-trigger/get-the-pipelines-webhook-build-log-list.html","title":"获取流水线的webhook构建日志列表","keywords":"","body":"获取流水线的webhook构建日志列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/{projectId}/{pipelineId}/webhook/buildLog 资源描述 获取流水线的webhook构建日志列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 repoName string 否 仓库名 commitId string 否 commitId page integer 否 页码 pageSize integer 否 每页大小 Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 pipelineId string 是 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型SQLPage流水线webhook-触发日志明细 请求样例 curl -X GET '[请替换为上方API地址栏请求地址]?repoName={repoName}&amp;commitId={commitId}&amp;page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : { \"records\" : [ { \"codeType\" : \"String\", \"repoName\" : \"String\", \"success\" : true, \"triggerResult\" : \"String\", \"createdTime\" : 0, \"logId\" : 0, \"taskName\" : \"String\", \"id\" : 0, \"commitId\" : \"String\", \"projectId\" : \"String\", \"taskId\" : \"String\", \"pipelineId\" : \"String\" } ], \"count\" : 0 }, \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型SQLPage流水线webhook-触发日志明细 参数名称 参数类型 必须 参数说明 data SQLPage流水线webhook-触发日志明细 否 数据 message string 否 错误信息 status integer 是 状态码 SQLPage流水线webhook-触发日志明细 参数名称 参数类型 必须 参数说明 records List流水线webhook-触发日志明细> 否 records count integer 否 count 流水线webhook-触发日志明细 参数名称 参数类型 必须 参数说明 codeType string 是 代码库类型 repoName string 是 仓库名 success boolean 是 是否成功触发 triggerResult string 是 触发结果,如果触发成功就是buildId,触发不成功就是不成功原因 createdTime integer 否 createdTime logId integer 否 logId taskName string 是 插件名 id integer 否 id commitId string 是 commitId projectId string 是 项目ID taskId string 是 插件ID pipelineId string 是 流水线ID "},"reference/rest-api/code-event-trigger/get-the-webhook-list-of-the-pipeline.html":{"url":"reference/rest-api/code-event-trigger/get-the-webhook-list-of-the-pipeline.html","title":"获取流水线的webhook列表","keywords":"","body":"获取流水线的webhook列表 请求方法/请求路径 GET /ms/openapi/api/apigw/v3/{projectId}/{pipelineId}/webhook 资源描述 获取流水线的webhook列表 输入参数说明 Query参数 参数名称 参数类型 必须 参数说明 默认值 page integer 否 页码 pageSize integer 否 每页大小 X-DEVOPS-UID string 是 userId Path参数 参数名称 参数类型 必须 参数说明 默认值 projectId string 是 pipelineId string 是 响应 HTTP代码 说明 参数类型 200 successful operation 数据返回包装模型ListPipelineWebhook 请求样例 curl -X GET '[请替换为API地址栏请求地址]?page={page}&amp;pageSize={pageSize}' HEADER样例 accept: application/json Content-Type: application/json 返回样例-200 { \"data\" : [ { \"repoType\" : \"ENUM\", \"repoName\" : \"String\", \"repositoryType\" : \"ENUM\", \"id\" : 0, \"projectName\" : \"String\", \"projectId\" : \"String\", \"repoHashId\" : \"String\", \"taskId\" : \"String\", \"pipelineId\" : \"String\" } ], \"message\" : \"String\", \"status\" : 0 } 数据返回包装模型ListPipelineWebhook 参数名称 参数类型 必须 参数说明 data ListPipelineWebhook> 否 数据 message string 否 错误信息 status integer 是 状态码 PipelineWebhook 参数名称 参数类型 必须 参数说明 repoType ENUM(ID, NAME, ) 否 repoType repoName string 否 repoName repositoryType ENUM(CODE_SVN, CODE_GIT, CODE_GITLAB, GITHUB, CODE_TGIT, ) 否 repositoryType id integer 否 id projectName string 否 projectName projectId string 否 projectId repoHashId string 否 repoHashId taskId string 否 taskId pipelineId string 否 pipelineId "},"reference/DB-doc/":{"url":"reference/DB-doc/","title":"数据库设计文档","keywords":"","body":"数据库设计文档 "},"reference/pre-define-var/":{"url":"reference/pre-define-var/","title":"预定义变量列表","keywords":"","body":"预定义变量列表 合理的使用变量可以更便捷的维护流水线，bk-ci 提供了很多系统变量。 注意：变量即意味着可变，可被用户和插件进行覆盖，所以在使用过程中，谨慎覆盖以免影响自己的业务逻辑，bk-ci 没有系统常量，一切交给用户自己决定 用法：插件配置中，输入 ${变量名} 即可获取对应变量的值。如 ${BK_CI_PIPELINE_NAME} Variable Description 样例 BK_CI_PIPELINE_ID 流水线 ID，34 位长度，全局唯一 p-2fc5a05b25024d5586742b8e88d3c853 BK_CI_START_TYPE 构建启动方式，MANUAL/TIME_TRIGGER/WEB_HOOK/SERVICE/PIPELINE/REMOTE 中取值 WEB_HOOK BK_CI_PROJECT_NAME 项目英文名 alltest BK_CI_PIPELINE_NAME 流水线名称 持续交付流水线 BK_CI_BUILD_ID 流水线当前构建 ID，34 位长度，全局唯一 b-d82918fc4f5c44c790d538785685f36b BK_CI_BUILD_NUM 构建序号，从 1 开始不断自增 BK_CI_BUILD_JOB_ID 流水线当前构建的当前 Job ID，34 位长度，全局唯一 BK_CI_BUILD_TASK_ID 流水线当前插件 Task ID，34 位长度，全局唯一 BK_CI_BUILD_REMARK 流水线构建备注信息，在流水线运行时通过 setEnv \"BK_CI_BUILD_REMARK\" 设置 BK_CI_BUILD_START_TIME 流水线启动时间， 毫秒数 BK_CI_BUILD_END_TIME 流水线结束时间， 毫秒数 BK_CI_BUILD_TOTAL_TIME 流水线执行耗时 BK_CI_BUILD_FAIL_TASKS 流水线执行失败的所有 TASK，内容格式：1、格式：[STAGE 别名][JOB别名]TASK 别名 2、若有多个并发 JOB 失败，使用换行\\n 分隔 可用于构建失败通知，或流水线执行过程中的插件中 BK_CI_BUILD_FAIL_TASKNAMES 流水线执行失败的所有 TASK，内容格式：TASK 别名,TASK 别名,TASK 别名 可用于构建失败通知，或流水线执行过程中的插件中 BK_CI_TURBO_ID 编译加速任务 ID，只有启用了编译加速才有该变量 BK_CI_MAJOR_VERSION 流水线里唯一，主版本号，开启“推荐版本号”功能后出现 BK_CI_MINOR_VERSION 流水线里唯一，特性版本，开启“推荐版本号”功能后出现 BK_CI_FIX_VERSION 流水线里唯一，修正版本，开启“推荐版本号”功能后出现 BK_CI_BUILD_NO 流水线里唯一，构建号，开启“推荐版本号”功能后出现，可以设置不同的自增规则 BK_CI_PIPELINE_UPDATE_USER 流水线更新用户 BK_CI_PIPELINE_VERSION 流水线版本号 BK_CI_PROJECT_NAME_CN 流水线对应的项目名称 BK_CI_START_CHANNEL 流水线启动的 CHANNEL CODE BK_CI_START_USER_ID 流水线构建真正执行的用户 ID, 一般手动启动时的当前用户 ID，重试流水线人的用户 ID。如果是定时/webhook/子流水线调用， 则是流水线的最后修改人 BK_CI_START_USER_NAME 流水线构建启动的用户 ID, 通常值与 BK_CI_START_USER_ID 是一致的，但以下两种情况例外：1.当启动方式为 WEBHOOK，该值为 Git/SVN 的用户 ID；2.当是子流水线调用时，该值为父流水线的构建启动人 ID 例如：parent1 和 Sub2 的最后修改人为 User0；user1 手工执行 parent1 父流水线，parent1 再启动子流水线 Sub2， 此时 Sub2 的 BK_CI_START_USER_ID 为 User0；BK_CI_START_USER_NAME 为 User1 BK_CI_PARENT_PIPELINE_ID 获取启动当前流水线的父流水线 ID，仅当作为子流水线并被父流水线触发时才有效 BK_CI_PARENT_BUILD_ID 获取启动当前流水线的父流水线的构建 ID，仅当作为子流水线并被父流水线触发时才有效 BK_CI_START_PIPELINE_USER_ID 获取启动当前流水线的父流水线启动人，仅当作为子流水线并被父流水线触发时才有效 BK_CI_START_WEBHOOK_USER_ID 获取启动当前流水线的触发 Webhook 帐号，仅当被 webhook 触发时才有效，该值将会展示在执行历史中，但实际执行人不是他，而是最后流水线修改人 BK_CI_RETRY_COUNT 重试的次数，默认不存在， 当出现失败重试/rebuild 时， 该变量才会出现，并且+1 "},"reference/pre-define-var/gitlab.html":{"url":"reference/pre-define-var/gitlab.html","title":"gitlab事件触发","keywords":"","body":"gitlab事件触发 Tag Push Hook BK_CI_HOOK_REVISION 9a5e129e281d8be43b8876e8d6185dc5b3a40560 BK_CI_REPO_NAME xxx/shequ0421 BK_CI_START_WEBHOOK_USER_ID xxx BK_CI_START_TASK_ID e-e13298d0ee6f44f1996fd68a06358f7e BK_CI_HOOK_TYPE GITLAB BK_CI_HOOK_EVENT_TYPE TAG_PUSH BK_CI_HOOK_REPO 5Dan BK_CI_HOOK_REPO_TYPE ID BK_CI_HOOK_BLOCK FALSE BK_CI_HOOK_BRANCH newtagtest BK_CI_HOOK_MESSAGE Update gdsa BK_CI_REPO_WEBHOOK_REPO_TYPE GITLAB BK_CI_REPO_WEBHOOK_REPO_URL https://gitlab.com/xxx/shequ0421.git BK_CI_REPO_WEBHOOK_NAME xxx/shequ0421 BK_CI_REPO_WEBHOOK_ALIAS_NAME ggg/shequ0421 BK_CI_REPO_WEB_HOOK_HASHID 5Dan BK_CI_BUILD_MSG Update gdsa BK_CI_HOOK_QUEUE FALSE BK_CI_REPO_GIT_WEBHOOK_COMMITID xxxx BK_CI_REPO_GIT_WEBHOOK_EVENT_TYPE TAG_PUSH BK_CI_REPO_GIT_WEBHOOK_INCLUDE_BRANCH BK_CI_REPO_GIT_WEBHOOK_EXCLUDE_BRANCH BK_CI_REPO_GIT_WEBHOOK_INCLUDE_PATHS BK_CI_REPO_GIT_WEBHOOK_EXCLUDE_PATHS BK_CI_REPO_GIT_WEBHOOK_EXCLUDE_USERS BK_CI_GIT_WEBHOOK_FINAL_INCLUDE_BRANCH newtagtest BK_CI_GIT_WEBHOOK_FINAL_INCLUDE_PATH BK_CI_REPO_GIT_WEBHOOK_TAG_NAME newtagtest BK_CI_REPO_GIT_WEBHOOK_TAG_OPERATION BK_REPO_GIT_WEBHOOK_PUSH_TOTAL_COMMIT 1 BK_CI_REPO_GIT_WEBHOOK_TAG_USERNAME xxx BK_REPO_GIT_WEBHOOK_TAG_CREATE_FROM BK_REPO_GIT_WEBHOOK_PUSH_COMMIT_1 xxxxx BK_REPO_GIT_WEBHOOK_PUSH_COMMIT_MSG_1 Update gdsa BK_REPO_GIT_WEBHOOK_PUSH_COMMIT_TIMESTAMP_1 0 BK_REPO_GIT_WEBHOOK_PUSH_COMMIT_AUTHOR_1 name BK_REPO_GIT_WEBHOOK_PUSH_ADD_FILE_COUNT 0 BK_REPO_GIT_WEBHOOK_PUSH_MODIFY_FILE_COUNT 1 BK_REPO_GIT_WEBHOOK_PUSH_DELETE_FILE_COUNT 0 BK_REPO_GIT_WEBHOOK_PUSH_MODIFY_FILE_1_1 gdsa "},"reference/faqs/":{"url":"reference/faqs/","title":"FAQS","summary":"常见问题集锦","keywords":"","body":"FAQS "},"reference/faqs/gitlab-not-trigger.html":{"url":"reference/faqs/gitlab-not-trigger.html","title":"gitlab事件触发插件无法触发事件?","keywords":"","body":"gitlab事件触发插件无法触发事件? 查看下devops_ci_process.T_PIPELINE_WEBHOOK表是否有注册这条流水线， SELECT * FROM devops_ci_process.T_PIPELINE_WEBHOOK WHERE pipeline_id = ${pipeline_id}，${pipeline_id}可以从url地址获取 如果没有注册 查看repository服务到gitlba的网络是否能通 查看gitlab仓库的权限是否是master权限 在repository服务部署的机器上，执行grep \"Start to add the web hook of \" $BK_HOME/logs/ci/repository/repository-devops.log查找注册失败原因，$BK_HOME默认是/data/bkce 如果已注册，还是没有触发， 到gitlab的webhook页面，查看是否有注册成功，如图1 如果gitlab中有注册的url，url是 http://域名/external/scm/codegit/commit 然后点击编辑，查看发送的详情，如图2 查看gitlab没有发送的详情，如图3 如果上面都没问题，在process服务部署的机器上，执行grep \"Trigger gitlab build\" $BK_HOME/logs/ci/process/process-devops.log 搜索日志，查找触发的入口日志 "},"reference/faqs/log-colors.html":{"url":"reference/faqs/log-colors.html","title":"如何让自己的流水线日志显示带上不同颜色","keywords":"","body":"如何让自己的流水线日志显示带上不同颜色 在流水线日志组件中，我们定义了以下关键字供插件开发者使用。 关键字 作用 备注 ##[section] 一个Job或者插件的开头 如果是插件开头，必须包含在一个Job的Starting内 ##[endsection] 一个Job或者插件的结尾 如果是插件结尾，必须包含在一个Job的Finishing内 ##[command] 将后面的字符串以ShellScripts高亮 #0070BB ##[info] 将后面的字符串标记为info颜色 #48BB31 ##[warning] 将后面的字符串标记为warning颜色 #BBBB23 ##[error] 将后面的字符串标记为error颜色 #DE0A1A ##[debug] 将后面的字符串标记为debug颜色 #0D8F61 ##[group] 一个折叠的开始 ##[endgroup] 一个折叠的结束 以Bash插件为例： echo \"##[command]whoami\" whoami echo \"##[command]pwd\" pwd echo \"##[command]uptime\" uptime echo \"##[command]python --version\" python --version echo \"##[info] this is a info log\" echo \"##[warning] this is a warning log\" echo \"##[error] this is a error log\" echo \"##[debug] this is a debug log\" echo \"##[group] Print SYSTEM ENV\" env echo \"##[endgroup]\" 你将看到如下图所示效果 "},"reference/limit/":{"url":"reference/limit/","title":"系统限制","summary":"为保证系统稳定性，我们在产品层面做了一系列系统限制","keywords":"","body":"系统限制 "},"reference/limit/pipeline-limit.html":{"url":"reference/limit/pipeline-limit.html","title":"流水线复杂度限制","keywords":"","body":"流水线复杂度限制 每个Pipeline最多包含30个Stage 每个Stage最多包含30个Job 每个Job最多包含50个Task 每个Task最多包含150个输入参数、100个输出参数 每个输入参数也有对应的大小限制 组件类型 大小限制 input 1KB checkbox 1KB textarea 16KB code_editor 16KB 每个输出参数最多4KB大小 "},"总览/蓝盾使用文档.html":{"url":"总览/蓝盾使用文档.html","title":"蓝盾使用文档","keywords":"","body":"蓝盾使用文档 流水线 流水线：通过新建流水线，根据用户需求使用特定功能和插件，制定执行流程步骤。 流水线简单示例 新建流水线 建立空白流水线，使用模板新建流水线的方式参考步骤xxx 流水线配置 流水线基础功能介绍，参考xxx Trigger设置 点击Trigger，包含推荐版本号以及流水线变量 推荐版本号：默认不需要更改，可以自定义版本号/构建号 流水线变量：定义执行流水线前需要输入的变量，例如：param1，同时在流水线中通过${param1}引用变量 注：Trigger定义流水线的触发方式，包含手动执行、远程触发、定时任务等 添加stage，选择job类型为Linux环境 概念说明： Stage：称为阶段，由多个 Jobs（作业）组成，同一个 Stage 下的 Job 执行方式为并行，由于 Job 之间是相互独立的，某个 Job 失败后，其它的 Job 会被运行到完成，一个 Job 失败，则该 Stage 失败. Job：运行的构建环境，分为有编译和无编译环境，有编译分为Windows/macOS/Linux，同时指定插件只能包含 有编译和无编译的区别： 有编译环境包含的依赖比较多，如python环境、gcc编译环境等，无编译环境只有基础java运行环境 有编译环境的工作空间会映射到本地磁盘，无编译环境不会做映射 job配置 选择构建资源类型为Docker公共构建机，镜像使用默认镜像bkci:latest，通过在构建机上启动容器作为构建环境 构建资源类型分为：公共构建机和私有构建机 区别： 公共构建机是蓝盾自带的构建机，通过在构建机启动容器作为job的构建环境 私有构建机是用户根据项目，将mac/linux/windows机器通过安装agent的方式接入到蓝盾作为构建机，私有构建机不启动容器，无需指定镜像 两者使用上区别不大，看具体项目使用需求 添加插件 注：每一个task对应一个插件，表示一个单独的任务，插件属于有编译环境或者无编译环境中的一种，每种插件不同的功能，比如拉取 Git 仓库代码，执行shell/bat等、 点击shell script，编写要执行的shell脚本内容，${message}为Trigger定义的变量 通知 勾选通知方式之后，可以在流水线构建成功或者失败时，发送通知到指定人员的企业微信 基础设置 默认【可同时运行多个构建任务】，可以多次执行同一流水线 【锁定流水线，，任何触发方式都无法运行】：锁定后无法执行该流水线 【同一时间最多只能运行一个构建任务】：同一流水线同一时间只能一个任务在运行，其余执行的流水线会加入到排队机制中，进行排队执行 执行流水线 点击保存并执行，输入message变量内容，点击执行 查看执行结果 点击Shell Script查看脚本执行的输出结果 功能说明 代码库 源代码地址：可以通过bk-ci服务端正常访问的gitlab仓库地址，以http/https开头，以.git结尾； 别名：关联后在bk-ci里显示的名字，这个别名会在流水线中关联代码库时显示，整个项目下唯一； 访问凭证：点击右侧新增按钮可跳转到凭证管理中添加凭证。 凭证管理 配置的凭证可以在拉取代码库、调用代码库API、通过账号密码访问第三方服务时使用。 类型 描述 密码 定义后会作为流水线变量在各种插件中引用 用户名+密码 一般在关联SVN代码库时用到 SSH私钥 关联GitLab代码库时（不需要GitLab事件触发）使用 SSH私钥+私有Token 关联GitLab代码库时（需要GitLab事件触发）使用 用户名密码+私有token 关联GitLab代码库时（需要GitLab事件触发）使用 流水线示例 示例一(代码拉取+制品库上传下载) 点击代码库，（代码库介绍详情见【代码库】目录） 选择关联Gitlab代码库 点击新增，会自动跳转到凭证管理--新增凭据，获取gitlab上的AccessToken进行填写，点击确定 回到代码库，访问凭据上选择凭据【demo】，确定 创建流水线 添加新的stage 添加checkout gitlab插件，关联创建好的代码库，按分支拉取 添加shell插件，查看当前工作空间，以及拉取的代码目录，对代码进行打包 把当前工作空间的ShortUrl.zip文件保存下来放到制品库，可以使用upload artifacts插件 注：当在使用多种构建机类型的情况下(公共构建机+私有构建机或多个不同私有构建机)，不同构建机之间需要依赖使用构建产物时(不仅限于拉取的代码)，可以把文件/文件夹上传到制品库，在从需要使用到该文件的Job下，下载制品库对应的文件 添加upload artifacts插件 download artifacts插件---从制品库上下载文件到当前Job下的工作空间 添加新stage 添加Download artifacts插件，会根据填写好的内容自动找到制品库的源路径，然后下载到当前工作空间 示例二（流水线触发方式使用-手动执行/定时任务/远程触发等） 触发方式是在Trigger下通过选择不同类型的插件使用 手动执行 创建流水线默认的触发方式为手动执行，这里简单添加一个stage\\ Manual插件：手动执行流水线，指流水线建立之后，可以在右上角点击保存，并且手动点击执行流水线的按钮 定时任务 添加Timer插件，定义crontab表达式 因为没有选择Manual手动触发的方式，所以无法手动点击【执行】按钮来执行流水线 查看执行历史，可以看到流水线以每分钟自动定时执行一次 远程触发 添加Remote插件--可以通过执行命令进行远程触发 复制示例命令，如果trigger有定义变量的话，命令行会自动生成含变量参数的示例 命令行中执行curl命令 流水线执行历史上可以查看到执行记录 示例三（流水线变量使用） 变量使用类型： 全局变量引用，shell/python/windows变量引用方法 插件变量设置方法以及跨插件变量引用 点击Trigger，新增变量message 添加stage，Job下选择Python脚本执行插件，通过${message}使用变量 添加shell插件，使用${message}使用变量 添加stage，Job类型选择windows 点击windows，选择windows私有构建机节点 添加Batch Script插件，使用%message%引用变量 插件设置全局变量方法 在python脚本执行插件上，使用print(\"setEnv demo test1\")，即设置了一个环境变量：demo（注：demo变量不能在当前插件使用） 在shell script以及batch script插件引用变量demo，跟trigger配置的变量引用的方式一样 windows设置全局变量的方式，call:setEnv \"test\" \"testmessage\"，引用test变量的方式如上 流水线默认全局变量 点击任意插件，右上角有一个引用变量，流水线默认定义了一些变量，可以直接在插件上进行使用，变量引用方式如上 示例四（使用模板创建流水线） 模板：流水线模板，通过创建流水线模板，预先设置好通用的流水线，新建流水线时可以选择模板来创建流水线。 流水线--》右上角选择模板管理， 简单新建一个stage测试 点击保存，保存为新版本v1（当前版本默认为init版本，也可以保存在当前版本) 点击右上角版本列表，可以查看当前版本，并且点击【加载】可以切换到其它版本 也可以在【设置】里针对流水线预先设置通知等 使用模板新建流水线，选择创建好的模板 创建之后可以看到预先在模板配置的内容 示例五（流水线条件判断） 新建多个stage 添加shell script插件，随便输入脚本：echo 1 在添加一个并行的stage 后面新加一个stage 添加finally stage Finally stage: 流水线执行的最后一步，无论流水线执行失败还是成功，都会执行finally stage定义的步骤 场景：配置好上述的流水线之后，假如有这么一个使用需求，在满足一定条件下，只执行2-1的Job，并且跳过执行2-2和3-1 通过配置变量的方式实现 定义流水线变量，点击trigger，定义test1和test2两个变量 配置2-1的Job，选择【自定义变量全部满足时才运行】，输入刚刚自定义的两个变量test1、test2，变量值与trigger定义的值相同 配置2-2的Job，点击2-2 Linux，选择【自定义变量全部满足时才运行】，输入刚刚自定义的两个变量test1、test2，值随便写，与刚刚trigger定义的值不同即可 配置3-1 stage，选择【自定义变量全部满足时才运行】，输入刚刚自定义的两个变量test1、test2，值随便写，与刚刚trigger定义的值不同即可 注：流水线可以针对stage/Job/插件来配置执行条件 执行流水线，test1和test2变量值保持默认 查看执行结果，可以看到2-2Job和stage3因为变量条件不满足，直接跳过不执行 示例六（子流水线） 子流水线：可以在当前流水线调用项目下的其它流水线 新建stage 选择call pipeline插件，这里选择调用的流水线为【子流水线demo】，同时还分同步和异步调用执行，填写子流水线的变量参数 添加shell script插件，睡眠20s 子流水线demo，执行sleep 10的操作 执行流水线，call pipeline在调用子流水线之后会立即成功，然后执行下一步操作，而此时【子流水线demo】会异步在执行（如果同步的情况下，会等待子流水线执行完成之后，在执行下一个） "},"总览/代码检查使用文档.html":{"url":"总览/代码检查使用文档.html","title":"代码检查使用文档","keywords":"","body":"代码检查使用文档 codecc简介 通过代码扫描，能找出代码隐藏的错误和缺陷，如内存泄漏，空指针引用，死代码，变量未初始化，复制粘贴错误，重复代码，函数复杂度过高等 codecc接入步骤： 配置代码库，作为代码扫描的目标 创建流水线，拉取目标代码 配置代码分析插件 执行流水线 查看代码检查结果 codecc接入 配置代码库 「选择项目」-「服务」-「代码库」 「关联代码库」-「gitlab代码库」 这里以gitlab代码库为例 关联gitlab代码库有几个条件： 使用accesstoken来关联 创建accesstoken的所有者须是目标仓库的maintainer角色 accesstoken至少需要read_api的权限 源代码地址是http/https协议的 accesstoken 使用「凭证管理」来进行注册，如果在「凭证管理」已经注册accesstoken，关联代码库时，可直接选中对应的accesstoken 如果在「凭证管理」注册accesstoken，则可以新增凭证，跳转至凭证管理页面 gitlab accesstoken创建请参考：https://docs.gitlab.com/ee/user/profile/personal\\_access\\_tokens.html 然后回到关联代码库页面，选中刚创建的accesstoken，确定 创建流水线 「选择项目」-「服务」-「流水线」-「新建流水线」-「项目自定义」-「填写流水线名称」-「新建」 流水线新建好后，需要添加代码拉取的插件以及代码分析的插件，代码分析需要将代码拉取到构建环境所在的工作空间，拉取代码需要选择checkout gitlab插件 「添加stage」-「选择linux构建机」-「新增插件」-「选择checkout gitlab插件」 配置checkout gitlab插件，选择代码库为前述步骤创建的代码库 配置代码分析 添加代码分析插件 配置代码分析，选择同步方式，「基础设置」根据代码库语言选择对应的工程语言，选择对应的规则集，规则集就是codecc进行代码扫描遵循的标准，codecc会提供默认的规则集，如果规则集不满足需求，可以自定义规则集。「扫描配置」选择增量扫描，「路径屏蔽」可以设置路径白名单，一旦设置后，代码分析只会扫描白名单路径下的文件；配置路径黑名单，则代码分析插件不会扫描该路径下的文件。 路径支持通配符，如果是完整路径，须以/开头，如需要屏蔽的文件是repo-name/initial/src/main/java/hello/HelloWorld.java，则路径白名单是/initial/src/main/java/hello/HelloWorld.java 执行流水线 流水线全貌： 保存并执行流水线： 查看代码检查结果 「等待执行完毕」-「点击代码分析插件」-「查看报告」 点击数字可以跳转查看具体的问题 跳转到codecc详情页面，会展示具体的代码问题以及问题严重程度，点击「位置」可以定位到代码问题的具体位置 点击「问题位置」可快速定位有代码问题的具体位置，开发者手动处理代码问题，如已修复问题并提交到下一次commit，可以点击「标记处理」，如果下次的检查仍有问题，将会突出显示 如果该规则和开发者自身的设计不匹配，或者不符合开发者自身的代码风格，认为无需在意该问题的扫描，可以选择「忽略问题」；问题忽略后，将不会在待修复列表中出现 代码问题的「数据报表」功能，可以观察到多次代码分析结果的变化趋势 总览可以看到关于本次代码分析的统计结果 自定义规则集 默认的规则集中规则数目比较少，不满足用户的需求，或者规则集中有某些规则不符合企业或者开发者的代码风格，这时候可以创建自定义规则集 场景模拟：CodeCC默认(C++)默认规则集中的「build/include_what_you_use」规则不符合本企业的代码开发风格，希望去除该规则 创建规则集 自定义规则集和项目相关，创建自定义规则集前需选择目标项目 「基于」选择CodeCC默认(C++)，自定义规则集就能在该默认规则集上增删 增删规则 基于CodeCC默认(C++)的自定义规则集，默认会包含CodeCC默认(C++)所有规则条目，用户可以已定位到不需要的规则「build/include_what_you_use」，并取消勾选，保存规则集 流水线重新选择自定义规则集 在流水线里取消默认规则集，选择自定义规则集，重新保存流水线即可 "},"总览/faq/":{"url":"总览/faq/","title":"FAQ","keywords":"","body":"FAQ 记录用户常见问题 "},"总览/faq/蓝盾faq.html":{"url":"总览/faq/蓝盾faq.html","title":"蓝盾FAQ","keywords":"","body":"蓝盾FAQ Q: 流水线的各个状态代表什么意思？ 流水线的状态汇总如下： Q: 蓝盾流水线进度条是怎么计算的？ 进度条是蓝盾前端根据流水线相关的数据做出的预估。此进度不是准确的时间，仅供参考。 Q: 蓝盾流水线构建出的产物如何支持服务器分发限速配置? 调整分发源的限速，如下图。 对于已经安装agent的机器，可以先移除，再安装。 分发源机器IP: 192.168.5.134 Q: 如何获取流水线id？ 流水线url中，pipeline后的参数分别为项目id和流水线id。如：http://devops.oa.com/console/pipeline/iccentest/p-8f3d1b399897452e901796cf4048c9e2/history 中，iccentest 为项目id，p-xxx 即为流水线id。 Q: 项目名称是否支持修改？ 项目名称可在项目管理内更改，项目英文缩写（即项目id）不能更改。 Q: 流水线执行失败了，插件为什么没有重试按钮？ 只有最新一次的构建可以重试。 Q: 如何通过蓝盾将构建产物自动分发到指定服务器？ 有了部署机器，我们可以将构件分发至测试机上了。首先添加一个无编译环境Job 3-1，添加插件作业平台-构件分发并完成配置。 Q: 蓝盾有哪些全局变量？ https://iwiki.woa.com/pages/viewpage.action?pageId=26941983 Q: 查看日志时，如何查看时间戳？ 查看日志页，Show/Hide Timestamp Q: 蓝盾流水线中的视图管理、标签管理有什么用？ 对流水线进行分类，当流水线数量较多时，标签、视图会有更大作用。 Q: 为什么有时候会出现需要申请流水线权限的情况，但是F5刷新之后恢复？ 存在权限冲突，在用户组权限里，是有多个流水线的权限。 但是自定义里面只有一个流水线的权限。 后续更新版本会修复这个问题。解决方案为删除自定义权限。后续会通过版本更新修复该问题。 Q: python的环境变量添加后，在job执行的时候未生效。（job报错“系统找不到指定的文件”） 因为蓝盾agent和蓝鲸agent使用的账户是system，所以加到administrator的环境变量不生效 需要把python.exe和pip3.exe pip.exe加入到系统环境变量里，再重启操作系统 Q: 可以通过蓝盾流水线上传构建产物到指定私有GitLab仓库吗？ 蓝盾git插件暂无push功能。用户可将ssh私钥放置构建机上，在Batch Script插件或者Bash插件里使用git命令push产物达到临时解决方案。 Q: 怎么在bash插件之间传递变量，上一个bash插件输出变量，下一个bash插件能引用到？ 蓝盾为bash插件提供了 setEnv 命令来设置蓝盾的全局变量, setEnv '变量名' '变量值' 如： setEnv 'cmdb' '3.2.16' setEnv 设置的是当前bash的输出参数，在下游才会生效，当前的bash里打印不出来的。 在windows batchscript插件里使用call:setEnv \"FILENAME\" \"package.zip\" 然后在后续的batchscript插件中使用%FILENAME%引用这个变量 Q: 节点机器，显示正常，为什么监控网络io没有数据？ 没有启用. 这个监控并无意义, 也不影响调度. 建议使用蓝鲸监控等专门的监控系统负责. 如果要启用: 1. 配置 bin/03-userdef/ci.env 2. 添加 BK_CI_ENVIRONMENT_AGENT_COLLECTOR_ON=true 3. 然后添加 influxdb相关的配置项. 4. 重新安装ci-environment. 可以直接使用 ./bk_install ci 安装. 5. 修改已有agent:编辑.agent.properties , 配置devops.agent.collectorOn=true, 重启agent. Q: 有方法可以从标准运维调用蓝盾吗？ 流水线stage-1 trigger选择remote. 然后标准运维调用job快速执行脚本, 调用remote插件里提示的url. Q:构建里面怎么使用docker build 打包镜像，然后推送镜像到harbor，我的是dockerbuild环境 里面没有docker命令 可以使用私有构建机. 容器内是没有dockerd的, 出于安全考虑, 容器内是不能操作主机的dockerd的，或者如果蓝盾使用者是受信任的话，可以使用我们交付团队的DinD方案 Q:使用docker build生成镜像是不是只能使用私有构建机才行？ 建议使用私有构建机, 公共构建机DinD方案存在安全隐患, 所以需要私有构建机制作镜像. 如果蓝盾使用者是受信任的话，可以使用我们交付团队的DinD方案 Q:ci不显示日志 查看对应微服务日志 /data/bkce/logs/ci/log/ 一个index占了12个shards，超过了es7 设置的shards最大值，这是es7的限制 解决方法：清理一些无用的索引 查看目前所有的索引 source /data/install/utils.fc curl -s -u elastic:$BK_ES7_ADMIN_PASSWORD -X GET http://$BK_ES7_IP:9200/_cat/indices?v 删除索引 # index 是索引名称 curl -s -u elastic:$BK_ES7_ADMIN_PASSWORD -X DELETE http://$BK_ES7_IP:9200/index # 注意：不能删除 .security-7 另一种可能是用户未安装es7 Q:公共构建机，这几类都支持吗？ 公共构建机依赖docker, 只能运行linux. 目前只能运行基于我们 bkci/ci:alpine (debian系统)制作的构建镜像. Q:私有构建机必须是物理机吗？可以是docker容器吗? 私有构建机和项目绑定, 且需安装agent并注册. 建议使用物理机/虚拟机等变动少的场景. 容器化使用公共构建机即可. Q:上传镜像报错，程序默认把http方式换成https了 docker默认是https的, 这个要改服务端的docker. 需要在dockerhost机器的/etc/docker/daemon.json添加insecure-registry. BKCI这边推送镜像默认都走https，如果要走http需要把仓库域名配置进insecure 走https的话如果仓库域名不是docker客户端开始装的时候对应的那个证书的话，需要在构建机导入这个域名对应的证书 Q:no available Docker VM 是没有可用的ci-dockerhost.需要: 1. 在ci-dispatch节点执行 /data/src/ci/scripts/bkci-op.sh list 查看是否有状态为true的行. 2. 如果依旧无法调度, 需要检查ci-dispatch的日志有无异常. 或者涉及dockerhost ip的日志. 原因是当时部署蓝盾的时候因为服务器资源有限，把构建机 微服务 网关都放到一台机器上 导致构建机内存使用率过高，构建环境的时候找不到可用构建机，现在把构建机单独部署到别的机器上 之前的那些报错就都没了。 Q: 哪里可以查看上传到 制品库 的jar包？使用默认方式 蓝鲸社区参考：https://bk.tencent.com/s-mart/community/question/2380 Q:gitlab事件触发插件无法触发事件 参考 https://docs.bkci.net/reference/faqs 排查下 Q: 拉取镜像失败，错误信息：status 500 用户自行配置的仓库，需要先保证网路可达 Q: 一台mac只能装一个agent吗 可以多个, 在不同目录启动agent即可. 每个agent实例需要全新安装, 不能直接复制已有agent目录. Q: windos构建机 流水线执行用python去打开exe 失败 windows下，agent无法拉起有UI界面的exe 这个是windows session 0 限制 Q: failed to connect to gitlib.xxx.com port 443:connection timed out 构建失败 提示连接443端口超时 这里断网的原因是dockerhost启动后, 执行过sysctl -p等价的命令, 导致 net.ipv4.ip_forward 被重置为0, 导致容器断网. sysctl -p | grep -F net.ipv4.ip_forward net.ipv4.ip_forward = 0 单独启动一个测试容器: docker run -it --rm centos 应该会看到 WARNING: IPv4 forwarding is disabled. Networking will not work. 容器内执行命令, 等待后会看到提示超时: curl -m 3 -v paas.service.consul 然后执行 systemctl restart bk-ci-docker-dns-redirect 单独启动一个测试容器: docker run -it --rm centos 容器内执行命令, 可以看到网络恢复: curl -v paas.service.consul Q:agent里面需要连网下docker，服务器连不了网，要怎么处理呢？ 目前公共构建机可以使用任意镜像, 无编译环境需要联网下载镜像. 目前需要你将无编译环境部署到可联网的区域, 并放行访问docker hub的地址. 公共构建机填写镜像地址为你们的私有docker registry. 并人工转存docker hub上的bkci/ci:latest到私有docker registry. Q:新增完凭据之后 选择的时候没有 检查创建完毕后浏览器有无报错, 检查 ci-auth 及 ci-ticket 的日志有无异常. 如果是普通用户创建的, 可以切换到管理员账户查看是否成功创建. Q: 挂载怎么用， 下拉框没数据 这个需要维护一个NFS共享存储服务，不太推荐使用了，后续有可能移除 最好的做法是，将依赖工具打包到镜像里，有2个阶段 阶段A 里面的 job 有个 task-A ：是克隆git 代码后构建编译打包jar 阶段B 里面的 job 有个 task-B：是把 task-A 中构建好的 jar scp 到部署发布到服务器 。 验证下来的结果是 这两个阶段的 workspace 是不共通的。目前的做法是我都放到一个 Job里面才行，这样才能共用一个 workspace 里面构建生产的 jar文件。 设计如此，CI的产物如果要部署出去，必须走到制品库，用maven私服的思路没错 Q: 研发商店：插件配置文件[task.json]atomCode字段与工作台录入的不一致 上传的，可能不是插件发布包，是源代码。发布过程看插件的readme 如果上传的是正确的发布包可以临时编辑插件zip包内的task.json, 修改atomCode(和上传界面一致, 不含下划线)后重新打包上传. Q: 插件包上传失败 可以先检查下blueking用户能否正常读写 artifactory数据目录: /data/bkce/public/ci/artifactory/ 然后检查artifactory日志文件, 看看报错. Q: 蓝盾添加节点的时候报错 bkiam v3 failed 然后根据给出的文档排查了日志 /data/bkce/ci/environment/logs/environment-devops.log /data/bkce/ci/environment/logs/auth-devops.log 排查发现ci auth库下的 T_AUTH_IAM_CALLBACK表 为空 原因是集群初始配置失败，但脚本并没有终止 ci初始化 reg ci-auth callback. [1] 19:29:00 [SUCCESS] 172.16.1.49 { \"timestamp\" : 1626291190535, \"status\" : 500, \"error\" : \"Internal Server Error\", \"message\" : \"\", \"path\" : \"/api/op/auth/iam/callback/\" }Stderr: * About to connect() to localhost port 21936 (#0) 解决方法：可尝试手动 注册ci-auth的回调. source /data/install/load_env.sh iam_callback=\"support-files/ms-init/auth/iam-callback-resource-registere.conf\" ./pcmd.sh -H \"$BK_CI_AUTH_IP0\" curl -vsX POST \"http://localhost:$BK_CI_AUTH_API_PORT/api/op/auth/iam/callback/\" -H \"Content-Type:application/json\" -d @${BK_PKG_SRC_PATH:-/data/src}/ci/support-files/ms-init/auth/iam-callback-resource-registere.conf Q: Upload artifacts这个上传功能是上传到当前使用stage的构建的构建机里面还是有单独的仓库位置 归档构件，是把构建机上的产物归档到专用的产物仓库，产物仓库和构建机无关，由 Artifactory 服务决定。 CI 的归档，是将产物暂存到仓库，方便流水线下游操作使用，或者作为后续部署的来源，目前没有支持归档时根据当前构建机所在的云指定构件存储方式。 你描述的，看起来像是构件的分发，通过部署工具去操作可能更合理。 或者你也可以自定义插件自行实现归档 Q: bkci插件如何开发有文件说明吗？ 插件开发指引：https://docs.bkci.net/store/plugins/create-plugin Q: JOOQ;uncategorized SQLException for SQL 旧sql没有清理的缘故 # 清理flag文件, 重新导入全部sql文件 for sql_flag in $HOME/.migrate/*_ci_*.sql; do chattr -i \"$sql_flag\" && rm \"$sql_flag\" done # 导入数据库 SQL 仅在中控机执行 cd ${CTRL_DIR:-/data/install} ./bin/sql_migrate.sh -n mysql-ci /data/src/ci/support-files/sql/*.sql Q: private configuration of key JOB_HOST is missing job脚本执行插件链接：https://github.com/TencentBlueKing/ci-executeJobScript 私有配置缺少JOB_HOST字段，按照上图配置好即可 Q: 发送邮件插件不可用 插件的执行环境分为有编译和无编译，发送邮件插件的执行环境为无编译环境，在创建Job的步骤时，需要选Job类型为无编译环境，即Agentless Q: 发送邮件插件执行成功，但没收到邮件 首先配置ESB的邮件信息，参考：https://bk.tencent.com/s-mart/community/question/2532 配置插件的私有配置，参考：https://github.com/TencentBlueKing/ci-sendEmail Q: 发送邮件插件的sender配置不是我配置的sender sender需要在插件的「私有配置」里设置，独立于ESB的mail_sender 「研发商店」-「流水线插件」-「工作台」-「选择发送邮件插件」-「基本设置」-「私有配置」-「增加sender字段」 除了sender字段，还需要配置其他字段，请参考：https://github.com/TencentBlueKing/ci-sendEmail Q: 配置平台里的业务，如何关联到容器管理平台？ 权限中心中检查，该用户账号是否具有local-k8s」的配置平台权限 配置平台中检查，「资源-业务-运维人员」中是否有配置该账号用户 Q: 怎么使用Merge-Request-Accept-Hook，我的怎么没触发？我希望分支feature_lzj_test123123213合并到feature_lzj_test0117时触发流水线 Merge Request Accept Hook会在源分支成功merge到目标分支时触发 比如，需要将feat_1合并到dev分支时，分支名称写dev，监听源分支写feat_1（也可以使用*号的模糊匹配功能，如feat_*） Q: gitlab触发器在哪里配置webhook地址，jenkins是需要手动配置一个url的 不需要配置这个hook，蓝蓝盾是会自己注册webhook，选择事件类型后保存，就会自动注册webhook Q: gitlab触发失败 检查分支是否匹配 查看下devops_ci_process.T_PIPELINE_WEBHOOK表是否有注册这条流水线， SELECT * FROM devops_ci_process.T_PIPELINE_WEBHOOK WHERE pipeline_id = ${pipeline_id}，${pipeline_id}可以从url地址获取 如果gitlab webhook页面没有注册webhook的记录，如 ① 查看repository服务到gitlab的网络是否能通，比如是否配置gitlab的域名解析 ② 查看gitlab仓库的权限是否是master权限，即生成accesstoken的用户需要是仓库的maintainer角色 ③ 在repository服务部署的机器上，执行grep \"Start to add the web hook of \" $BK_HOME/logs/ci/repository/repository-devops.log查找注册失败原因，$BK_HOME默认是/data/bkce 4. 如果gitlab上有webhook注册记录，如 如果还是没有触发： ① 点击对应webhook的Edit，查看webhook的发送详情，查看View detail ② 查看发送的错误详情，检查gitlab到蓝盾机器的网络是否可达，如gitlab服务器是否能解析蓝盾域名 4. 如果上面都没问题，在process服务部署的机器上，执行grep \"Trigger gitlab build\" $BK_HOME/logs/ci/process/process-devops.log 搜索日志，查找触发的入口日志。查看gitlab push过来的请求体，对比请求体中的http_url字段和代码库里代码仓库的地址是否完全匹配，如果一个是域名形式的url，另一个是ip形式的url，则不匹配 Q: batchscript插件无法执行bat文件，bat文件里有从系统中读取的变量，是当前用户设置的 将对应的agent服务的启动用户改为当前用户，执行命令services.msc打开windows服务管理界面，找到服务devops_agent_${agent_id}(注意：每个agent_id是不同的，agent_id的值可以在配置文件.agent.properties中找到) 右键->属性，在登录页签下选择此账户 如果是如入域构建机，账户名填写域名\\用户名，例如tencent\\zhangsan;如果没有入域的构建机，账户名填入.\\用户名,例如.\\admin、.\\administrator、.\\bkdevops，输入密码后，点击确认按钮 右键 -> 重新启动，重启服务 打开任务管理器，查看进程devopsDaemon.exe和的vopsAgent.exe是否存在，查看两个进程的启动的用户名是否为当前登录用户 Q: batchscript中的命令路径有空格，执行失败 可以将有空格的命令用引号\"\"括起来 Q: 怎么通过接口获取项目 curl -X GET https://devops.bktencent.com/prod/v3/apigw-app/projects/ -H \"Content-Type: application/json\" -H \"X-DEVOPS-UID: admin\" Q: 这个「只有在前面插件运行失败才执行」条件，感觉没有用，成功了也执行了\\ 这个条件的实际意思是：在这个插件前面的任何一个插件运行失败，就符合触发条件，而不是指『上一个』插件失败时运行 Q:项目的英文名称可以修改吗 暂不支持修改 Q: 怎么获取项目名称，我想要在企业微信通知消息里带上 使用全局变量${BK_CI_PROJECT_NAME} Q: 在浏览器里完成了蓝盾登录，在同一浏览器不同tab访问蓝盾，还需要再次登录 这种情况是登录cookie过期了，现在默认应该是两小时，过期时间可调 Q: 有条流水线是通过gitlab触发的，但查看代码变更记录为空，说明此次触发的构建，并没有新代码变更，那为啥为触发 可能的原因是，触发器监听了整个代码库的commit事件，但代码拉取插件只拉取了某一个特定分支的代码，而此分支并没有代码变更，比如，插件监听了整个代码库commit事件，但代码拉取插件只拉取了master分支的代码，而提交commit的是dev分支，代码变更记录显示的是所拉取的分支相交上一次体检的变更，master分支没有变更，所以没有变更记录。 Q: 流水线跟流水线可以设置互斥吗? 或者流水线A 启动, 流水线B启动的时候, 流水线B等待流水线A结束 现在只能对流水线中的JOB进行互斥组配置，如果这两个流水线只有一个JOB，那就这个JOB配置一个相同的互斥组就可以了。如果流水线有多个JOB，需要给两个流水线上再套一个流水线，然后在两条主流水线上配置互斥组，通过这个主流水线拉起任务。 Q: 蓝盾脚本里会起一个gradle daemon进程。最近发现，构建完就关闭。怀疑是不是devops agent处理的？ 蓝盾agent执行完构建任务后，会自动停止所有由agent启动的子进程，如果不需要结束子进程，可以在启动进程前设置环境变量：set DEVOPS_DONT_KILL_PROCESS_TREE=true，在bash脚本里设置setEnv \"DEVOPS_DONT_KILL_PROCESS_TREE\" \"true\" Q: 可以设置 一个变量值, 根据这个变量, 判断是否运行某个 插件 吗 在插件下方选择「自定义变量全部满足时才运行」，自定义变量写需要依赖的变量名称和值 Q: 插件变量的值怎么获取、怎么写才对，比如我想获取插件里flushDB的值，然后在脚本里进行判断，我发现这么写是错误的？ 右上角点击引用变量，然后点右边复制变量，然后粘贴到你需要的地方就可以 Q: 如何在日志每一行前面加上时间戳 占位，待解决 Q:运行锁定, 有没有同一个时间最多运行一个构建任务, 后执行的强制取消先执行的任务 目前还没有这样的功能 Q: 我们有用一个 cat 去显示Log, 这个方式能用, 但有个问题, 每次打开速度都很慢, 差不多要3秒以上才显示Log 数据, 有没什么其他的比较好的方式显示log 关于3秒以上的问题，主要因为这个task对应的日志数据较大，日志内容在3MB，所以时间花在download上 Q: 流水线在执行中，unity的构建日志不会实时显示 其原因是「脚本中先执行unity编译构建操作，同时将日志写入文件，但在该操作结束前，不会执行后续的cat命令，导致日志无法实时在web页面上显示」。 针对此场景，可尝试以下解决方式： nohup $UNITY_PATH -quit -batchmode -projectPath $UNITY_PROJECT_PATH -logFile $UNITY_LOG_PATH -executeMethod CNC.Editor.PackageBuilderMenu.BuildPC \"${isMono} ${isDevelop} $UNITY_OUT_PATH\" & echo $! > /tmp/unity_${BK_CI_BUILD_ID}.pid unity_main_pid=$(cat /tmp/unity_${BK_CI_BUILD_ID}.pid) tail -f --pid ${unity_main_pid} $UNITY_LOG_PATH Q:怎么有条件的执行CallPipeline插件 插件下面有一个流程控制，在流程控制中根据需要添加运行条件可以满足需求 Q: CallPipeline 这样传递参数好像不行？ 需要这样引用变量${flushDB} Q: 怎么引用全局变量，我这么引用$BK_CI_BUILD_FAIL_TASKS好像不行 变量引用需要加花括号${BK_CI_BUILD_FAIL_TASKS} Q: 选中的参数改变的时候能不能隐藏其他参数，比如我operator选中build，tag参数隐藏掉，就像js里option组件的change event 暂时还不支持 Q: 我点击执行的时候，参数下拉列表里的值是能通过自定义的接口获取来吗？ 不支持接口自定义 Q: 服务器磁盘满了，这些目录文件可以删吗 这些都是构建产物，目前对构建产物没有过期清理策略，用户可以视情况删除 Q: 怎么在流水线执行过程中改变参数的值？ 如果是shell插件的话，可以这么修改参数的值setEnv \"{KEY}\" \"{VALUE}\" Q: 1.5.4版本CI，怎么调用openapi 版本还未开启OpenAPI。可以升级到1.5.30及以上版本，该版本已开启OpenAPI。 Q: 怎么查看凭证里的信息 出于安全考虑，该内容为加密的，不支持查看 Q: 代码检查是否支持lua 代码检查暂不支持lua Q: 我是否可以自行扩展代码检查的规则 目前自行扩展功能还在开发中，暂不支持用户自行扩展代码检查的规则 Q: 怎么让流水线task变成可选 在插件里选择「Skip some on manual trigger」 Q: 让蓝盾的日志窗口保留颜色吗？想让失败的案例更明显点 参考https://docs.bkci.net/reference/faqs/log-colors Q:job-作业执行插件是灰色的，但我已经安装了 这个是无编译环境使用的插件，需要在选择JOB类型时选择linux编译环境 Q: 这个业务ID是啥 配置平台中的「业务ID」，作业平台里也可看到 Q: 如果我想通过shell或者bat执行一个python任务，那么蓝盾的变量我只有通过python命令行透传进去嘛,而且无法将变量回写到蓝盾？ 问题一：可以通过获取环境变量的方式来获取蓝盾的变量 # 单行python例子，var为用户在本步骤或者其他步骤定义的变量名，BK_CI_START_USER_NAME是蓝盾的全局变量 python -c \"import os; print(os.environ.get('var'))\" python -c \"import os; print(os.environ.get('BK_CI_START_USER_NAME'))\" ​ # 如果你知道自己定义的变量名字，也可以在自己的python文件里通过os.envion.get('var')来获取 cat test.py import os print(os.environ.get('var')) EOF python test.py 问题二：如何将变量回写到蓝盾 # 如果是常量，shell可以使用setEnv，bat可以使用call:setEnv来将变量回写到蓝盾 setEnv \"var_name\" \"var_value\" # shell call:setEnv \"var_name\" \"var_value\" # bat ​ # 将python脚本输出结果写回蓝盾 var_value=`python script.py` # script.py里需要有print输出，如print(\"test\") setEnv \"var_name\" \"${var_value}\" # var_name=\"test\" ​ # 把变量写到一个文件中，然后在shell中读取这个文件，然后setEnv python script.py > env.sh # 假设env.sh里为file_name=\"test.txt\" source env.sh setEnv \"var_name\" \"${file_name}\" Q: gitlab webhook 报错 URL 'http://devops.bktencent.com/ms/process/api/external/scm/gitlab/commit' is blocked: Host cannot be resolved or invalid 需要在gitlab的机器上配置devops.bktencent.com的hosts解析 Q: 请问这个红框框怎么进入？ 「研发商店 」-「工作台」 Q: 我看每个job是有自己独立的workspace的，那是否存在多个job公用一个workspace的情况呢？ 如果用的单构建机（私有构建机），多个job就会共用一个workspace Q: 请问下使用 \"git拉取代码\" 这个插件的时候，报这个错是啥原因呀。使用的是ssh私钥 这是因为旧版git拉取代码插件不支持在windows构建机上使用，最新版插件已经支持 Q: bkiam v3 failed错误？ 这个问题一般是由于机器重启导致权限中心的saas容器没有启动导致，将容器重新拉起即可解决 Q: 如果我想在提pr的时候强制做一次代码扫描，应该如何配置？ 如果是使用gitlab托管代码，直接配置gitlab触发器，触发的事件类型有： Commit Push Hook 代码提交时触发 Tag Push Hook 提交有tag的代码时触发 Merge Request Hook 当有代码合并时触发 Merge Request Accept Hook 当代码合并后触发 Q: 代码检查里某些规则不适用于我们公司，怎么修改规则？ 规则的内容不支持修改，但是规则集可以修改。代码检查是以规则集为单位进行代码扫描的，如果发现有些规则不适用，可以将其从规则集中去掉，如果该规则集是默认规则集不允许用户增删，可以选择在此基础上创建自定义规则集，创建的规则集就可以由用户自行增删其中的某些具体的规则了 Q: 代码检查失败，Unknown Error：Unexpected char 0x5468 at 0 in X-DEVOPS-UID value：xxx 这一步会读取gitlab 的fullname，设置为英文可以解决问题，暂时还不支持中文的gitlab fullname，个人信息用户名显示上方就是fullname，如这里的vinco huang，可以通过这里的「Edit profile」进入修改页面 Q: 我想在发送的企微消息通知里面附带当前build的一个artifacts文件的链接，该怎么构造附件的下载链接？ http://devops.bktencent.com/ms/artifactory/api/user/artifactories/file/download/local?filePath=/bk-archive/panda/${BK_CI_PIPELINE_ID}/${BK_CI_BUILD_ID}/{你的artifacts文件名} Q: docker公共构建 支持自己的镜像吗？ 支持，参考https://docs.bkci.net/store/ci-images Q: 蓝盾支持私有构建集群里选一台空闲的机器运行流水线吗，比如我们编译打包服务器，可能同时会有多个人操作不同分支的打包。 如果有多台私有构建机，可以构成私有构建集群，选择这个集群后，蓝盾流水线按照一定的算法选择其中一台进行构建： 算法如下： 最高优先级的agent: 最近构建任务中使用过这个构建机 当前没有任何构建任务 次高优先级的agent: 最近构建任务中使用过这个构建机 当前有构建任务，但是构建任务数量没有达到当前构建机的最大并发数 第三优先级的agent: 当前没有任何构建任务 第四优先级的agent: 当前有构建任务，但是构建任务数量没有达到当前构建机的最大并发数 最低优先级： 都没有满足以上条件的 Q: https://docs.bkci.net/打不开 这个文档是由gitbook托管的，需要访问谷歌的一些资源，如果用户网络访问不了谷歌，会出现这样的问题 Q: 机器断电后重启，但蓝鲸有些服务没起来，这些服务没有设置开机自启动吗？ 服务之间有依赖关系，比如蓝鲸的一些服务依赖于mysql，如果这些服务先于mysql启动，那就会出现启动失败的情况 Q: 我有pipeline A,可单独执行，我又有pipeline B,B里面会去调用A，等待A的一个结果，这种怎么做互斥呢 占位，待补充 Q: 可以针对流水线设置权限嘛，比如一个项目下的十个流水线，A可以看到一部分，B只能看到另一部分，想根据职能划分一下 权限中心可以针对单个流水线进行管理，首先要给特定用户授予项目的权限，然后再授予单个流水线的权限 Q: 请问流水线的变量能联动吗，比如我下拉选择了变量1的值为A，变量2的值自动变为A？ 暂时还不支持联动，如果值没什么变化，可以设置默认值 Q: 有支持git push的插件吗，想push一些东西到代码仓库上 可以试着用账密的方式push： git push http://username:passwd@xxx，username和passwd可以使用凭证管理起来，username和passwd不允许有特殊字符，蓝盾在渲染变量的时候，不会转义特殊字符 Q: 怎么重启私有构建上的蓝盾agent 可以到蓝盾agent的安装目录下，先执行stop.sh脚本（在windows上是stop.bat批处理文件），再执行start.sh（在windows上时start.bat文件） Q: 私有构建机怎么重装蓝盾agent 在linux/Mac上，可以支持重新执行安装命令，如果之前遇到安装错误，建议先uninstall，然后删除干净安装目录，重新跑安装命令 windows上需要先uninstall，然后删除安装目录，重新下载安装包，重复安装过程即可 Q: 怎么使用流水线的视图功能 视图可以将流水线分类，允许用户根据流水线的创建人或者流水线的名称来进行分类，多个条件之间支持与/或关系，条件的键值是include的逻辑，不支持模糊匹配以及正则表达式，比如当流水线的名称对应的键值为vinco时，会匹配到该项目中所有流水线名称中包含vinco字样的流水线 Q: TGit插件无法选择gitlab代码库 TGit对接的是腾讯的工蜂代码库，无法使用gitlab代码库 Q: 定时触发的流水线，时间显示不对，触发时间也不对 请检查蓝盾服务器的时间是否正常 Q:流水线的历史页面，能显示自定义内容吗，比如同一条流水线，有时候是打包安卓，有时候是打包ios，单看历史页面，无法分辨出来构建内容 可以在流水线里加个shell插件，通过设置BK_CI_BUILD_REMARK这全局变量的值，来实现想要的备注，流水线结束了，该字段才会显示 Q: windows构建机上安装蓝盾agent失败，子目录或文件已经存在，拒绝访问 这种情况一般是由于用户重复安装蓝盾agent导致，可以先执行uninstall脚本，卸载当前agent，然后删除该agent的安装目录，然后重新下载agent包，再次安装 Q: 蓝盾的执行历史有设置上限的地方，我这个定时流水线可能1分钟一次，数据会浪费磁盘 频率高的定时任务，建议使用蓝鲸的作业平台 Q: Ubuntu蓝鲸agent安装失败，no enough space left in /tmp，但机器是有磁盘空间剩余的 一般是由于Ubuntu机器无法正常执行awk命令导致的，执行awk会有如下报错： awk: symbol lookup error: /usr/local/lib/libreadline.so.8: undefined symbol: UP 可以参考这个方法，进行替换： Q: 关联镜像的时候，镜像验证不通过 镜像在私有仓库，docker默认不支持非https协议的私有仓库，需要修改公共构建机上的/etc/docker/daemon.json，在insecure-registries字段里添加私有仓库地址，然后重启docker服务 Q: bkci的镜像有基于Ubuntu系统的吗 没有现成的基于Ubuntu的bkci镜像，用户可以根据指引来打包自己的镜像：https://bk.tencent.com/docs/document/6.0/129/7518 Q: 如果我有多个公共构建机，公共构建机的调度算法是怎么样的，什么情况任务会调度到另一台构建机上执行？ 算法会优先选择上一次构建的机器（亲和性），上一次构建的机器的某一项资源超过以下阈值，就会寻找另一台构建机进行构建任务 内存阈值：80% 磁盘IO：85% 磁盘空间：90% Q: 如何调整调度算法中的资源阈值 目前只支持调整内存阈值，默认是80%，即当公共构建机的内存使用率达到80%时，如果其他构建机还有空闲资源，任务会被调度到其他构建机，这个阈值是可以修改的，修改方法如下，登录到蓝盾dispatch-docker服务的机器上， 执行： # threshold的值即为阈值百分比，这里以将内存阈值调整为70%为例 curl -H 'Accept:application/json;charset=\"utf-8\"' -H 'Content-Type:application/json;charset=\"utf-8\"' -H \"X-DEVOPS-UID: admin\" -X POST --data '{\"threshold\":\"70\"}' http://127.0.0.1:21938/api/op/dispatchDocker/docker/threshold/update Q: 偶现启动构建机启动失败，Get credential failed 已知问题，将dispatch-docker/lib/bcprov-jdk15on-1.64.jar删除，这是个软链，删除即可，然后重启dispatch-docker服务systemctl restart bk-ci-dispatch-docker.service Q: 怎么删除公共构建机 登录到蓝盾dispatch-docker服务的机器上，执行/data/src/ci/scripts/bkci-op.sh list获取所有的公共构建机，执行/data/src/ci/scripts/bkci-op.sh del操作 Q: 构建步骤卡在准备构建环境这一环 如果是公共构建机，优先考虑公共构建机bk-ci-dockerhost.service服务是否正常 这种情况多见于私有构建机，多为agent安装异常导致，这里列举一些已知的原因： 网络原因，如无法解析蓝盾域名、蓝盾服务不可达等 agent版本安装错误，如在mac上安装linux的agent包，这种情况，将蓝盾agent安装包删除，重新安装对应版本agent即可 在蓝盾agent安装目录的logs下的agentDaemon.log日志里可见too many open files,在机器上执行ulimit -n结果显示，可打开的文件数值太小，默认为1024，将其数值调大，重新安装蓝盾agent即可 Q: 流水线构建失败，Agent心跳超时/Agent Dead，请检查构建机状态 常见于在公共构建机上运行耗费内存的编译任务，导致容器oom，在公共构建机上执行grep oom /var/log/messages通常能看到匹配记录，如果是因为多个任务同时跑在同一台构建机上导致oom，可以通过调整调度算法的内存阈值，避免单台构建机上运行过多任务；如果单个编译任务就触发oom，建议调高构建机的内存，或者使用内存更高的私有构建机 "},"总览/faq/代码检查faq.html":{"url":"总览/faq/代码检查faq.html","title":"代码检查FAQ","summary":"codecc","keywords":"","body":"代码检查FAQ Q: 流水线上加了codecc插件后，如何配置扫描的目录？ 占位，待补充 Q: 代码分析报错：检测到这是第三方构建机 代码分析不支持第三方构建机，可使用公共构建机执行该插件 Q: 有些代码分析任务不需要了，怎么删除 不提供删除功能，如果不需要可以选择停用 Q: codecc路径屏蔽怎么使用 占位，待补充 Q: 一些类里面的std::string，我们希望他是不变的一个const static变量，但是目前代码检测说不可以，必须是const char*。这个规则不太理解，怎么找到规则背后的原理？ codecc的cpplint规则是基于Google C++代码规范的，可以参考https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes ，这里的问题是fstream作为c++的系统头文件，include顺序应放在如boost/*等第三方引入之前 Q: 请问codecc 有检测lua代码的吗默认语言里有吗？ 暂时还不支持lua的代码检查 Q: 我看不到代码检查的源码，显示无法获取代码片段，请确保你对代码库拥有权限，且该文件未从代码库中删除 确认下对该代码库是否有「查看」以及「使用」权限 使用「Checkout gitlab」插件拉取代码 Q: codecc的规则可以自定义或者修改吗，比如想加自己这边的一些命名检查啥的 codecc的规则暂时不支持自定义，只有少数规则可以修改参数 Q:代码检查配置增量扫描的情况下，换了台新的公共构建机后，代码检查失败 切换构建机的时候，需要先进行一次全量扫描，且gitlab checkout 选择fresh checkout方式 "},"总览/faq/编译加速faq.html":{"url":"总览/faq/编译加速faq.html","title":"编译加速FAQ","keywords":"","body":"编译加速FAQ "},"总览/faq/蓝鲸faq.html":{"url":"总览/faq/蓝鲸faq.html","title":"蓝鲸FAQ","keywords":"","body":"蓝鲸FAQ Q: 安装云区域agent报错：CALLBACK_URL不符合规范，请联系运维人员修改，例：http://domain.com/backend 请参考：https://bk.tencent.com/s-mart/community/question/2184 Q: 安装云区域agent报错：账号[root]不存在 请参考：https://bk.tencent.com/s-mart/community/question/3151?type=answer Q: 安装云区域agent报错：用户权限不足 安装云区域agent的用户需要拥有作业平台快速执行脚本的权限 Q: 安装proxy时报错, connection failed 需要把对应端口放开 Q: 能调整蓝鲸登录的过期时长吗 占位，待补充 Q: 如何调整作业平台内存使用量 到作业平台机器上，将作业平台的env文件中JAVA_OPTS修改为适合的内存大小，env文件为：/etc/sysconfig/bk-job-* 然后重启job： systemctl restart bk-job.target "},"总览/已知问题.html":{"url":"总览/已知问题.html","title":"已知问题","keywords":"","body":"已知问题 [TOC] Q: 用户组和用户自定义权限重叠导致用户对流水线的权限不符合预期，ci 出现版本：ci 偶现/必现：必现 描述：用户所在的用户组拥有「test」项目全部权限，同时用户自定义权限有「test项目」部分流水线权限，进入流水线页面，概率性出现无法查看流水线的情况 Q: gitlab偶现获取凭证失败 已知问题，影响版本 把ticket/lib/bcprov-jdk15on-1.64.jar这个包删除，然后重启ticket服务systemctl restart bk-ci-ticket.service Q: 我想把单元测试报告作为产出物报告，上传成功。但是打开报告，无法正常显示，报错「This request有 哈哈是beenblocked； the content must be served over https」 已知问题，影响版本: 1.5.x Q: 使用了模板创建了3个流水线实例，删除了一个，还是显示3个实例，把所有实例删除后，模板也无法删除 已知问题，影响范围：版本1.5.x 已在v1.7版本中进行了修复 Q: 通过流水线创建的代码分析任务，如果流水线删除后，再停掉代码分析任务，会报错 已知问题，影响范围：版本1.5.x Q: 蓝盾输出的日志先后顺序混乱 已知问题，影响范围：版本1.5.x Q: 蓝盾流水线申请权限的时候，点了去申请，页面没有跳转到权限中心，F12查看响应有bkiam v3 failed报错 已知问题，影响范围：版本1.5.x Q: 项目不允许使用TGit插件，请检查插件是否被正确安装 已知问题，TGit对接的是腾讯的工蜂，社区版使用受限，影响版本 "},"增值服务/自监控.html":{"url":"增值服务/自监控.html","title":"自监控","keywords":"","body":"自监控 介绍自监控 "},"增值服务/自更新.html":{"url":"增值服务/自更新.html","title":"自更新","keywords":"","body":"自更新 自更新 "},"增值服务/企业微信通讯录同步.html":{"url":"增值服务/企业微信通讯录同步.html","title":"通讯录同步","keywords":"","body":"企业微信通讯录同步 通讯录同步 "},"增值服务/企业微信二维码登录.html":{"url":"增值服务/企业微信二维码登录.html","title":"二维码登录","keywords":"","body":"企业微信二维码登录 二维码登录 "},"实践案例/流水线/":{"url":"实践案例/流水线/","title":"流水线","keywords":"","body":"流水线 流水线使用案例 "},"实践案例/流水线/流水线使用案例.html":{"url":"实践案例/流水线/流水线使用案例.html","title":"使用案例","keywords":"","body":"使用案例 流水线使用案例 "},"实践案例/代码检查/":{"url":"实践案例/代码检查/","title":"代码检查","keywords":"","body":"代码检查 代码检查 "},"实践案例/代码检查/代码检查使用案例.html":{"url":"实践案例/代码检查/代码检查使用案例.html","title":"代码检查使用案例","keywords":"","body":"代码检查使用案例 代码检查使用案例 "},"实践案例/编译加速/":{"url":"实践案例/编译加速/","title":"编译加速","keywords":"","body":"编译加速 编译加速使用案例 "},"实践案例/编译加速/编译加速使用案例.html":{"url":"实践案例/编译加速/编译加速使用案例.html","title":"编译加速使用案例","keywords":"","body":"编译加速使用案例 "},"插件/钉钉消息通知插件.html":{"url":"插件/钉钉消息通知插件.html","title":"钉钉消息通知插件","keywords":"","body":"钉钉消息通知插件 钉钉消息通知插件 "},"插件/通用消息发送插件.html":{"url":"插件/通用消息发送插件.html","title":"通用消息发送插件","keywords":"","body":"通用消息发送插件 通用消息发送插件 "},"流水线定制化方案/docker-in-docker.html":{"url":"流水线定制化方案/docker-in-docker.html","title":"docker in docker","keywords":"","body":"docker in docker docker in docker "},"流水线定制化方案/docker私有化仓库.html":{"url":"流水线定制化方案/docker私有化仓库.html","title":"docker registry","summary":"dockerregistry","keywords":"","body":"docker registry docker registry "}}